import{_ as s,o as a,c as n,V as l}from"./chunks/framework.c6d8cbec.js";const p="/docs/images/cesium/650.jfif",o="/docs/images/cesium/651.png",e="/docs/images/cesium/652.png",r="/docs/images/cesium/653.png",t="/docs/images/cesium/654.png",c="/docs/images/cesium/655.png",i="/docs/images/cesium/656.png",y="/docs/images/cesium/657.png",F="/docs/images/cesium/658.png",E="/docs/images/cesium/659.png",d="/docs/images/cesium/660.png",m="/docs/images/cesium/661.png",g="/docs/images/cesium/663.png",u="/docs/images/cesium/662.png",k=JSON.parse('{"title":"加载影像数据","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/graph/cesium/cesium基础.md","filePath":"frontend/graph/cesium/cesium基础.md"}'),v={name:"frontend/graph/cesium/cesium基础.md"},h=l('<h1 id="加载影像数据" tabindex="-1">加载影像数据 <a class="header-anchor" href="#加载影像数据" aria-label="Permalink to &quot;加载影像数据&quot;">​</a></h1><h2 id="cesium中的影像图层类" tabindex="-1">Cesium中的影像图层类 <a class="header-anchor" href="#cesium中的影像图层类" aria-label="Permalink to &quot;Cesium中的影像图层类&quot;">​</a></h2><p>无论是二维地图还是三维地图，如果缺少了底图影像或电子地图，都是不完整的。Cesium为我们提供了ImageryLayerCollection、ImageryLayer以及相关的ImageryProvider类来加载不同的影像图层。虽然Cesium把此类图层叫做Imagery*，但并不是特指卫星影像数据，还包括一些互联网地图、TMS、WMS、WMTS、单个图片等。</p><h3 id="imagerylayer类" tabindex="-1">ImageryLayer类 <a class="header-anchor" href="#imagerylayer类" aria-label="Permalink to &quot;ImageryLayer类&quot;">​</a></h3><p>Cesium.ImageryLayer类用于表示Cesium中的影像图层，它就相当于皮毛、衣服，将数据源包裹在内，它需要数据源（imageryProvider）为其提供内在丰富的地理空间信息和属性信息。同时，通过该类还能设置影像图层相关属性，比如透明度、亮度、对比度、色调等。</p><h3 id="imageryprovider类" tabindex="-1">ImageryProvider类 <a class="header-anchor" href="#imageryprovider类" aria-label="Permalink to &quot;ImageryProvider类&quot;">​</a></h3><p>Cesium.ImageryProvider类及其子类封装了加载各种影像图层的方法，其中Cesium.ImageryProvider类是抽象类、基类或者可将其理解为接口，它不能被直接实例化。我们可以把ImageryProvider看作是影像图层的数据源（包裹在ImageryLayer类内部），我们想使用哪种影像图层数据或服务就用对应的ImageryProvider子类去加载，目前Cesium提供了以下14种ImageryProvider。</p><img src="'+p+`"><h3 id="imagerylayercollection类" tabindex="-1">ImageryLayerCollection类 <a class="header-anchor" href="#imagerylayercollection类" aria-label="Permalink to &quot;ImageryLayerCollection类&quot;">​</a></h3><p>Cesium.ImageryLayerCollection类是ImageryLayer类对象的容器，它可以装载、放置多个ImageryLayer或ImageryProvider类对象，而且它内部放置的ImageryLayer或ImageryProvider类对象是有序的。<br> Cesium.Viewer类对象中包含的imageryLayers属性就是ImageryLayerCollection类的实例，它包含了当前Cesium应用程序所有的ImageryLayer类对象，即所有影像图层，所以Cesium中的影像图层可以添加多个。</p><h2 id="cesium加载不同类型的影像图层" tabindex="-1">Cesium加载不同类型的影像图层 <a class="header-anchor" href="#cesium加载不同类型的影像图层" aria-label="Permalink to &quot;Cesium加载不同类型的影像图层&quot;">​</a></h2><p>根据上面提供的Provider可知道，目前Cesium（1.75版本）支持14种类型的影像图层。</p><h3 id="arcgismapserverimageryprovider" tabindex="-1">ArcGisMapServerImageryProvider <a class="header-anchor" href="#arcgismapserverimageryprovider" aria-label="Permalink to &quot;ArcGisMapServerImageryProvider&quot;">​</a></h3><p>支持ArcGIS Online和Server的相关服务。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> arcgisProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">ArcGisMapServerImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(arcgisProvider)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> arcgisProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">ArcGisMapServerImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(arcgisProvider)</span></span></code></pre></div><img src="`+o+`"><h3 id="bingmapsimageryprovider" tabindex="-1">BingMapsImageryProvider <a class="header-anchor" href="#bingmapsimageryprovider" aria-label="Permalink to &quot;BingMapsImageryProvider&quot;">​</a></h3><p>Bing地图影像，可以指定mapStyle，详见BingMapsStyle类。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> bingStyle </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">AERIAL_WITH_LABELS</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">COLLINS_BART</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">CANVAS_GRAY</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">CANVAS_LIGHT</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">CANVAS_DARK</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">ORDNANCE_SURVEY</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">ROAD</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      Cesium.BingMapsStyle.</span><span style="color:#BF9EEE;">AERIAL</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    ];</span></span>
<span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> bingMapProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">BingMapsImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://dev.virtualearth.net</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">//’&#39;https://dev.virtualearth.net&#39;,</span></span>
<span class="line"><span style="color:#F6F6F4;">      key</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">AmXdbd8UeUJtaRSn7yVwyXgQlBBUqliLbHpgn2c76DfuHwAXfRrgS5qwfHU6Rhm8</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      mapStyle</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> bingStyle[</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">],</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(bingMapProvider);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> bingStyle </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">AERIAL_WITH_LABELS</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">COLLINS_BART</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">CANVAS_GRAY</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">CANVAS_LIGHT</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">CANVAS_DARK</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">ORDNANCE_SURVEY</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">ROAD</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      Cesium.BingMapsStyle.</span><span style="color:#005CC5;">AERIAL</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    ];</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> bingMapProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">BingMapsImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;https://dev.virtualearth.net&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//’&#39;https://dev.virtualearth.net&#39;,</span></span>
<span class="line"><span style="color:#24292E;">      key: </span><span style="color:#032F62;">&quot;AmXdbd8UeUJtaRSn7yVwyXgQlBBUqliLbHpgn2c76DfuHwAXfRrgS5qwfHU6Rhm8&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      mapStyle: bingStyle[</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(bingMapProvider);</span></span></code></pre></div><img src="`+e+`"><h3 id="googleearthenterpriseimageryprovider" tabindex="-1">GoogleEarthEnterpriseImageryProvider <a class="header-anchor" href="#googleearthenterpriseimageryprovider" aria-label="Permalink to &quot;GoogleEarthEnterpriseImageryProvider&quot;">​</a></h3><p>使用谷歌Earth企业REST API提供瓦片图像，可与Google Earth Enterprise的3D Earth API一起使用。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> geeMetadata </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">GoogleEarthEnterpriseMetadata</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">http://www.earthenterprise.org/3d</span><span style="color:#DEE492;">&quot;</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> googleEarthProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">GoogleEarthEnterpriseImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      metadata</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> geeMetadata,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(googleEarthProvider);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> geeMetadata </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">GoogleEarthEnterpriseMetadata</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;http://www.earthenterprise.org/3d&quot;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> googleEarthProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">GoogleEarthEnterpriseImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      metadata: geeMetadata,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(googleEarthProvider);</span></span></code></pre></div><p>加载谷歌Earth的瓦片影像需要翻墙，这里就不截图了。</p><h3 id="gridimageryprovider-开发调试" tabindex="-1">GridImageryProvider（开发调试） <a class="header-anchor" href="#gridimageryprovider-开发调试" aria-label="Permalink to &quot;GridImageryProvider（开发调试）&quot;">​</a></h3><p>展示内部渲染网格划分情况，了解每个瓦片的精细度，便于调试地形和图像渲染问题。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> arcgisProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">ArcGisMapServerImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;"> </span></span>
<span class="line"><span style="color:#F6F6F4;">    viewer.imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(arcgisProvider);</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> gridImagery </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">GridImageryProvider</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> gridImageryLayer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> viewer.imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(gridImagery);</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">raiseToTop</span><span style="color:#F6F6F4;">(gridImageryLayer); </span><span style="color:#7B7F8B;">//将图层置顶</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> arcgisProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">ArcGisMapServerImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;https://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    viewer.imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(arcgisProvider);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> gridImagery </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">GridImageryProvider</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> gridImageryLayer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(gridImagery);</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">raiseToTop</span><span style="color:#24292E;">(gridImageryLayer); </span><span style="color:#6A737D;">//将图层置顶</span></span></code></pre></div><img src="`+r+`"><h3 id="ionimageryprovider" tabindex="-1">IonImageryProvider <a class="header-anchor" href="#ionimageryprovider" aria-label="Permalink to &quot;IonImageryProvider&quot;">​</a></h3><p>cesium Ion 在线服务，默认全局基础图像图层（当前为Bing Maps）。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">IonImageryProvider</span><span style="color:#F6F6F4;">({ assetId</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">3954</span><span style="color:#F6F6F4;"> })</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">IonImageryProvider</span><span style="color:#24292E;">({ assetId: </span><span style="color:#005CC5;">3954</span><span style="color:#24292E;"> })</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span></code></pre></div><img src="`+t+`"><h3 id="mapboximageryprovider" tabindex="-1">MapboxImageryProvider <a class="header-anchor" href="#mapboximageryprovider" aria-label="Permalink to &quot;MapboxImageryProvider&quot;">​</a></h3><p>Mapbox影像服务，根据mapId指定地图风格。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> mapIds </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.satellite</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.streets</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.streets-basic</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.light</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.streets-satellite</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.wheatpaste</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.comic</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.outdoors</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.run-bike-hike</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.pencil</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.pirates</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.emerald</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">mapbox.high-contrast</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    ];</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">MapboxImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">        mapId</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> mapIds[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">],</span></span>
<span class="line"><span style="color:#F6F6F4;">        accessToken</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">          </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">pk.eyJ1IjoibHM4NzAwNjEwMTEiLCJhIjoiY2tqYXZlZ2JrMDI5bTJzcDJmdDNteGhsNyJ9.0wTn4B1ce9Q4U5GnPso5iA</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      })</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> mapIds </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.satellite&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.streets&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.streets-basic&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.light&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.streets-satellite&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.wheatpaste&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.comic&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.outdoors&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.run-bike-hike&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.pencil&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.pirates&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.emerald&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mapbox.high-contrast&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    ];</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">MapboxImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        mapId: mapIds[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">        accessToken:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;pk.eyJ1IjoibHM4NzAwNjEwMTEiLCJhIjoiY2tqYXZlZ2JrMDI5bTJzcDJmdDNteGhsNyJ9.0wTn4B1ce9Q4U5GnPso5iA&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      })</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span></code></pre></div><img src="`+c+`"><h3 id="mapboxstyleimageryprovider" tabindex="-1">MapboxStyleImageryProvider <a class="header-anchor" href="#mapboxstyleimageryprovider" aria-label="Permalink to &quot;MapboxStyleImageryProvider&quot;">​</a></h3><p>Mapbox影像服务，根据styleId指定地图风格。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> styleIds </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">streets-v11</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">outdoors-v11</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">light-v10</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">dark-v10</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">satellite-v9</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">msatellite-streets-v11</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    ];</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">MapboxStyleImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">        styleId</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> styleIds[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">],</span></span>
<span class="line"><span style="color:#F6F6F4;">        accessToken</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">          </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">pk.eyJ1IjoibHM4NzAwNjEwMTEiLCJhIjoiY2tqYXZlZ2JrMDI5bTJzcDJmdDNteGhsNyJ9.0wTn4B1ce9Q4U5GnPso5iA</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      })</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> styleIds </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;streets-v11&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;outdoors-v11&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;light-v10&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;dark-v10&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;satellite-v9&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;msatellite-streets-v11&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    ];</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">MapboxStyleImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        styleId: styleIds[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">        accessToken:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#032F62;">&quot;pk.eyJ1IjoibHM4NzAwNjEwMTEiLCJhIjoiY2tqYXZlZ2JrMDI5bTJzcDJmdDNteGhsNyJ9.0wTn4B1ce9Q4U5GnPso5iA&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      })</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span></code></pre></div><img src="`+i+`"><h3 id="openstreetmapimageryprovider" tabindex="-1">OpenStreetMapImageryProvider <a class="header-anchor" href="#openstreetmapimageryprovider" aria-label="Permalink to &quot;OpenStreetMapImageryProvider&quot;">​</a></h3><p>OSM影像服务，根据不同的url选择不同的风格。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> osm </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">OpenStreetMapImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://a.tile.openstreetmap.org/</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      minimumLevel</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      maximumLevel</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">18</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      fileExtension</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">png</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(osm);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> osm </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">OpenStreetMapImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;https://a.tile.openstreetmap.org/&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      minimumLevel: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      maximumLevel: </span><span style="color:#005CC5;">18</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      fileExtension: </span><span style="color:#032F62;">&quot;png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(osm);</span></span></code></pre></div><img src="`+y+`"><h3 id="singletileimageryprovider" tabindex="-1">SingleTileImageryProvider <a class="header-anchor" href="#singletileimageryprovider" aria-label="Permalink to &quot;SingleTileImageryProvider&quot;">​</a></h3><p>单张图片的影像服务，适合离线数据或对影像数据要求并不高的场景下。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> imagelayer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">SingleTileImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./images/worldimage.jpg</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(imagelayer);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> imagelayer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">SingleTileImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;./images/worldimage.jpg&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(imagelayer);</span></span></code></pre></div><img src="`+F+`"><h3 id="tilecoordinatesimageryprovider-开发调试" tabindex="-1">TileCoordinatesImageryProvider（开发调试） <a class="header-anchor" href="#tilecoordinatesimageryprovider-开发调试" aria-label="Permalink to &quot;TileCoordinatesImageryProvider（开发调试）&quot;">​</a></h3><p>展示内部渲染网格瓦片划分情况，包括网格瓦片等级、X、Y序号，便于调试地形和图像渲染问题。当然也可以和GridImageryProvider一起叠加使用。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> imagelayer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">SingleTileImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./images/worldimage.jpg</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(imagelayer);</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> tileCoordinates </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">TileCoordinatesImageryProvider</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> tileCoordinatesLayer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> viewer.imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(tileCoordinates);</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">raiseToTop</span><span style="color:#F6F6F4;">(tileCoordinatesLayer); </span><span style="color:#7B7F8B;">//将图层置顶</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> imagelayer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">SingleTileImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;./images/worldimage.jpg&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(imagelayer);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> tileCoordinates </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">TileCoordinatesImageryProvider</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> tileCoordinatesLayer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> viewer.imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(tileCoordinates);</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">raiseToTop</span><span style="color:#24292E;">(tileCoordinatesLayer); </span><span style="color:#6A737D;">//将图层置顶</span></span></code></pre></div><img src="`+E+`"><h3 id="tilemapserviceimageryprovider" tabindex="-1">TileMapServiceImageryProvider <a class="header-anchor" href="#tilemapserviceimageryprovider" aria-label="Permalink to &quot;TileMapServiceImageryProvider&quot;">​</a></h3><p>访问瓦片图的Rest接口。瓦片图被转换为MapTiler或GDAL2Tiles。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> imagelayer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">TileMapServiceImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">//cesiumjs.org/tilesets/imagery/blackmarble</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      maximumLevel</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">8</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(imagelayer);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> imagelayer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">TileMapServiceImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;//cesiumjs.org/tilesets/imagery/blackmarble&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      maximumLevel: </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(imagelayer);</span></span></code></pre></div><h3 id="urltemplateimageryprovider" tabindex="-1">UrlTemplateImageryProvider <a class="header-anchor" href="#urltemplateimageryprovider" aria-label="Permalink to &quot;UrlTemplateImageryProvider&quot;">​</a></h3><p>指定url的format模版，方便用户实现自己的Provider.比如国内的高德，腾讯等影像服务，url都是一个固定的规范，都可以通过该Provider轻松实现。而OSM也是通过该类实现的，以下是使用XYZ方式加载上面加载过的OSM影像服务。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> osmImageryProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">UrlTemplateImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      subdomains</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">a</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">b</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">c</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">],</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(osmImageryProvider);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">osmImageryProvider</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">UrlTemplateImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      subdomains: [</span><span style="color:#032F62;">&quot;a&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;b&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;c&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(osmImageryProvider);</span></span></code></pre></div><img src="`+d+`"><p>这里需要注意参数subdomains，它表示子域。subdomains参数数组中的四个值可以替换url中的{s}，也就是改变不同的请求URL，从而提高加载数据的速度。</p><h3 id="webmapserviceimageryprovider" tabindex="-1">WebMapServiceImageryProvider <a class="header-anchor" href="#webmapserviceimageryprovider" aria-label="Permalink to &quot;WebMapServiceImageryProvider&quot;">​</a></h3><p>符合WMS规范的影像服务都可以通过该类封装，指定具体参数实现。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> provider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">WebMapServiceImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://nationalmap.gov.au/proxy/http://geoserver.nationalmap.nicta.com.au/geotopo_250k/ows</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      layers</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">Hydrography:bores</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      parameters</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        transparent</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        format</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">image/png</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      },</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(provider);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> provider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">WebMapServiceImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url: </span><span style="color:#032F62;">&quot;https://nationalmap.gov.au/proxy/http://geoserver.nationalmap.nicta.com.au/geotopo_250k/ows&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      layers: </span><span style="color:#032F62;">&quot;Hydrography:bores&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      parameters: {</span></span>
<span class="line"><span style="color:#24292E;">        transparent: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        format: </span><span style="color:#032F62;">&quot;image/png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(provider);</span></span></code></pre></div><img src="`+m+`"><h3 id="webmaptileserviceimageryprovider" tabindex="-1">WebMapTileServiceImageryProvider <a class="header-anchor" href="#webmaptileserviceimageryprovider" aria-label="Permalink to &quot;WebMapTileServiceImageryProvider&quot;">​</a></h3><p>服务WMTS1.0.0规范的影像服务，都可以通过该类实现，比如国内的天地图。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> shadedRelief1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">WebMapTileServiceImageryProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      url</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/WMTS</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      layer</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">World_Imagery</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      style</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">default</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      format</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">image/jpeg</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      tileMatrixSetID</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">default028mm</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      maximumLevel</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">23</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">    imageryLayers.</span><span style="color:#62E884;">addImageryProvider</span><span style="color:#F6F6F4;">(shadedRelief1);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> shadedRelief1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">WebMapTileServiceImageryProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      url:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/WMTS&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      layer: </span><span style="color:#032F62;">&quot;World_Imagery&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      style: </span><span style="color:#032F62;">&quot;default&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      format: </span><span style="color:#032F62;">&quot;image/jpeg&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      tileMatrixSetID: </span><span style="color:#032F62;">&quot;default028mm&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      maximumLevel: </span><span style="color:#005CC5;">23</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    imageryLayers.</span><span style="color:#6F42C1;">addImageryProvider</span><span style="color:#24292E;">(shadedRelief1);</span></span></code></pre></div><h1 id="加载地形数据" tabindex="-1">加载地形数据 <a class="header-anchor" href="#加载地形数据" aria-label="Permalink to &quot;加载地形数据&quot;">​</a></h1><h2 id="cesium中的地形图层类" tabindex="-1">Cesium中的地形图层类 <a class="header-anchor" href="#cesium中的地形图层类" aria-label="Permalink to &quot;Cesium中的地形图层类&quot;">​</a></h2><p>前面我们主要学习了cesium内置接口如何操作影像数据，但是在一些应用场景中我们需要操作地形数据，例如模拟逼真的三维场景、与高程相关的一些空间分析和计算等。Cesium提供了TerrainProvider基类，该Provider负责每一个Tile对应的地形数据的构建，定义了一套地形Provider需要实现的接口和规范，但本身并不会参与其中的操作。基于此类，cesium为我们封装了5个现成的继承类操作地形数据：</p><img src="`+g+`"><p>不像上一讲介绍的影像图层（有专门的ImageryLayer）那样，Cesium中的地形类是直接通过不同的terrainProvider控制的，然后把某一个实例化的terrainProvider赋值给Viewer.terrainProvider来控制地形数据的显隐。所以，Cesium中的地形图层只能有一个。</p><h2 id="cesium加载不同的地形数据" tabindex="-1">Cesium加载不同的地形数据 <a class="header-anchor" href="#cesium加载不同的地形数据" aria-label="Permalink to &quot;Cesium加载不同的地形数据&quot;">​</a></h2><p>Cesium支持渐进流式加载和渲染全球高精度地形，并且包含海、湖、河等水面效果。相对2D地图，山峰、山谷等其他地形特征的更适宜在这种3D地球中展示。</p><p>Cesium支持两种类型的地形，STK World Terrain和Small Terrain。</p><blockquote><p>针对于这两种类型的地形，这里不做过多的介绍，感兴趣的可参考cesiumjs开发实践(四) 地形介绍这篇文章。</p><p><a href="https://my.oschina.net/u/1585572/blog/290481" target="_blank" rel="noreferrer">https://my.oschina.net/u/1585572/blog/290481</a></p></blockquote><p>地形数据集是巨大的，通常都是GB或者TB级别。在普通3D引擎中，使用底层图形API去高效实现地形数据的可视化需要做很多事情。幸好，Cesium已经完成了这个体力活，而我们只需要写几行代码，这些都是terrainProvider的功劳。下面我们主要介绍Cesium中常用的3个terrainProvider。</p><h3 id="ellipsoidterrainprovider" tabindex="-1">EllipsoidTerrainProvider <a class="header-anchor" href="#ellipsoidterrainprovider" aria-label="Permalink to &quot;EllipsoidTerrainProvider&quot;">​</a></h3><p>EllipsoidTerrainProvider是Globe默认采用的地形Provider，该Provider不支持水面，没有法向量，所以即使开启光照，对Tile也是无效的。但是它提供了一个全球范围内高度为0的地形，不需要额外的地形文件，就可以实时的自己来构建这个高度为0的Mesh。对那些没有网络环境，或网络不理想，或不需要地形的应用，EllipsoidTerrainProvider提供了最简单的，无需额外负担的地形数据来构网。</p><p>另外，EllipsoidTerrainProvider具有其他terrainProvider不具备的属性tileScheme，该属性是Provider内部地球网格的剖分方式，通常是WGS84坐标，也可以选择墨卡托坐标系。Cesium中目前支持WGS1984和墨卡托投影两种。</p><p>Terrain和Imagery分别采用自己的TileScheme，比如目前Terrain默认采用WGS1984的坐标系，这和经纬高的真实数据更接近，而目前Imagery影像服务基本都是墨卡托投影。</p><p>鉴于此，为了使数据的加载性能更好，可以让地形的TileScheme和影像的保持一致，都设置成墨卡托投影。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> ellipsoidProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">EllipsoidTerrainProvider</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">viewer.terrainProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> ellipsoidProvider;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> ellipsoidProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">EllipsoidTerrainProvider</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">viewer.terrainProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ellipsoidProvider;</span></span></code></pre></div><h3 id="arcgistiledelevationterrainprovider" tabindex="-1">ArcGISTiledElevationTerrainProvider <a class="header-anchor" href="#arcgistiledelevationterrainprovider" aria-label="Permalink to &quot;ArcGISTiledElevationTerrainProvider&quot;">​</a></h3><p>ArcGIS的地形，这个可以说是一个真实的（凹凸的）高度图，原理和EllipsoidTerrainProvider如出一辙，因此同样的不支持法线，水面，但可以选择TileScheme，与EllipsoidTerrainProvider不一样之处在于每一个切片会根据ArcGIS规范请求一张图片，该图片中的像素对应的值就是该像素对应的高度，真的是名副其实的高度图。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> terrainProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">ArcGISTiledElevationTerrainProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">   url</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">     </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">   token</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">     </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">KED1aF_I4UzXOHy3BnhwyBHU4l5oY6rO6walkmHoYqGp4XyIWUd5YZUC1ZrLAzvV40pR6gBXQayh0eFA8m6vPg..</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  });</span></span>
<span class="line"><span style="color:#F6F6F4;"> viewer.terrainProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> terrainProvider;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> terrainProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">ArcGISTiledElevationTerrainProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">   url:</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#032F62;">&quot;https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">   token:</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#032F62;">&quot;KED1aF_I4UzXOHy3BnhwyBHU4l5oY6rO6walkmHoYqGp4XyIWUd5YZUC1ZrLAzvV40pR6gBXQayh0eFA8m6vPg..&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;"> viewer.terrainProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> terrainProvider;</span></span></code></pre></div><h3 id="cesiumterrainprovider" tabindex="-1">CesiumTerrainProvider <a class="header-anchor" href="#cesiumterrainprovider" aria-label="Permalink to &quot;CesiumTerrainProvider&quot;">​</a></h3><p>Cesium标准地形，在该Provider中支持两种地形格式，一种是高度图（目前Cesium已经废弃 ），另一种则是TIN网格的STK地形。</p><p>Cesium厉害的之处就在于目前采用STK的地形服务，并通过QuantizedMeshTerrainData封装了STK地形数据格式，它的优点是支持水面和法线，同时数据量比较小。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">var</span><span style="color:#F6F6F4;"> terrainProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> Cesium.</span><span style="color:#62E884;">CesiumTerrainProvider</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">  url </span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> Cesium.IonResource.</span><span style="color:#62E884;">fromAssetId</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3956</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  requestWaterMask</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">// 请求水体效果所需要的海岸线数据</span></span>
<span class="line"><span style="color:#F6F6F4;">  requestVertexNormals</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">// 请求地形照明数据</span></span>
<span class="line"><span style="color:#F6F6F4;"> });</span></span>
<span class="line"><span style="color:#F6F6F4;">viewer.terrainProvider </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> terrainProvider;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> terrainProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> Cesium.</span><span style="color:#6F42C1;">CesiumTerrainProvider</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  url : Cesium.IonResource.</span><span style="color:#6F42C1;">fromAssetId</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3956</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  requestWaterMask: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 请求水体效果所需要的海岸线数据</span></span>
<span class="line"><span style="color:#24292E;">  requestVertexNormals: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 请求地形照明数据</span></span>
<span class="line"><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#24292E;">viewer.terrainProvider </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> terrainProvider;</span></span></code></pre></div><img src="`+u+'">',91),C=[h];function q(b,P,I,D,A,S){return a(),n("div",null,C)}const T=s(v,[["render",q]]);export{k as __pageData,T as default};
