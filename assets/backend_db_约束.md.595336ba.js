import{_ as s,o as a,c as n,V as p}from"./chunks/framework.c6d8cbec.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"backend/db/约束.md","filePath":"backend/db/约束.md"}'),l={name:"backend/db/约束.md"},o=p(`<h2 id="_1-约束-✏️-🍐-❤️" tabindex="-1">1. 约束 ✏️ 🍐 ❤️ <a class="header-anchor" href="#_1-约束-✏️-🍐-❤️" aria-label="Permalink to &quot;1\\. 约束 ✏️ 🍐 ❤️&quot;">​</a></h2><p><img src="http://www.yangeit.cn:21010/assets/image-20210724104749122-70735a75.png" alt="image-20210724104749122"></p><p>image-20210724104749122</p><p>上面表中可以看到表中数据存在一些问题：</p><p>问题</p><ul><li><p>id 列一般是用标示数据的唯一性的，而上述表中的 id 为 1 的有三条数据，并且 <code>马花疼</code> 没有 id 进行标示</p></li><li><p><code>柳白</code> 这条数据的 age 列的数据是 3000，而人也不可能活到 3000 岁</p></li><li><p><code>马运</code> 这条数据的 math 数学成绩是-5，而数学学得再不好也不可能出现负分</p></li><li><p><code>柳青</code> 这条数据的 english 列（英文成绩）值为 null，而成绩即使没考也得是 0 分</p><blockquote><p>针对上述数据问题，我们就可以从数据库层面在添加数据的时候进行限制，这个就是约束。</p></blockquote></li></ul><h3 id="_1-1-概念-✏️" tabindex="-1">1.1 概念 ✏️ <a class="header-anchor" href="#_1-1-概念-✏️" aria-label="Permalink to &quot;1.1 概念 ✏️&quot;">​</a></h3><p>约束的定义和作用</p><ul><li><p>约束是作用于的规则，用于的数据</p><p>例如：我们可以给 id 列加约束，让其值不能重复，不能为 null 值。</p></li><li><p>约束的存在保证了数据库中数据的</p><p>添加约束可以在添加数据的时候就限制不正确的数据，年龄是 3000，数学成绩是-5 分这样无效的数据，继而保障数据的完整性。</p></li></ul><h3 id="_1-2-约束分类-🍐" tabindex="-1">1.2 约束分类 🍐 <a class="header-anchor" href="#_1-2-约束分类-🍐" aria-label="Permalink to &quot;1.2 约束分类 🍐&quot;">​</a></h3><h4 id="_1-2-1-「约束分类」核心问题-答案" tabindex="-1">1.2.1 「约束分类」核心问题&amp;答案 <a class="header-anchor" href="#_1-2-1-「约束分类」核心问题-答案" aria-label="Permalink to &quot;1.2.1 「约束分类」核心问题&amp;答案&quot;">​</a></h4><p>问题</p><ol><li>数据库中约束分类有哪些？</li></ol><p>点击查看</p><p>保证列中所有的数据不能有 null 值。</p><p>例如：id 列在添加 <code>马花疼</code> 这条数据时就不能添加成功。 <strong>注意：null 不支持聚合函数</strong></p><ul><li><p>保证列中所有数据各不相同。</p><p>例如：id 列中三条数据的值都是 1，这样的数据在添加时是绝对不允许的。</p></li><li><p>主键是一行数据的<strong>唯一标识</strong>，<strong>要求非空且唯一</strong>。一般我们都会给没张表添加一个主键列用来唯一标识数据。</p><p>例如：上图表中 id 就可以作为主键，来标识每条数据。那么这样就要求数据中 id 的值不能重复，不能为 null 值。</p><blockquote><p>主键：一般使用 Btree 结构进行检索. EXPLAIN 命令用来检测 sql 扫描了多少行,用来测试查询性能 <img src="http://www.yangeit.cn:21010/assets/image-20220326181812285-1c85d15e.png" alt="image-20220326181812285"></p></blockquote></li><li><p>保证列中的值满足某一条件。</p><p>例如：我们可以给 age 列添加一个范围，最低年龄可以设置为 1，最大年龄就可以设置为 300，这样的数据才更合理些。</p><blockquote><p>注意：MySQL 不支持检查约束。</p><p>这样是不是就没办法保证年龄在指定的范围内了？从数据库层面不能保证，以后可以在 java 代码中进行限制，一样也可以实现要求。</p></blockquote></li><li><p>保存数据时，未指定值则采用默认值。</p><p>例如：我们在给 english 列添加该约束，指定默认值是 0，这样在添加数据时没有指定具体值时就会采用默认给定的 0。</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220326181903024-93260353.png" alt="image-20220326181903024"></p><p>image-20220326181903024</p></li><li><p>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。</p><p>外键约束现在可能还不太好理解，后面我们会重点进行讲解。</p><p>提示：实际开发中，一般不用物理外键，而是使用逻辑外键，就是先搞清表和表的关系，如 1 对多的话，在多的一方建立外键字段。</p></li></ul><h3 id="_1-3-非空约束-🍐" tabindex="-1">1.3 非空约束 🍐 <a class="header-anchor" href="#_1-3-非空约束-🍐" aria-label="Permalink to &quot;1.3 非空约束 🍐&quot;">​</a></h3><h4 id="_1-3-1-概念" tabindex="-1">1.3.1 概念 <a class="header-anchor" href="#_1-3-1-概念" aria-label="Permalink to &quot;1.3.1 概念&quot;">​</a></h4><p>非空约束用于保证列中所有数据不能有 NULL 值</p><h4 id="_1-3-2-语法" tabindex="-1">1.3.2 语法 <a class="header-anchor" href="#_1-3-2-语法" aria-label="Permalink to &quot;1.3.2 语法&quot;">​</a></h4><p>点击查看代码</p><h5 id="_1️⃣-添加约束" tabindex="-1">1️⃣ 添加约束 <a class="header-anchor" href="#_1️⃣-添加约束" aria-label="Permalink to &quot;1️⃣ 添加约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 创建表时添加非空约束</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型 </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    …</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 创建表时添加非空约束</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型 </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    …</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 建完表后添加非空约束</span></span>
<span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">MODIFY</span><span style="color:#F6F6F4;"> 字段名 数据类型 </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 建完表后添加非空约束</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">MODIFY</span><span style="color:#24292E;"> 字段名 数据类型 </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;">;</span></span></code></pre></div><h5 id="_2️⃣-删除约束" tabindex="-1">2️⃣ 删除约束 <a class="header-anchor" href="#_2️⃣-删除约束" aria-label="Permalink to &quot;2️⃣ 删除约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">MODIFY</span><span style="color:#F6F6F4;"> 字段名 数据类型;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">MODIFY</span><span style="color:#24292E;"> 字段名 数据类型;</span></span></code></pre></div><blockquote><p>在 Navicat 中设置图解</p></blockquote><p><img src="http://www.yangeit.cn:21010/assets/2022-09-18-01-03-25-16f3e947.png" alt=""></p><h3 id="_1-4-唯一约束-🍐" tabindex="-1">1.4 唯一约束 🍐 <a class="header-anchor" href="#_1-4-唯一约束-🍐" aria-label="Permalink to &quot;1.4 唯一约束 🍐&quot;">​</a></h3><h4 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h4><p>唯一约束用于保证列中所有数据各不相同</p><h4 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法&quot;">​</a></h4><p>点击查看代码</p><h5 id="_1️⃣-添加约束-1" tabindex="-1">1️⃣ 添加约束 <a class="header-anchor" href="#_1️⃣-添加约束-1" aria-label="Permalink to &quot;1️⃣ 添加约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 创建表时添加唯一约束</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型 </span><span style="color:#F286C4;">UNIQUE</span><span style="color:#F6F6F4;"> [AUTO_INCREMENT],</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">-- AUTO_INCREMENT: 当不指定值时自动增长</span></span>
<span class="line"><span style="color:#F6F6F4;">    …</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型,</span></span>
<span class="line"><span style="color:#F6F6F4;">    …</span></span>
<span class="line"><span style="color:#F6F6F4;">    [CONSTRAINT] [约束名称] </span><span style="color:#F286C4;">UNIQUE</span><span style="color:#F6F6F4;">(列名)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 创建表时添加唯一约束</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型 </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;"> [AUTO_INCREMENT],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- AUTO_INCREMENT: 当不指定值时自动增长</span></span>
<span class="line"><span style="color:#24292E;">    …</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型,</span></span>
<span class="line"><span style="color:#24292E;">    …</span></span>
<span class="line"><span style="color:#24292E;">    [CONSTRAINT] [约束名称] </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;">(列名)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 建完表后添加唯一约束</span></span>
<span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">MODIFY</span><span style="color:#F6F6F4;"> 字段名 数据类型 </span><span style="color:#F286C4;">UNIQUE</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 建完表后添加唯一约束</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">MODIFY</span><span style="color:#24292E;"> 字段名 数据类型 </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;">;</span></span></code></pre></div><h5 id="_2️⃣-删除约束-1" tabindex="-1">2️⃣ 删除约束 <a class="header-anchor" href="#_2️⃣-删除约束-1" aria-label="Permalink to &quot;2️⃣ 删除约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">INDEX</span><span style="color:#F6F6F4;"> 字段名;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">INDEX</span><span style="color:#24292E;"> 字段名;</span></span></code></pre></div><blockquote><p>Navicat 中设置唯一约束</p></blockquote><p><img src="http://www.yangeit.cn:21010/assets/2022-09-18-01-06-55-27681b7a.png" alt=""></p><h3 id="_1-5-主键约束-🍐" tabindex="-1">1.5 主键约束 🍐 <a class="header-anchor" href="#_1-5-主键约束-🍐" aria-label="Permalink to &quot;1.5 主键约束 🍐&quot;">​</a></h3><h4 id="概念-1" tabindex="-1">概念 <a class="header-anchor" href="#概念-1" aria-label="Permalink to &quot;概念&quot;">​</a></h4><p>主键是一行数据的唯一标识，</p><h4 id="语法-1" tabindex="-1">语法 <a class="header-anchor" href="#语法-1" aria-label="Permalink to &quot;语法&quot;">​</a></h4><p>点击查看</p><h5 id="_1️⃣-添加约束-2" tabindex="-1">1️⃣ 添加约束 <a class="header-anchor" href="#_1️⃣-添加约束-2" aria-label="Permalink to &quot;1️⃣ 添加约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 创建表时添加主键约束</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型 </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> [AUTO_INCREMENT],</span></span>
<span class="line"><span style="color:#F6F6F4;">    …</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型,</span></span>
<span class="line"><span style="color:#F6F6F4;">    [CONSTRAINT] [约束名称] </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">(列名)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 创建表时添加主键约束</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型 </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> [AUTO_INCREMENT],</span></span>
<span class="line"><span style="color:#24292E;">    …</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型,</span></span>
<span class="line"><span style="color:#24292E;">    [CONSTRAINT] [约束名称] </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">(列名)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 建完表后添加主键约束</span></span>
<span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">ADD</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">(字段名);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 建完表后添加主键约束</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">(字段名);</span></span></code></pre></div><h5 id="_2️⃣-删除约束-2" tabindex="-1">2️⃣ 删除约束 <a class="header-anchor" href="#_2️⃣-删除约束-2" aria-label="Permalink to &quot;2️⃣ 删除约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">;</span></span></code></pre></div><blockquote><p>Navicat 中设置主键约束</p></blockquote><p><img src="http://www.yangeit.cn:21010/assets/2022-09-18-01-09-31-8127b7d2.png" alt=""></p><h3 id="_1-6-默认约束-🍐" tabindex="-1">1.6 默认约束 🍐 <a class="header-anchor" href="#_1-6-默认约束-🍐" aria-label="Permalink to &quot;1.6 默认约束 🍐&quot;">​</a></h3><h4 id="概念-2" tabindex="-1">概念 <a class="header-anchor" href="#概念-2" aria-label="Permalink to &quot;概念&quot;">​</a></h4><p>保存数据时，</p><h4 id="语法-2" tabindex="-1">语法 <a class="header-anchor" href="#语法-2" aria-label="Permalink to &quot;语法&quot;">​</a></h4><p>点击查看</p><h5 id="_1️⃣-添加约束-3" tabindex="-1">1️⃣ 添加约束 <a class="header-anchor" href="#_1️⃣-添加约束-3" aria-label="Permalink to &quot;1️⃣ 添加约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 创建表时添加默认约束</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    列名 数据类型 </span><span style="color:#F286C4;">DEFAULT</span><span style="color:#F6F6F4;"> 默认值,</span></span>
<span class="line"><span style="color:#F6F6F4;">    …</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 创建表时添加默认约束</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    列名 数据类型 </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> 默认值,</span></span>
<span class="line"><span style="color:#24292E;">    …</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 建完表后添加默认约束</span></span>
<span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> 列名 </span><span style="color:#F286C4;">SET</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">DEFAULT</span><span style="color:#F6F6F4;"> 默认值;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 建完表后添加默认约束</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> 列名 </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> 默认值;</span></span></code></pre></div><h5 id="_2️⃣-删除约束-3" tabindex="-1">2️⃣ 删除约束 <a class="header-anchor" href="#_2️⃣-删除约束-3" aria-label="Permalink to &quot;2️⃣ 删除约束&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> 列名 </span><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">DEFAULT</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> 列名 </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="_1-7-约束案例" tabindex="-1">1.7 约束案例 <a class="header-anchor" href="#_1-7-约束案例" aria-label="Permalink to &quot;1.7 约束案例&quot;">​</a></h3><p><strong>根据需求，为表添加合适的约束</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;">,  </span><span style="color:#7B7F8B;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#F6F6F4;">    ename </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 员工姓名，非空且唯一</span></span>
<span class="line"><span style="color:#F6F6F4;">    joindate </span><span style="color:#F286C4;">DATE</span><span style="color:#F6F6F4;">,  </span><span style="color:#7B7F8B;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">    salary DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),  </span><span style="color:#7B7F8B;">-- 工资，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">    bonus DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">)  </span><span style="color:#7B7F8B;">-- 奖金，如果没有将近默认为0</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#24292E;">    ename </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 员工姓名，非空且唯一</span></span>
<span class="line"><span style="color:#24292E;">    joindate </span><span style="color:#D73A49;">DATE</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#24292E;">    salary DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),  </span><span style="color:#6A737D;">-- 工资，非空</span></span>
<span class="line"><span style="color:#24292E;">    bonus DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">-- 奖金，如果没有将近默认为0</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><p><strong>建表语句如下：</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 先删除表</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> emp;</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#F6F6F4;">  ename </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">UNIQUE</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 员工姓名，非空并且唯一</span></span>
<span class="line"><span style="color:#F6F6F4;">  joindate </span><span style="color:#F286C4;">DATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> , </span><span style="color:#7B7F8B;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">  salary DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> , </span><span style="color:#7B7F8B;">-- 工资，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">  bonus DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">DEFAULT</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">-- 奖金，如果没有奖金默认为0</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 先删除表</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> emp;</span></span>
<span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#24292E;">  ename </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 员工姓名，非空并且唯一</span></span>
<span class="line"><span style="color:#24292E;">  joindate </span><span style="color:#D73A49;">DATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> , </span><span style="color:#6A737D;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#24292E;">  salary DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> , </span><span style="color:#6A737D;">-- 工资，非空</span></span>
<span class="line"><span style="color:#24292E;">  bonus DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">-- 奖金，如果没有奖金默认为0</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><blockquote><p>先添加一条没有问题的数据</p></blockquote><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="_1-验证主键约束-非空且唯一" tabindex="-1">1. 验证主键约束，非空且唯一 <a class="header-anchor" href="#_1-验证主键约束-非空且唯一" aria-label="Permalink to &quot;1\\. 验证主键约束，非空且唯一&quot;">​</a></h4><p>点击查看演示</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行结果如下：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724114548170-0a90f13b.png" alt="image-20210724114548170"></p><p>image-20210724114548170</p><p>从上面的结果可以看到，那我们重新添加一条数据，如下：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724114805350-6890a5e6.png" alt="image-20210724114805350"></p><p>从上面结果可以看到，所以主键约束是用来限制数据非空且唯一的。那我们再添加一条符合要求的数据</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724115024106-f29299ff.png" alt="image-20210724115024106"></p><h4 id="_2-验证非空约束" tabindex="-1">2.验证非空约束 <a class="header-anchor" href="#_2-验证非空约束" aria-label="Permalink to &quot;2.验证非空约束&quot;">​</a></h4><p>点击查看演示</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724115149415-31b4c7f6.png" alt="image-20210724115149415"></p><p>从上面结果可以看到，<code>ename</code> 字段的</p><h4 id="_3-验证唯一约束" tabindex="-1">3.验证唯一约束 <a class="header-anchor" href="#_3-验证唯一约束" aria-label="Permalink to &quot;3.验证唯一约束&quot;">​</a></h4><p>点击查看演示</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724115336916-4dea92ee.png" alt="image-20210724115336916"></p><p>从上面结果可以看到，</p><h4 id="_4-默认约束" tabindex="-1">4.默认约束 <a class="header-anchor" href="#_4-默认约束" aria-label="Permalink to &quot;4.默认约束&quot;">​</a></h4><p>点击查看演示</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">王五</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;王五&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行完上面语句后查询表中数据，如下图可以看到王五这条数据的 bonus 列就有了默认值 0。 <img src="http://www.yangeit.cn:21010/assets/image-20210724115547951-28bed5d6.png" alt="image-20210724115547951"></p><p>如下：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;赵六&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行完上面语句后查询表中数据，如下图可以看到赵六这条数据的 bonus 列的值是 null。</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724115826516-6d9cb6e9.png" alt="image-20210724115826516"></p><p>image-20210724115826516</p><h4 id="_5-验证自动增长-auto-increment-当列是数字类型-并且唯一约束" tabindex="-1">5.验证自动增长： auto_increment 当列是数字类型 并且唯一约束 <a class="header-anchor" href="#_5-验证自动增长-auto-increment-当列是数字类型-并且唯一约束" aria-label="Permalink to &quot;5.验证自动增长： auto\\_increment 当列是数字类型 并且唯一约束&quot;">​</a></h4><p>点击查看演示</p><p>重新创建 <code>emp</code> 表，并给 id 列添加自动增长</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> auto_increment, </span><span style="color:#7B7F8B;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#F6F6F4;">  ename </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">UNIQUE</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 员工姓名，非空并且唯一</span></span>
<span class="line"><span style="color:#F6F6F4;">  joindate </span><span style="color:#F286C4;">DATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> , </span><span style="color:#7B7F8B;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">  salary DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">NOT NULL</span><span style="color:#F6F6F4;"> , </span><span style="color:#7B7F8B;">-- 工资，非空</span></span>
<span class="line"><span style="color:#F6F6F4;">  bonus DOUBLE(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">DEFAULT</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">-- 奖金，如果没有奖金默认为0</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> auto_increment, </span><span style="color:#6A737D;">-- 员工id，主键且自增长</span></span>
<span class="line"><span style="color:#24292E;">  ename </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">UNIQUE</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 员工姓名，非空并且唯一</span></span>
<span class="line"><span style="color:#24292E;">  joindate </span><span style="color:#D73A49;">DATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> , </span><span style="color:#6A737D;">-- 入职日期，非空</span></span>
<span class="line"><span style="color:#24292E;">  salary DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">NOT NULL</span><span style="color:#24292E;"> , </span><span style="color:#6A737D;">-- 工资，非空</span></span>
<span class="line"><span style="color:#24292E;">  bonus DOUBLE(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">DEFAULT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">-- 奖金，如果没有奖金默认为0</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><p>接下来给 emp 添加数据，分别验证不给 id 列添加值以及给 id 列添加 null 值，id 列的值会不会自动增长：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 不给id值</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 给id值</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六2</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 给id值</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六3</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 不给id值</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;赵六&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 给id值</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;赵六2&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 给id值</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;赵六3&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span></code></pre></div><h3 id="_1-8-约束实操练习-✏️" tabindex="-1">1.8 约束实操练习 ✏️ <a class="header-anchor" href="#_1-8-约束实操练习-✏️" aria-label="Permalink to &quot;1.8 约束实操练习 ✏️&quot;">​</a></h3><blockquote><p>练习时长：10min</p></blockquote><h4 id="_1-8-0「约束实操-」目的" tabindex="-1">1.8.0「约束实操 」目的 <a class="header-anchor" href="#_1-8-0「约束实操-」目的" aria-label="Permalink to &quot;1.8.0「约束实操 」目的&quot;">​</a></h4><blockquote><p>熟悉唯一约束、非空约束、默认约束、自增、主键约束的用法并理解</p></blockquote><h4 id="_1-8-1「约束实操-」需求-效果" tabindex="-1">1.8.1「约束实操 」需求&amp;效果 <a class="header-anchor" href="#_1-8-1「约束实操-」需求-效果" aria-label="Permalink to &quot;1.8.1「约束实操 」需求&amp;效果&quot;">​</a></h4><blockquote><p>设置约束后，验证是否生效</p></blockquote><h4 id="_1-8-2「约束实操-」步鄹" tabindex="-1">1.8.2「约束实操 」步鄹 <a class="header-anchor" href="#_1-8-2「约束实操-」步鄹" aria-label="Permalink to &quot;1.8.2「约束实操 」步鄹&quot;">​</a></h4><ul><li><p><strong>方式 1： 在创建员工表的时候 在 ddl 中 添加约束</strong></p></li><li><p><strong>方式 2： 创建之后进行修改---Navicat 进行修改</strong></p></li></ul><blockquote><p>详情请看：1.3-1.6 👈</p></blockquote><p>提示</p><ul><li>非空约束： 关键字是 NOT NULL <ul><li>保证列中所有的数据不能有 null 值。</li><li>例如：id 列在添加 马花疼 这条数据时就不能添加成功。</li></ul></li><li>唯一约束：关键字是 UNIQUE <ul><li>保证列中所有数据各不相同。</li><li>例如：id 列中三条数据的值都是 1，这样的数据在添加时是绝对不允许的。</li></ul></li><li>主键约束且自增： 关键字是 PRIMARY KEY auto_increment <ul><li>主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给没张表添加一个主键列用来唯一标识数据。</li></ul></li><li>默认约束： 关键字是 DEFAULT <ul><li>保存数据时，未指定值则采用默认值</li></ul></li></ul><blockquote><p>详情请看：1.7 约束案例 👈</p></blockquote><p>点击查看测试数据</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 非空约束</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 主键自增测试数据：</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六2</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六3</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 主键唯一</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 默认约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,joindate,salary) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">王五</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">1999-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">8800</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 非空约束</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 主键自增测试数据：</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;赵六&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;赵六2&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;赵六3&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 主键唯一</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary,bonus) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 默认约束</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,joindate,salary) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;王五&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;1999-11-11&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">8800</span><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="_1-8-3-拓展思维-🚀" tabindex="-1">1.8.3 拓展思维：🚀 <a class="header-anchor" href="#_1-8-3-拓展思维-🚀" aria-label="Permalink to &quot;1.8.3 拓展思维：🚀&quot;">​</a></h4><p>拓展思维</p><p>当主键自增的时候，在传统的平台中，有大量的物联网设备，每时每刻上传数据的话，很容易导致 int 主键用完，导致不可用，怎么解决?</p><p>解决方案一：使用类似 UUID 的技术，保证每次主键不一样</p><p>解决方案二：还是使用 int ，使用分表进行存储（如）</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220326140530889-50b99e9e.png" alt="image-20220326140530889"></p><p>image-20220326140530889</p><h3 id="_1-9-外键约束-🍐" tabindex="-1">1.9 外键约束 🍐 <a class="header-anchor" href="#_1-9-外键约束-🍐" aria-label="Permalink to &quot;1.9 外键约束 🍐&quot;">​</a></h3><h4 id="_1-9-1-概述" tabindex="-1">1.9.1 概述 <a class="header-anchor" href="#_1-9-1-概述" aria-label="Permalink to &quot;1.9.1 概述&quot;">​</a></h4><p>外键用来</p><p>如何理解上面的概念呢？如下图有两张表，员工表和部门表： <img src="http://www.yangeit.cn:21010/assets/image-20210724120904180-62fb0579.png" alt="image-20210724120904180"></p><p>员工表中的 dep_id 字段是部门表的 id 字段关联，也就是说 1 号学生张三属于 1 号部门研发部的员工。 <strong>现在我要删除 1 号部门，就会出现错误的数据（员工表中属于 1 号部门的数据）</strong>。 而我们上面说的两张表的关系只是我们认为它们有关系，此时需要通过外键让这两张表产生数据库层面的关系，这样你要删除部门表中的 1 号部门的数据将<strong>无法删除</strong>。</p><h4 id="_1-9-2-语法" tabindex="-1">1.9.2 语法 <a class="header-anchor" href="#_1-9-2-语法" aria-label="Permalink to &quot;1.9.2 语法&quot;">​</a></h4><p>点击查看</p><ul><li>添加外键约束</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 创建表时添加外键约束</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">表名</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">   列名 数据类型,</span></span>
<span class="line"><span style="color:#F6F6F4;">   …</span></span>
<span class="line"><span style="color:#F6F6F4;">   [CONSTRAINT] [外键名称] </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;">(外键列名) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> 主表(主表列名)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 创建表时添加外键约束</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表名</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">   列名 数据类型,</span></span>
<span class="line"><span style="color:#24292E;">   …</span></span>
<span class="line"><span style="color:#24292E;">   [CONSTRAINT] [外键名称] </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;">(外键列名) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> 主表(主表列名)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 建完表后添加外键约束</span></span>
<span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">ADD</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> 外键名称 </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;"> (外键字段名称) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> 主表名称(主表列名称);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 建完表后添加外键约束</span></span>
<span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">ADD</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> 外键名称 </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;"> (外键字段名称) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> 主表名称(主表列名称);</span></span></code></pre></div><ul><li>删除外键约束</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">ALTER</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> 表名 </span><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;"> 外键名称;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;"> 外键名称;</span></span></code></pre></div><h4 id="_1-9-3-练习" tabindex="-1">1.9.3 练习 <a class="header-anchor" href="#_1-9-3-练习" aria-label="Permalink to &quot;1.9.3 练习&quot;">​</a></h4><p>根据上述语法创建员工表和部门表，并添加上外键约束：</p><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 删除表</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> emp;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 部门表</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">dept</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_name </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	addr </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	age </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#7B7F8B;">-- 添加外键 dep_id,关联 dept 表的id主键</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_emp_dept </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;">(dep_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> dept(id)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 删除表</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> emp;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 部门表</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dept</span><span style="color:#24292E;">(</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	dep_name </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	addr </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	age </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	dep_id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">-- 添加外键 dep_id,关联 dept 表的id主键</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_emp_dept </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;">(dep_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> dept(id)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><p>添加数据</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 添加 2 个部门</span></span>
<span class="line"><span style="color:#F286C4;">insert into</span><span style="color:#F6F6F4;"> dept(dep_name,addr) </span><span style="color:#F286C4;">values</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">研发部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">广州</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">销售部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">深圳</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加员工,dep_id 表示员工所在的部门</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp (</span><span style="color:#F286C4;">NAME</span><span style="color:#F6F6F4;">, age, dep_id) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">王五</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">赵六</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">孙七</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">22</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">周八</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">18</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 添加 2 个部门</span></span>
<span class="line"><span style="color:#D73A49;">insert into</span><span style="color:#24292E;"> dept(dep_name,addr) </span><span style="color:#D73A49;">values</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;研发部&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;广州&#39;</span><span style="color:#24292E;">),(</span><span style="color:#032F62;">&#39;销售部&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;深圳&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加员工,dep_id 表示员工所在的部门</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp (</span><span style="color:#D73A49;">NAME</span><span style="color:#24292E;">, age, dep_id) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;王五&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;赵六&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;孙七&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">22</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;周八&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">18</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span></code></pre></div><p>此时删除 <code>研发部</code> 这条数据，会发现无法删除。</p><p>删除外键</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">alter</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">drop</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">FOREIGN key</span><span style="color:#F6F6F4;"> fk_emp_dept;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FOREIGN key</span><span style="color:#24292E;"> fk_emp_dept;</span></span></code></pre></div><p>重新添加外键</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">alter</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_emp_dept </span><span style="color:#F286C4;">FOREIGN key</span><span style="color:#F6F6F4;">(dep_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> dept(id);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_emp_dept </span><span style="color:#D73A49;">FOREIGN key</span><span style="color:#24292E;">(dep_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> dept(id);</span></span></code></pre></div><h4 id="_1-9-4-拓展思维-🚀" tabindex="-1">1.9.4 拓展思维：🚀 <a class="header-anchor" href="#_1-9-4-拓展思维-🚀" aria-label="Permalink to &quot;1.9.4 拓展思维：🚀&quot;">​</a></h4><ol><li>不同软件如何查看外键视图：</li></ol><p>点击查看</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220325235302030-4c00cf92.png" alt="image-20220325235302030"></p><p>image-20220325235302030</p><p>然后将表拖拽到模型控制栏目中。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIsAAABvCAYAAADczDNrAAANcUlEQVR4nO3deWwc12HH8e/szN4Hl1ySIrmkxEsndVA2HamSHTm2EcVW4PhI7aCpi7ZA2gD9x0UKp2lcNA3QNAYC9EqQumiruKmBFEZhO7bqK050hNZlSpZMUbdIarlL8V4eS+7O7sz0D4o0KZHUiFxyeLwPwD84s/tmhvjxzZs3781I8XjcQBBMsFm9A8LSIcIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpgmwiKYJsIimCbCIpimABiAIaaazRtJAsnqncgCBSCtScTV5XA4i1PQYeCQl/5/43jNoi/9Y1m0lsufVrRZBNNEWATTlIXYiJpKoaqprJWnyDJ2hwNZsWetTOHOFiQsZxuO8nH9wayVt7qiks21dayu3pS1MoU7W7CapSA/xL59++Zc1oEDB0gnhxkZ6OX6lSbC5WtFDbNAFiQsAIFAgG3bts25nCNHjuD1eikpKiQSbadDsRNaFcbp9mRhL4WZLFhYsikUClFdVYWqqnR0RrHJMrn5RSIw88zSsGiaRio1fcPX6XQiy/KU64LBIPfecw/Hjh2jt/06uqaxqrRcnJLmkaVh6ezspL6+ftr1u3fvpri4eNr1DoeDnTt30nDqFB1dMTKZtGj0ziPLa5bh4eEZ189EkiScTiebNm7E4bhK7EanaPTOoyXZZrlVMBikfM0agCkbvYamko6dwtA+O+VJshN7yT1IssOSfV6KlkVYAPLz81EUZepGbyaFGjmGoQ6Of15y+LEX1oAIi2mWhkWWZTye0f/+VCqFzWbDbrdPWj+VVCpFPB6fcl1VZSVdnZ20Xb2AltEIV6zN/o6vUJaGpbCwkMceewyA+vp6cnNz2bTpswaq0+mc8nuHDx/mxIkTU64zDANVVdF1g8/JThGWLFo0NYssy9jt9vHfp7Nv3z4eeOCBO5Z94MABtEwmK/spjFpybZaKigpTnzty5Mg878nKs6iGKAyOpOkZzN7daSG7LA+LYUBS1UhmJC5EB/n4chdJVVuwMcGSpiLp4nRlhuWnoVRa42BjOx+0KMR6Rwj3RTCABzcX43JMfTWUTe7uM2jOHFLBdfO+raXO0rD0DKb4+HIX75+KEO1LkUwbtPUkeP9UBAmoW1tAyH/7FVFzczPNzc2TllVUVJhuzwBIuoqn8yS+rpMkQ9tEWEywLCyd8RFOX+vhwzNRWjuHSGs6MHpKau0c4sMzUQC2V4YoDLonfXdgYIC2trZJy0KhkOlty4aGN92HL3YY11AENVA5x6NZGSwJS89gitPXejjU2M6Ftts719KazoW2OIpsw0iPsDl8e1hmSzY0PMYwuVov7r4hbOizLmulsSQs5673cqixncbW3hk/19jaiz4QpedaCqf9s/ZLOp2e1XZt6HiMYfK0XgLa7AO3UllzGrqLKx2br4iSDUXsWF84vqypqYmmpqa73qxPGyJX68OnD931dwWLwlKzJpcRNQOGQeP1vmk/t3l1Lnu2FLO1ugCPxzW+fOL9IzMkDAL6AEGtD6+REKeeWbIkLCG/i+2V+QBkdIOr7QPjDVwAu2yjqjjAni3FbK/MJ+R3TVfUHdnSgzjjF/Cku/AYCWRj5jEywvQsuxoqDLqpW1sAQEbTaetJkFQ1XA6Z0pCXh7eV3Lx0vj0ogUCA0tLS25bdypYexNV3CV/sEO5MH5IIypxY2s8S8rvYs7kEw4D3GlpGO+VCXr64vZQ9m0um7ZQz06ditxl4B6/iizbj6Tg5H7u/4ljeg+u0yzy4pQS95wqxkEJZxWhQJl79zMbGYBJ/10Xc3WqW9lSwPCySBC6HjEsx2BAOsHFtwdy6+TUVPdrARkcU2TOMpInGbLZYHpaJ/G77nBqzpAbQO8+jXXqPHLUdQ5kclKTkwoaGw5hdP81Kt6jCMic3g6Jffh899glMGJxtIJGW7AzIAVxGEocmwjIblk8FGZtkpmka6XR60tSQmSaZTS5IHQ+K1vrR5HWSjKG4iBs++uQgQa2PAKL3djYWzSSzVCpFd3c3LS0t4+vvNMlsjB5tQLv03miNcgvJVwjh+4hHWknfYR6SMDPLa5aJNclY7TLx95kLUMeDYnSen3TqAZByy7Gt2Q3h+9Bv/AJDS2R1/1eapdtmmdCYNTrPY6Qmn1rGgiKX34/hygNp/gdSLXeWD6uclVsas5OCIslI/uLxoEi55dbt5zKzaKaCTLf+NjM1ZgFkO1JJLbaS7eD0Ywz3QHIIRVfBSCOLm4iztmgmmU1lqklmMzVmAcik0K/+BqP1KNhGw2YYOuWpBIZhiBuJc7Coa5ZJ7tCY/YwBmSRGJjlp6dJtnC0eS+NveIfGrLAwFiwsAwMDnDlz5q6/57Pr5GqdBLpO3NYzKyysBQmLw+mkq7uHn73yX3f93Qq/yn0Fw2zLGwHFM/qTZbrivvOHBKR4PG6kNIm+1Py96GEuD01WpNGXJNht8zdF0ZBd8xqYXKeBc7m86GG+OZxOHNM8PsMscQ1jvaXZKSdYQoRFME2ERTBNhEUwTYRFME2ERTDN2u5+LYE62M65y1BcXUwo14udFBm1h6tnR8irKiLoTZHo6eVaVKZqaxk+h4I8dIPu9hY+bZli6qukgLuMdcVpEoablJzDphI7sbMRlKrVBHJz8C78kS4L1oYl2c7Qpdf4hx/A0y88xc7aYtyJFrq6j/Mf34+w408fZUtVJ831J/j3N71886VnqMrPJ9RxgvMfvspf/+dREj0p5IAXh5xBU9MMkkve+uf41pducG6kiKirjh89m8uv/n4/gW99g227aqm29KCXrkV0I7GDxrd/Qf3+n/N+TCXRr3HohVexKxoZVSUxYuPFr+1HKXmcp557nK/+8fd45eGDvPz1o5R/9w+oK40QO97Aj5p382/PP0JF7BUix9NErT6sZcSisHRz6cM3+e2br1PfGuPSZfjZD39FeNPnqfrq9/lOsIk3ftLBpid+h6rSPtrPNvHLwy6e/LNHCBdWUlVeRoFfJVUQxG1z48vNJy80SMLvxeYOkp/nx90tY0NM+cgmi8LiwBsqpTBcRuH1S5xyllNYuY3tG0oIuvq50NRCb6KfyLXzZPqH6I20M5zw0tw0zNpaN6mekxx+5zCftjfTmGgl9vp+WoJxBlrbSPR0s/8nH1PtusGVnlIIW3OEy5FFYQkQrt2L3+PE13+Ug92rKL53H59bE6H7yH/z3Z8eBeBc5NCE77j435/ayNu5io22Nm40nqGpNUZUAb3tKkbnIP09fWQSOheb+pFL3AxoMLc7UsJE1rVZdJXEUJyW6xHo6OCtN8vI3+GkUnfg8BcQcMvYpLE74TqGrjDSb0OW8ln38CN8qW43j37yKt/+cZDf/YsneSB4htNHjvE3lx/kh9/5AoUtP2f/8SQXneKtH9liXVj6PyF2/SMOtK8jt2gXD62+CP067yZrqfnGX/G3T5UR9I4N2B5muPcKb337DVbdHEnQ1xah4e03ULf+I/l5IQK3jsOu+T2eqTbISCqMXFvII1u2LAtLe9NpWhtPE9iyE/VcHmX3f55NOS0EDx/jx2//HS994sEhj9UsGTRVJXY1yGMpIHqM5vOneU1/jj95vIaNYS+2yC0bsEe4eOAdfv36b7mkacTi6/h9XPgX+DiXE8vCkkj6sDuL2LWzkHevgKuohvD69fjtecQDo8+4bT/5Ht32fJxVddT4FbbWlVO7pog8Vxyl8h4ezClnx/p8vC4F8jcSrujl0RsnON6ymx3VPgKF5VRsTeKyOdiaU0tNWSG3Px9KMMuysHjD26k00lQH2vmNAtBHZ1xhOJVPzdbR5825Ig3YXWV4NtRSc/OZyKlYB92OMoqq89hra+BU/WUyN09ByRtxVnW8w+u/3EDvxgCrgy7yttaSJyngDpPncy6mjqUlZ0GGVU4rcYXec6/x/A/g6RcqyXz6Eb/+13c5a2iog90kbW4wZBw2Gw6vGxmg6Ms8+UfPsndLgisvf5OXj8HYi0QMLUUmOcSIHMTjkFHG7nwpXgg/w5+/+CxfqKsguMCHKYZVZt0Wdn19Lw898ZcMDXTS8M9P83+eryCnSri3OMD2P/wyJYBsc+P2enDZDSq+d5BdKcbnGA63nqDlg3/hrfA/8URdHusLxsq2gezGH/CIS+k5WDxhufwOH5yOcfREG7LDw6rtL/GVus2Uc42uTw/xPy88zxBgrNvNOlsfOV1NnOyZXIQ23Eui4wox94t0vOvgtndEhHazZ98jfPHhTeQt1HEtI9aGxZ6HO3w/T34N1pcP0tEVYCCZj+LyUXr/Xu6r9FFocxN1qGyN5zAA6OE1hG0hvCEHw4NTFfrQ9Nvzr6E45EO88Xl2rG2zrBDLpc0iBj8JpomwCKaJsAimibAIpomwCKYpMPquKH3pN9YXreXyp1UAVA26k+LSeb747AauZfCwTAXAoxiU+8WD+eaLR1kedYsSjYrx7/Ntyo7mJUiZ+IRrYelIJpPouj7lG9zmixSPx5dHHbnCRKNRVFWltrZ2wbYpLp0F00RYBNNEWATTRFgE00RYBNP+H+iQDX+jNxJOAAAAAElFTkSuQmCC" alt="image-20220325235350568"></p><p>image-20220325235350568</p><p>新建模型，然后将表拖拽到模型控制栏目中。</p><p>效果如下:</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220325235508853-02fdd5e6.png" alt="image-20220325235508853"></p><p>image-20220325235508853</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220708225443436-7446f38a.png" alt="image-20220708225443436"></p><p>image-20220708225443436</p><p>效果图：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220708225505376-fb3e20a8.png" alt="image-20220708225505376"></p><p>image-20220708225505376</p><ol start="2"><li>如果快速可视化建立外键：使用 Navicat--设计表--可以可视化建立外键</li></ol><p>点击查看图解</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220325235608720-069cdc73.png" alt="image-20220325235608720"></p><p>image-20220325235608720</p><ol start="3"><li><p>设置外键的时候（如图）</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220326104256147-1166da74.png" alt="image-20220326104256147"></p><p>image-20220326104256147</p></li></ol><p>点击查看</p><ul><li>CASCADE：父表 delete、update 的时候，子表会 delete、update 掉关联记录；</li><li>SET NULL：父表 delete、update 的时候，子表会将关联记录的外键字段所在列设为 null，所以注意在设计子表时外键不能设为 not null；</li><li>RESTRICT：如果想要删除父表的记录时，而在子表中有关联该父表的记录，则不允许删除父表中的记录；（默认）</li><li>NO ACTION：同 RESTRICT，也是首先先检查外键；</li></ul><ol start="4"><li>实际开发中注意事项</li></ol><p>点击查看</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220326115925003-63a564da.png" alt="image-20220326115925003"></p><p>image-20220326115925003</p><h3 id="_1-10-外键约束练习-✏️" tabindex="-1">1.10 外键约束练习 ✏️ <a class="header-anchor" href="#_1-10-外键约束练习-✏️" aria-label="Permalink to &quot;1.10 外键约束练习 ✏️&quot;">​</a></h3><blockquote><p>练习时长：10min</p></blockquote><h4 id="_1-10-0「外键约束」目的" tabindex="-1">1.10.0「外键约束」目的 <a class="header-anchor" href="#_1-10-0「外键约束」目的" aria-label="Permalink to &quot;1.10.0「外键约束」目的&quot;">​</a></h4><blockquote><p>熟悉外键约束</p></blockquote><h4 id="_1-10-1「外键约束」需求-效果" tabindex="-1">1.10.1「外键约束」需求&amp;效果 <a class="header-anchor" href="#_1-10-1「外键约束」需求-效果" aria-label="Permalink to &quot;1.10.1「外键约束」需求&amp;效果&quot;">​</a></h4><p>需求：使用 Navicat 可视化建立 2 张表的外键，并且使用模型进行可视化展示</p><p><img src="http://www.yangeit.cn:21010/assets/image-20220325235508853-02fdd5e6.png" alt="image-20220325235508853"></p><p>image-20220325235508853</p><h4 id="_1-10-2「外键约束」步鄹" tabindex="-1">1.10.2「外键约束」步鄹 <a class="header-anchor" href="#_1-10-2「外键约束」步鄹" aria-label="Permalink to &quot;1.10.2「外键约束」步鄹&quot;">​</a></h4><h5 id="_1️⃣-准备表" tabindex="-1">1️⃣ 准备表 <a class="header-anchor" href="#_1️⃣-准备表" aria-label="Permalink to &quot;1️⃣ 准备表&quot;">​</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 删除表</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> emp;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 部门表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">dept</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_name </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	addr </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	age </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_id </span><span style="color:#F286C4;">int</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 删除表</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> emp;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 部门表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dept</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	dep_name </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	addr </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	age </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	dep_id </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h5 id="_2️⃣-使用-navicat-添加约束-也可以使用命令" tabindex="-1">2️⃣ 使用 Navicat 添加约束，也可以使用命令 <a class="header-anchor" href="#_2️⃣-使用-navicat-添加约束-也可以使用命令" aria-label="Permalink to &quot;2️⃣ 使用 Navicat 添加约束，也可以使用命令&quot;">​</a></h5><blockquote><p>参考约束介绍中的 Navicat 设置图解</p></blockquote><h2 id="_2-数据库设计" tabindex="-1">2. 数据库设计 <a class="header-anchor" href="#_2-数据库设计" aria-label="Permalink to &quot;2\\. 数据库设计&quot;">​</a></h2><h3 id="_2-1-数据库设计简介-🍐" tabindex="-1">2.1 数据库设计简介 🍐 <a class="header-anchor" href="#_2-1-数据库设计简介-🍐" aria-label="Permalink to &quot;2.1 数据库设计简介 🍐&quot;">​</a></h3><h4 id="_2-1-1-「数据库设计」核心问题-答案" tabindex="-1">2.1.1 「数据库设计」核心问题&amp;答案 <a class="header-anchor" href="#_2-1-1-「数据库设计」核心问题-答案" aria-label="Permalink to &quot;2.1.1 「数据库设计」核心问题&amp;答案&quot;">​</a></h4><p>问题</p><ol><li>数据库设计，设计什么或者关注什么？</li></ol><p>点击查看代码</p><ul><li>软件的研发步骤</li></ul><p><img src="http://www.yangeit.cn:21010/assets/image-20210724130925801-1c455b20.png" alt="image-20210724130925801"></p><p>image-20210724130925801</p><h4 id="数据库设计概念" tabindex="-1">数据库设计概念 <a class="header-anchor" href="#数据库设计概念" aria-label="Permalink to &quot;数据库设计概念&quot;">​</a></h4><ul><li>数据库设计就是根据业务系统的具体需求，结合我们所选用的 DBMS，为这个业务系统构造出最优的数据存储模型。</li><li>👉 建立数据库中的<strong>表结构以及表与表之间的关联关系</strong>的过程。</li><li>👉</li></ul><h4 id="数据库设计的步骤" tabindex="-1">数据库设计的步骤 <a class="header-anchor" href="#数据库设计的步骤" aria-label="Permalink to &quot;数据库设计的步骤&quot;">​</a></h4><ul><li><p>需求分析（数据是什么? 数据具有哪些属性? 数据与属性的特点是什么）</p></li><li><p>逻辑分析（通过 ER 图对数据库进行逻辑建模，不需要考虑我们所选用的数据库管理系统） <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUkAAABCCAYAAADaOiTfAAALgElEQVR4nO3cbWxT1x0G8Ac3IRBC3JS2aerCXVDXrlFpIG096qjEwJgEdMmsIlZksIS2CeFNFesXlrjaKhU3U4s6pElJ1UnrZNVr1U0yDuFLqcDRlgzdUsBoDenSNb2AE8JLjUNIiEnifbDu4V7buQlJnPDy/CQL576dEyQ/+d9zzvWcRCKRABERZWSa7Q4QEd3OGJJERAYYkkREBhiSREQGGJJERAYYkkREBhiSREQGcrq7u2e7D0REty1WkkREBhiSREQGGJJERAYYkkREBhiSREQGGJJERAYYkkREBhiSREQGGJJERAYYkkREBhiSREQGGJJERAYYkkREBqYckqOjoxgdHZ2OvhAR3XZypnqB/S1/Q3FRCSqXr52O/hhSFAUHDx7UbbNYLCgpKUFBQQHKysqy3od7jSzLcDgccLlcqK+vn+3uEM24KYXkaGIU+SVfoftiN4C1SIyOYqjvHEbiA8jJX4S8goemqZtJvb298Hq9Y+6XJAl79uzBmjVrprXd2VJbWwufz5dxn8fjgdvtznofenp6AABnzpzJeltEt6Mp3W4flj/F2bndKKtYgO+il3ChdTMWL3wDS5fsx4N5f0fHF59NVz8nRFEUbNu2DbIsz2i7s8Hr9cJisSAYDGa1nZqaGkQiEfj9/qy2Q3S7mnRIDo8M47PIXwAA/xv5Fu98/Abi56+i67iCbz4/gf5Lp9Hf9920dTSV3W5HJBJBJBJBIBCAJEli3wcffJC1dmdDIBAQv6v6stvtAAC3242GhoZZ7iHR3WvCt9uJkRF87vFg8ddfIwGgeUECBduTEzbx0RtY+UoBTKEhlC41AwvvR2L+IqAjW93Ws1qt2L17t7j9bGpqQmNjo+6Y9vZ2hEIh8fNzzz0Hq9WqO0ZbgWr3RaNRdHZ2AgCKi4t1gayekzomqm2vsLAQL774ou487TXVc9Vz7Hb7uOOrfr8fiqLAZrPB6/Vi48aNuusT0fSYUCWZGBlB1/btWH/1Kp4uLsay4mL8tuARVO27gpF4MigLzLlA7rDuvDnT398xlZSUZNze3t4Op9OJdevWwev1ipfD4cCGDRvQ3t4ujt21axccDgccDgcURRHbP/roI7G9rq5Od211+4EDBwAkw2/nzp269nbv3g2bzaa7Ne7s7BTner1eBINBcY42zI1IkiSqyPfeey9tv9PphMViEa/a2tqM17HZbLrjtL+7LMtjntvQ0KA7r6GhAYqiwGKxwOl0iuOCwaDYn9qezWYb8/dL7VdqxZzalnpctocg6N4yoZDsCgax3GTC6MAAhmMxxC9eRLy7Gz+6kY8r8mUAQAIAZnEl0LFjx8T78vJyAMnA2rRpkwgds9kMu90Os9kMAAiHw9i0aROi0SgAoKqqSlzj5MmT4n1zc7N4f+LECfFerQQBYPXq1QCAuro6NDU1AUgOCXg8HlHhud3ujOOl0Wh00pMwNTU1AICWlhbddovFkha2Pp9PF15qyGhDEQC2bNkybrtOpzNtEs3r9WYM69R+adtTFEXXJ6N+eb1ew6AnygbDkEwkEvjy6x4cbWrB6MAArnV3Y7C3F0PRKOL9/RiOxzHvRAwDV27gy3/1Yuj6zKVkNBqFLMsIBoOora3VfWB37NgBAHj//fcRi8UAJIOztbUVfr8fra2tqK6uBgDEYjG8/fbbAIB169aJa3R0dIh2wuGwCLpYLCaqz6NHjwJIhq/VaoUsyyIgq6ur4ff74Xa7dcuWMo2XhsNhlJeXIxAIIBAIiPHGiUq9zVZDx+VypY1jhkIhUWmp/WpoaNAdV1paatheMBgUAdzW1ibOa2trG3M2HkiGnMfj0Y0lA0AoFNIFohrS2mMjkQgkSYLP50v7QxMKhVBaWiqOU/9wEE0Hw5Cse/cgWk4N4KvrC9HTewE3BgdxY2hIvC4NDuKL8y/g43eewqWOnyMn1zxT/UY4HIbD4YDb7dZ9MF0ul/iQaG+79u7di6KiIgBAUVERtm/fLvapVdiKFSvStqmVo1qdAsDx48dFH4Cb1dyRI0fEMcuWLYMsy5BlGZ2dneL81IpP1djYCKvVCqvVOqX1noqiIBQKZVzX+NZbbwG4Ge6q1J/Hm8n+5JNPACBtwkySJBF8mdjtdl3FbLVa4XK5ACSXdwHJ23tFUTIucdq3bx8A/V3DRPtMNFmGIbln1wYcCrWh//kNOBm7iivXNQF5/Tq+HIwj/4e/RMULP0NX36MYHkkgkbh5vu/wBZy/1Jft3wFmsxnV1dUIBAK6YNBWJ6nBo52YUY8rKioSVZwagIcOHQIAVFZWin2tra26Y1auXAkAOHXqlLimOu6pvtRj1co2tf+TnXRRFAWKoojqTw0bn8+nG8/Tjv+pax43btyYduxEZsq7urogSVLaxBeQnNgaS2VlZdq2xYsXA7i5HlP9V13ipH05HA4AwNmzZ3XXuNXKm+hWGM5u33efCR/vfQWvvfMZmhwedB38I564mhyDPF5gQcfLb2BoOIFzFwdQ+kg+jnz1AB7//hUUmkZx5nQ3cpfuxF//PQ851/6DX/30CcyfN3faOm6326dUPajjkKnWr18vbiVlWRaVX0VFBfr6+hAKhdDS0qK75Vu1alXadcrLy0XlOh5tBXur1FvmTAE0HkmSEIlEdIvWvV4vPvzwQ7S1tU26T0R3k3GXAOXNzcWbv16FHW9+itwtddjf0YXBeALzih7FM49JiF+5gfwFefjmfBynb/wGXxzoxdWBIcwp+gEKHnsUhQ/Px8DQCrz27j/QWDezY0Xl5eWigjt8+LDuSRztBIy2EqmoqBDvA4EAFEWBJEkoKytDf38/gGQ1qN5WasNwyZIl4twdO3ZkfWxMlmUxFqvemqqV3K08RlhfXy+OtdlsUBQFsixnrBRVagWbWgFrJ7wmQ12lMFNPFBGNZ0Kz2w+YF+DPv/sxemK5KHmyEouWrkT+A0thMpnQPziMnksDMJnmoOLZZcDja1Fa9TJWr63A/JGzuNZxENueujDjAQkAL730kni/d+9eUf3JsozXX39d7Nu8ebN4X1ZWJj74asCqs97a0FD3adtQbweB5COF2mozGo1O69IUm80m2tPeIkuSJCY4xloyM1YfAf0M/1i2bt0q+qAly/KUg039P1aXRaVen7PYNNMmvJj8/sIF8Gx/Bn/a/y3m5uQiNjiM7kvX8L3FZsydnwfT3FzMy8/Bktw4omeO4cG8efh9TSkKF47/ocsWt9uN5uZmhMNhMdGTSjvRo6qqqoLP50sbcwQgZojVfdoq1Gq1orq6Gk1NTYjFYhnbm0x1mek6qkAgkFbx7du3T6y/NHrWfaxrjzXeqHK73eK62tAFkoE91aBUr6G+UvtGNJNu6bHEx6WHsW1tMQoWFeAhyyLE8/JwOZ7AkuJ8XO2/htP/DGDrsj784RfP4if2p1G4cEG2+j1hfr8fr776qlgbqTKbzfB4PBlvSbVLgQD9mKN27M9sNqdNCDU2NmZsD5jeCQZ12U6mMLNarYhEImnb1TFIVX19fVrouFyuCY1Hah+NVAUCASxfvhyAfujhVtXU1GTsg91u51gpzbg5kUgkMf5heidOn0Pg+DDy8vNx+dx/YXtyIVY/X4pFRYXZ6OO0GesRwmy3B8CwMrubBINBuN1ufrUa3TUm9VVpK556DBcvt2PJIyY8UWODyXRnfMH5TAfVvRKMWuoaSu0QBdGdbFKVJN3b1C/iTb2ldzqdYvlUptt9ojvRlL+ZnO5dqZM2Kn51G91NWEnSpKhf05aKFSTdbRiSREQG7owZFyKiWcKQJCIywJAkIjLAkCQiMsCQJCIywJAkIjLAkCQiMsCQJCIywJAkIjIwJ5FI8IkbIqIxsJIkIjLAkCQiMsCQJCIywJAkIjLAkCQiMsCQJCIywJAkIjLAkCQiMsCQJCIywJAkIjLAkCQiMsCQJCIy8H/weuU6UhudWgAAAABJRU5ErkJggg==" alt="image-20220326182949545"></p></li></ul><p><strong>powerdesigner 专业用语 er 图设计，数据库表设计</strong></p><p>如下图就是 ER(Entity/Relation)图：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724131210759-dae96004.png" alt="image-20210724131210759"></p><p>image-20210724131210759</p><ul><li><p>物理设计（根据数据库自身的特点把逻辑设计转换为物理设计）</p></li><li><p>维护设计（1.对新的需求进行建表；2.表优化）</p></li><li><p>表关系</p><ul><li>一对一 - 如：用户 和 用户详情 - 一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能 <img src="http://www.yangeit.cn:21010/assets/image-20210724133015129-615d803b.png" alt="image-20210724133015129"> 上图左边是用户的详细信息，而我们真正在展示用户信息时最长用的则是上图右边红框所示，所以我们会将详细信息查分成两周那个表。</li></ul></li></ul><h3 id="_2-2-表关系-一对多-🍐" tabindex="-1">2.2 表关系(一对多) 🍐 <a class="header-anchor" href="#_2-2-表关系-一对多-🍐" aria-label="Permalink to &quot;2.2 表关系(一对多) 🍐&quot;">​</a></h3><p>一对多</p><ul><li>如：部门 和 员工</li><li>一个部门对应多个员工，一个员工对应一个部门。</li></ul><h4 id="_2-2-1-实现方式" tabindex="-1">2.2.1 实现方式 <a class="header-anchor" href="#_2-2-1-实现方式" aria-label="Permalink to &quot;2.2.1 实现方式&quot;">​</a></h4><h4 id="_2-2-2-案例" tabindex="-1">2.2.2 案例 <a class="header-anchor" href="#_2-2-2-案例" aria-label="Permalink to &quot;2.2.2 案例&quot;">​</a></h4><p>我们还是以 <code>员工表</code> 和 <code>部门表</code> 举例:</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724134145803-b267dc4c.png" alt="image-20210724134145803"></p><p>image-20210724134145803</p><p>经过分析发现，员工表属于多的一方，而部门表属于一的一方，此时我们会在员工表中添加一列（dep_id），指向于部门表的主键（id）： <img src="http://www.yangeit.cn:21010/assets/image-20210724134318685-74485cfa.png" alt="image-20210724134318685"></p><p>建表语句如下：</p><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 删除表</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> tb_emp;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> tb_dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 部门表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_dept</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_name </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	addr </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_emp</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	age </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dep_id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#7B7F8B;">-- 添加外键 dep_id,关联 dept 表的id主键</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_emp_dept </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;">(dep_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> tb_dept(id)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 删除表</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> tb_emp;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> tb_dept;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 部门表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_dept</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	dep_name </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	addr </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_emp</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	age </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	dep_id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">-- 添加外键 dep_id,关联 dept 表的id主键</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_emp_dept </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;">(dep_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> tb_dept(id)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="_2-2-3-表结构模型图" tabindex="-1">2.2.3 表结构模型图： <a class="header-anchor" href="#_2-2-3-表结构模型图" aria-label="Permalink to &quot;2.2.3 表结构模型图：&quot;">​</a></h4><p><img src="http://www.yangeit.cn:21010/assets/image-20210724140456921-d4c797b9.png" alt="image-20210724140456921"></p><p>image-20210724140456921</p><h3 id="_2-3-表关系-多对多-🍐" tabindex="-1">2.3 表关系(多对多) 🍐 <a class="header-anchor" href="#_2-3-表关系-多对多-🍐" aria-label="Permalink to &quot;2.3 表关系(多对多) 🍐&quot;">​</a></h3><p>多对多</p><ul><li>如：商品 和 订单</li><li>一个商品对应多个订单，一个订单包含多个商品</li></ul><h4 id="_2-3-1-实现方式" tabindex="-1">2.3.1 实现方式 <a class="header-anchor" href="#_2-3-1-实现方式" aria-label="Permalink to &quot;2.3.1 实现方式&quot;">​</a></h4><p><strong>注意：常见实战中，一般中间表，都含有其他字段，如商品的个数，优惠套餐</strong></p><h4 id="_2-3-2-案例" tabindex="-1">2.3.2 案例 <a class="header-anchor" href="#_2-3-2-案例" aria-label="Permalink to &quot;2.3.2 案例&quot;">​</a></h4><p>我们以 <code>订单表</code> 和 <code>商品表</code> 举例：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724134735939-81d1a61e.png" alt="image-20210724134735939"></p><p>image-20210724134735939</p><p>经过分析发现，订单表和商品表都属于多的一方，此时需要创建一个中间表，在中间表中添加订单表的外键和商品表的外键指向两张表的主键：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724135054834-1b6aaad6.png" alt="image-20210724135054834"></p><p>image-20210724135054834</p><p>建表语句如下：</p><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 删除表</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> tb_order_goods;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> tb_order;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> tb_goods;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 订单表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_order</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">  payment double(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  payment_type </span><span style="color:#F286C4;">TINYINT</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">status</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TINYINT</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 商品表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_goods</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">  title </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  price double(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 订单商品中间表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_order_goods</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">  order_id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  goods_id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  count </span><span style="color:#F286C4;">int</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 建完表后，添加外键</span></span>
<span class="line"><span style="color:#F286C4;">alter</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> tb_order_goods </span><span style="color:#F286C4;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_order_id </span><span style="color:#F286C4;">FOREIGN key</span><span style="color:#F6F6F4;">(order_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> tb_order(id);</span></span>
<span class="line"><span style="color:#F286C4;">alter</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> tb_order_goods </span><span style="color:#F286C4;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_goods_id </span><span style="color:#F286C4;">FOREIGN key</span><span style="color:#F6F6F4;">(goods_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> tb_goods(id);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 删除表</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> tb_order_goods;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> tb_order;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> tb_goods;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 订单表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_order</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">  payment double(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  payment_type </span><span style="color:#D73A49;">TINYINT</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">status</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TINYINT</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 商品表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_goods</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">  title </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  price double(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 订单商品中间表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_order_goods</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">  order_id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  goods_id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  count </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 建完表后，添加外键</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> tb_order_goods </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_order_id </span><span style="color:#D73A49;">FOREIGN key</span><span style="color:#24292E;">(order_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> tb_order(id);</span></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> tb_order_goods </span><span style="color:#D73A49;">add</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_goods_id </span><span style="color:#D73A49;">FOREIGN key</span><span style="color:#24292E;">(goods_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> tb_goods(id);</span></span></code></pre></div><h4 id="_2-3-3-表结构模型图" tabindex="-1">2.3.3 表结构模型图： <a class="header-anchor" href="#_2-3-3-表结构模型图" aria-label="Permalink to &quot;2.3.3 表结构模型图：&quot;">​</a></h4><p><img src="http://www.yangeit.cn:21010/assets/image-20210724140307910-31a9fc14.png" alt="image-20210724140307910"></p><p>image-20210724140307910</p><h3 id="_2-4-表关系-一对一-🍐" tabindex="-1">2.4 表关系(一对一) 🍐 <a class="header-anchor" href="#_2-4-表关系-一对一-🍐" aria-label="Permalink to &quot;2.4 表关系(一对一) 🍐&quot;">​</a></h3><p>一对一</p><ul><li>如：用户 和 用户详情</li><li>一对一关系多用于表拆分，将一个实体中经常使用的字段放一张表，不经常使用的字段放另一张表，用于提升查询性能</li></ul><h4 id="_2-4-1-实现方式" tabindex="-1">2.4.1 实现方式 <a class="header-anchor" href="#_2-4-1-实现方式" aria-label="Permalink to &quot;2.4.1 实现方式&quot;">​</a></h4><ul><li><p>案例</p><p>我们以 <code>用户表</code> 举例： <img src="http://www.yangeit.cn:21010/assets/image-20210724135346913-795bfb74.png" alt="image-20210724135346913"></p><p>而在真正使用过程中发现 id、photo、nickname、age、gender 字段比较常用，此时就可以将这张表查分成两张表。</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724135649341-e792b701.png" alt="image-20210724135649341"></p><p>image-20210724135649341</p></li></ul><h4 id="_2-4-2-建表语句如下" tabindex="-1">2.4.2 建表语句如下： <a class="header-anchor" href="#_2-4-2-建表语句如下" aria-label="Permalink to &quot;2.4.2 建表语句如下：&quot;">​</a></h4><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">create</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_user_desc</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	city </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	edu </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	income </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">status</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">char</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">des</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">create</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">table</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">tb_user</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">	id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">primary key</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">	photo </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	nickname </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	age </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	gender </span><span style="color:#F286C4;">char</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	desc_id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">unique</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#7B7F8B;">-- 添加外键</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> fk_user_desc </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;">(desc_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> tb_user_desc(id)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_user_desc</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	city </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	edu </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	income </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">status</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">des</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tb_user</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">	id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">primary key</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">	photo </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	nickname </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	age </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	gender </span><span style="color:#D73A49;">char</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	desc_id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">unique</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">-- 添加外键</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> fk_user_desc </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;">(desc_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> tb_user_desc(id)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="_2-4-3-查看表结构模型图" tabindex="-1">2.4.3 查看表结构模型图： <a class="header-anchor" href="#_2-4-3-查看表结构模型图" aria-label="Permalink to &quot;2.4.3 查看表结构模型图：&quot;">​</a></h4><p><img src="http://www.yangeit.cn:21010/assets/image-20210724141445785-4db6b0df.png" alt="image-20210724141445785"></p><p>image-20210724141445785</p><h3 id="_2-5-数据库设计案例-✏️" tabindex="-1">2.5 数据库设计案例 ✏️ <a class="header-anchor" href="#_2-5-数据库设计案例-✏️" aria-label="Permalink to &quot;2.5 数据库设计案例 ✏️&quot;">​</a></h3><p><a href="https://note.youdao.com/s/DjQkUymG" target="_blank" rel="noreferrer">练习详情open in new window</a> 👈</p><p>点击查看 navicat 添加外键的 图解动画</p><p><img src="http://www.yangeit.cn:21010/assets/VeryCapture_20220918115621-3dfb50fc.gif" alt="VeryCapture_20220918115621"></p><p>VeryCapture_20220918115621</p><p>点击查看 navicat 查看表和表的关系的图解动画</p><p><img src="http://www.yangeit.cn:21010/assets/VeryCapture_20220918120154-19aa0eb1.gif" alt="VeryCapture_20220918120154"></p><p>VeryCapture_20220918120154</p><h2 id="_3-多表查询-🍐-❤️-✏️" tabindex="-1">3. 多表查询 🍐 ❤️ ✏️ <a class="header-anchor" href="#_3-多表查询-🍐-❤️-✏️" aria-label="Permalink to &quot;3\\. 多表查询 🍐 ❤️ ✏️&quot;">​</a></h2><p>多表查询顾名思义就是</p><ul><li><strong>准备环境</strong></li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> emp;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> dept;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;"># 创建部门表</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">dept</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">        did </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#F6F6F4;">        dname </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F6F6F4;"># 创建员工表</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">        id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">NAME</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">        gender </span><span style="color:#F286C4;">CHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 性别</span></span>
<span class="line"><span style="color:#F6F6F4;">        salary DOUBLE, </span><span style="color:#7B7F8B;">-- 工资</span></span>
<span class="line"><span style="color:#F6F6F4;">        join_date </span><span style="color:#F286C4;">DATE</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 入职日期</span></span>
<span class="line"><span style="color:#F6F6F4;">        dep_id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;"> (dep_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> dept(did) </span><span style="color:#7B7F8B;">-- 外键，关联部门表(部门表的主键)</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#7B7F8B;">-- 添加部门数据</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> dept (dNAME) </span><span style="color:#F286C4;">VALUES</span><span style="color:#F6F6F4;"> (</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">研发部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">市场部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">财务部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">销售部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#7B7F8B;">-- 添加员工数据</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(</span><span style="color:#F286C4;">NAME</span><span style="color:#F6F6F4;">,gender,salary,join_date,dep_id) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">孙悟空</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">男</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">7200</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2013-02-24</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">猪八戒</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">男</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">3600</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2010-12-02</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">唐僧</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">男</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">9000</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2008-08-08</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">白骨精</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">女</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">5000</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2015-10-07</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">蜘蛛精</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">女</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4500</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2011-03-14</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">	(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">小白龙</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">男</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2500</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2011-02-14</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">null</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> emp;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> dept;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"># 创建部门表</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dept</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        did </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#24292E;">        dname </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#24292E;"># 创建员工表</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">        id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">NAME</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">        gender </span><span style="color:#D73A49;">CHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 性别</span></span>
<span class="line"><span style="color:#24292E;">        salary DOUBLE, </span><span style="color:#6A737D;">-- 工资</span></span>
<span class="line"><span style="color:#24292E;">        join_date </span><span style="color:#D73A49;">DATE</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 入职日期</span></span>
<span class="line"><span style="color:#24292E;">        dep_id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;"> (dep_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> dept(did) </span><span style="color:#6A737D;">-- 外键，关联部门表(部门表的主键)</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">-- 添加部门数据</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> dept (dNAME) </span><span style="color:#D73A49;">VALUES</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;研发部&#39;</span><span style="color:#24292E;">),(</span><span style="color:#032F62;">&#39;市场部&#39;</span><span style="color:#24292E;">),(</span><span style="color:#032F62;">&#39;财务部&#39;</span><span style="color:#24292E;">),(</span><span style="color:#032F62;">&#39;销售部&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">-- 添加员工数据</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(</span><span style="color:#D73A49;">NAME</span><span style="color:#24292E;">,gender,salary,join_date,dep_id) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;孙悟空&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;男&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">7200</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2013-02-24&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;猪八戒&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;男&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3600</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2010-12-02&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;唐僧&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;男&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">9000</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2008-08-08&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;白骨精&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;女&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2015-10-07&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;蜘蛛精&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;女&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4500</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2011-03-14&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">	(</span><span style="color:#032F62;">&#39;小白龙&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;男&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2500</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2011-02-14&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">null</span><span style="color:#24292E;">);</span></span></code></pre></div><p>执行下面的多表查询语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp , dept;  </span><span style="color:#7B7F8B;">-- 从emp和dept表中查询所有的字段数据</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp , dept;  </span><span style="color:#6A737D;">-- 从emp和dept表中查询所有的字段数据</span></span></code></pre></div><p>结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724173630506-e5d84c54.png" alt="image-20210724173630506"></p><p>从上面的结果我们看到有一些无效的数据，如 <code>孙悟空</code> 这个员工属于 1 号部门，但也同时关联的 2、3、4 号部门。 所以我们要通过限制员工表中的来<strong>消除这些无效的数据</strong>，</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp , dept </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp , dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>点击查看图解动画</p><p><img src="http://www.yangeit.cn:21010/assets/VeryCapture_20220918131903-93b145aa.gif" alt="VeryCapture_20220918131903"></p><p>VeryCapture_20220918131903</p><ul><li><p><strong>多表查询分类</strong></p><ul><li><p>连接查询</p><ul><li>内连接查询 ：相当于查询 AB 数据</li><li>外连接查询 <ul><li>左外连接查询 ：相当于查询 部分数据</li><li>右外连接查询 ： 相当于查询 部分数据</li></ul></li></ul></li><li><p>子查询</p></li></ul></li></ul><h3 id="_3-1-内连接查询" tabindex="-1">3.1 内连接查询 <a class="header-anchor" href="#_3-1-内连接查询" aria-label="Permalink to &quot;3.1 内连接查询&quot;">​</a></h3><h4 id="_3-1-1-语法" tabindex="-1">3.1.1 语法 <a class="header-anchor" href="#_3-1-1-语法" aria-label="Permalink to &quot;3.1.1 语法&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 隐式内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span><span style="color:#F6F6F4;"> 字段列表 </span><span style="color:#F286C4;">FROM</span><span style="color:#F6F6F4;"> 表1,表2… </span><span style="color:#F286C4;">WHERE</span><span style="color:#F6F6F4;"> 条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 显示内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span><span style="color:#F6F6F4;"> 字段列表 </span><span style="color:#F286C4;">FROM</span><span style="color:#F6F6F4;"> 表1 [INNER] </span><span style="color:#F286C4;">JOIN</span><span style="color:#F6F6F4;"> 表2 </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> 条件 </span><span style="color:#F286C4;">and</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">or</span><span style="color:#F6F6F4;">) 条件2;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 隐式内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> 字段列表 </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> 表1,表2… </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> 条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 显示内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> 字段列表 </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> 表1 [INNER] </span><span style="color:#D73A49;">JOIN</span><span style="color:#24292E;"> 表2 </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> 条件 </span><span style="color:#D73A49;">and</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">or</span><span style="color:#24292E;">) 条件2;</span></span></code></pre></div><blockquote><p>内连接相当于查询 A B 交集数据</p></blockquote><p><img src="http://www.yangeit.cn:21010/assets/image-20210724174717647-0fac0ed7.png" alt="image-20210724174717647"></p><p>image-20210724174717647</p><h4 id="_3-1-2-案例" tabindex="-1">3.1.2 案例 <a class="header-anchor" href="#_3-1-2-案例" aria-label="Permalink to &quot;3.1.2 案例&quot;">​</a></h4><p><strong>隐式内连接</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 隐式内连接</span></span>
<span class="line"><span style="color:#7B7F8B;">-- SELECT 字段列表 FROM 表1,表2… WHERE 条件;</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">FROM</span><span style="color:#F6F6F4;"> emp,dept </span><span style="color:#F286C4;">WHERE</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 隐式内连接</span></span>
<span class="line"><span style="color:#6A737D;">-- SELECT 字段列表 FROM 表1,表2… WHERE 条件;</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> emp,dept </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>执行上述语句结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724175344508-7f9c7e32.png" alt="image-20210724175344508"></p><ul><li>查询 emp 的 name， gender，dept 表的 dname</li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#F6F6F4;">  emp. </span><span style="color:#F286C4;">NAME</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">gender</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dname</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">  emp,</span></span>
<span class="line"><span style="color:#F6F6F4;">  dept</span></span>
<span class="line"><span style="color:#F286C4;">WHERE</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#24292E;">  emp. </span><span style="color:#D73A49;">NAME</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">gender</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dname</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">  emp,</span></span>
<span class="line"><span style="color:#24292E;">  dept</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>执行语句结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724175518159-6aee8985.png" alt="image-20210724175518159"></p><p><strong>显式内连接</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 显示内连接</span></span>
<span class="line"><span style="color:#7B7F8B;">--SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件 and(or) 条件2;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">inner join</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">on</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 上面语句中的inner可以省略，可以书写为如下语句</span></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp  </span><span style="color:#F286C4;">join</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">on</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 显示内连接</span></span>
<span class="line"><span style="color:#6A737D;">--SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件 and(or) 条件2;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">inner join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- 上面语句中的inner可以省略，可以书写为如下语句</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp  </span><span style="color:#D73A49;">join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>执行结果如下： <img src="http://www.yangeit.cn:21010/assets/image-20210724180103531-59f390c8.png" alt="image-20210724180103531"></p><h3 id="_3-2-外连接查询" tabindex="-1">3.2 外连接查询 <a class="header-anchor" href="#_3-2-外连接查询" aria-label="Permalink to &quot;3.2 外连接查询&quot;">​</a></h3><h4 id="_3-2-1-语法" tabindex="-1">3.2.1 语法 <a class="header-anchor" href="#_3-2-1-语法" aria-label="Permalink to &quot;3.2.1 语法&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 左外连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span><span style="color:#F6F6F4;"> 字段列表 </span><span style="color:#F286C4;">FROM</span><span style="color:#F6F6F4;"> 表1 LEFT [OUTER] </span><span style="color:#F286C4;">JOIN</span><span style="color:#F6F6F4;"> 表2 </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> 条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 右外连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span><span style="color:#F6F6F4;"> 字段列表 </span><span style="color:#F286C4;">FROM</span><span style="color:#F6F6F4;"> 表1 RIGHT [OUTER] </span><span style="color:#F286C4;">JOIN</span><span style="color:#F6F6F4;"> 表2 </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> 条件;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 左外连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> 字段列表 </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> 表1 LEFT [OUTER] </span><span style="color:#D73A49;">JOIN</span><span style="color:#24292E;"> 表2 </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> 条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 右外连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> 字段列表 </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> 表1 RIGHT [OUTER] </span><span style="color:#D73A49;">JOIN</span><span style="color:#24292E;"> 表2 </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> 条件;</span></span></code></pre></div><blockquote><p>左外连接：相当于查询 A 表所有数据和交集部分数据 右外连接：相当于查询 B 表所有数据和交集部分数据</p></blockquote><p>点击看看下图，哪个是左外，哪个是右外？</p><p><img src="http://www.yangeit.cn:21010/assets/clipboard-ae1e34f0.png" alt="image-clipboard"></p><p>image-clipboard</p><h4 id="_3-2-2-案例" tabindex="-1">3.2.2 案例 <a class="header-anchor" href="#_3-2-2-案例" aria-label="Permalink to &quot;3.2.2 案例&quot;">​</a></h4><ul><li>查询 emp 表所有数据和对应的部门信息（左外连接）</li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">left join</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">on</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">left join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>执行语句结果如下：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724180542757-eaee7700.png" alt="image-20210724180542757"></p><p>结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。</p><ul><li>查询 dept 表所有数据和对应的员工信息（右外连接）</li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">right join</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">on</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">right join</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><p>执行语句结果如下：</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724180613494-53a8fdae.png" alt="image-20210724180613494"></p><p>结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。</p><p>要查询出部门表中所有的数据，也可以通过左外连接实现，只需要将两个表的位置进行互换：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">left join</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">on</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">left join</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="_3-3-子查询" tabindex="-1">3.3 子查询 <a class="header-anchor" href="#_3-3-子查询" aria-label="Permalink to &quot;3.3 子查询&quot;">​</a></h3><h4 id="概念-3" tabindex="-1">概念 <a class="header-anchor" href="#概念-3" aria-label="Permalink to &quot;概念&quot;">​</a></h4><p><strong>查询中嵌套查询，称嵌套查询为子查询</strong>。</p><p>什么是查询中嵌套查询呢？我们通过一个例子来看：</p><p><strong>需求：查询工资高于猪八戒的员工信息。</strong></p><p>点击查看</p><p>来实现这个需求，我们就可以通过二步实现，第一步：先查询出来 猪八戒的工资</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> salary </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">猪八戒</span><span style="color:#DEE492;">&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;猪八戒&#39;</span></span></code></pre></div><p>第二步：查询工资高于猪八戒的员工信息</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> salary </span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">3600</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3600</span><span style="color:#24292E;">;</span></span></code></pre></div><p>第二步中的 3600 可以通过第一步的 sql 查询出来，所以将 3600 用第一步的 sql 语句进行替换</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> salary </span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> (</span><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> salary </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">猪八戒</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> salary </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;猪八戒&#39;</span><span style="color:#24292E;">);</span></span></code></pre></div><p>这就是查询语句中嵌套查询语句。</p><ul><li><p>子查询根据查询结果不同，作用不同 ❤️ 🍐</p><ul><li><strong>子查询语句结果是单行单列，子查询语句作为条件值，使用 = != &gt; &lt; 等进行条件判断</strong></li><li><strong>子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断</strong></li><li><strong>子查询语句结果是多行多列，子查询语句作为虚拟表</strong></li></ul></li></ul><h4 id="案例" tabindex="-1">案例 <a class="header-anchor" href="#案例" aria-label="Permalink to &quot;案例&quot;">​</a></h4><ul><li>查询 &#39;财务部&#39; 和 &#39;市场部&#39; 所有的员工信息</li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 查询 &#39;财务部&#39; 或者 &#39;市场部&#39; 所有的员工的部门did</span></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> did </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> dname </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">财务部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">or</span><span style="color:#F6F6F4;"> dname </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">市场部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> dep_id </span><span style="color:#F286C4;">in</span><span style="color:#F6F6F4;"> (</span><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> did </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> dname </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">财务部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">or</span><span style="color:#F6F6F4;"> dname </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">市场部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 查询 &#39;财务部&#39; 或者 &#39;市场部&#39; 所有的员工的部门did</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> did </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;财务部&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">or</span><span style="color:#24292E;"> dname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;市场部&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dep_id </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> did </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> dname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;财务部&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">or</span><span style="color:#24292E;"> dname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;市场部&#39;</span><span style="color:#24292E;">);</span></span></code></pre></div><ul><li>查询入职日期是 &#39;2011-11-11&#39; 之后的员工信息和部门信息</li></ul><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 查询入职日期是 &#39;2011-11-11&#39; 之后的员工信息</span></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> join_date </span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2011-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> ;</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 将上面语句的结果作为虚拟表和dept表进行内连接查询</span></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> (</span><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> join_date </span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2011-11-11</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> ) t1, dept </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t1</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dep_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">did</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 查询入职日期是 &#39;2011-11-11&#39; 之后的员工信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> join_date </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;2011-11-11&#39;</span><span style="color:#24292E;"> ;</span></span>
<span class="line"><span style="color:#6A737D;">-- 将上面语句的结果作为虚拟表和dept表进行内连接查询</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> join_date </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;2011-11-11&#39;</span><span style="color:#24292E;"> ) t1, dept </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dep_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">did</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="_3-4-案例-✏️" tabindex="-1">3.4 案例 ✏️ <a class="header-anchor" href="#_3-4-案例-✏️" aria-label="Permalink to &quot;3.4 案例 ✏️&quot;">​</a></h3><h4 id="环境准备" tabindex="-1">环境准备： <a class="header-anchor" href="#环境准备" aria-label="Permalink to &quot;环境准备：&quot;">​</a></h4><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> emp;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> dept;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> job;</span></span>
<span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> salarygrade;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 部门表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">dept</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  did </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 部门id</span></span>
<span class="line"><span style="color:#F6F6F4;">  dname </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 部门名称</span></span>
<span class="line"><span style="color:#F6F6F4;">  loc </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">) </span><span style="color:#7B7F8B;">-- 部门所在地</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 职务表，职务名称，职务描述</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">job</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  jname </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">description</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 员工表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">emp</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 员工id</span></span>
<span class="line"><span style="color:#F6F6F4;">  ename </span><span style="color:#F286C4;">VARCHAR</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 员工姓名</span></span>
<span class="line"><span style="color:#F6F6F4;">  job_id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 职务id</span></span>
<span class="line"><span style="color:#F6F6F4;">  mgr </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> , </span><span style="color:#7B7F8B;">-- 上级领导</span></span>
<span class="line"><span style="color:#F6F6F4;">  joindate </span><span style="color:#F286C4;">DATE</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 入职日期</span></span>
<span class="line"><span style="color:#F6F6F4;">  salary </span><span style="color:#F286C4;">DECIMAL</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 工资</span></span>
<span class="line"><span style="color:#F6F6F4;">  bonus </span><span style="color:#F286C4;">DECIMAL</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">7</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">-- 奖金</span></span>
<span class="line"><span style="color:#F6F6F4;">  dept_id </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;">, </span><span style="color:#7B7F8B;">-- 所在部门编号</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> emp_jobid_ref_job_id_fk </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;"> (job_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> job (id),</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">CONSTRAINT</span><span style="color:#F6F6F4;"> emp_deptid_ref_dept_id_fk </span><span style="color:#F286C4;">FOREIGN KEY</span><span style="color:#F6F6F4;"> (dept_id) </span><span style="color:#F286C4;">REFERENCES</span><span style="color:#F6F6F4;"> dept (did)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 工资等级表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">salarygrade</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">  grade </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;">,   </span><span style="color:#7B7F8B;">-- 级别</span></span>
<span class="line"><span style="color:#F6F6F4;">  losalary </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;">,  </span><span style="color:#7B7F8B;">-- 最低工资</span></span>
<span class="line"><span style="color:#F6F6F4;">  hisalary </span><span style="color:#F286C4;">INT</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">-- 最高工资</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加4个部门</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> dept(did,dname,loc) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">教研部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">北京</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">学工部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">上海</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">销售部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">广州</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">40</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">财务部</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">深圳</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加4个职务</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> job (id, jname, </span><span style="color:#F286C4;">description</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">董事长</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">管理整个公司，接单</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">经理</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">管理部门员工</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">销售员</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">向客人推销产品</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">文员</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">使用办公软件</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加员工</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1001</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">孙悟空</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1004</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2000-12-17</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">8000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1002</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">卢俊义</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-02-20</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">16000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">3000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1003</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">林冲</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-02-22</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">12500.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">5000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1004</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">唐僧</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1009</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-04-02</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">29750.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1005</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李逵</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-09-28</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">12500.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">14000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">宋江</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1009</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-05-01</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">28500.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1007</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">刘备</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1009</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-09-01</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">24500.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1008</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">猪八戒</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1004</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2007-04-19</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">30000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1009</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">罗贯中</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-11-17</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">50000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1010</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">吴用</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-09-08</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">15000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">0.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1011</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">沙僧</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1004</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2007-05-23</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">11000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1012</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李逵</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1006</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-12-03</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">9500.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1013</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">小白龙</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1004</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2001-12-03</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">30000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1014</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">关羽</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1007</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">2002-01-23</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">13000.00</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">NULL</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加5个工资等级</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> salarygrade(grade,losalary,hisalary) </span><span style="color:#F286C4;">VALUES</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">7000</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">12000</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">12010</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">14000</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">14010</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20000</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">20010</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30000</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">30010</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">99990</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> emp;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> dept;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> job;</span></span>
<span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> salarygrade;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 部门表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dept</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  did </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 部门id</span></span>
<span class="line"><span style="color:#24292E;">  dname </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 部门名称</span></span>
<span class="line"><span style="color:#24292E;">  loc </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">-- 部门所在地</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 职务表，职务名称，职务描述</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">job</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  jname </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">description</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 员工表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">emp</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 员工id</span></span>
<span class="line"><span style="color:#24292E;">  ename </span><span style="color:#D73A49;">VARCHAR</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 员工姓名</span></span>
<span class="line"><span style="color:#24292E;">  job_id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 职务id</span></span>
<span class="line"><span style="color:#24292E;">  mgr </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> , </span><span style="color:#6A737D;">-- 上级领导</span></span>
<span class="line"><span style="color:#24292E;">  joindate </span><span style="color:#D73A49;">DATE</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 入职日期</span></span>
<span class="line"><span style="color:#24292E;">  salary </span><span style="color:#D73A49;">DECIMAL</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 工资</span></span>
<span class="line"><span style="color:#24292E;">  bonus </span><span style="color:#D73A49;">DECIMAL</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">7</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">-- 奖金</span></span>
<span class="line"><span style="color:#24292E;">  dept_id </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">-- 所在部门编号</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> emp_jobid_ref_job_id_fk </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;"> (job_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> job (id),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">CONSTRAINT</span><span style="color:#24292E;"> emp_deptid_ref_dept_id_fk </span><span style="color:#D73A49;">FOREIGN KEY</span><span style="color:#24292E;"> (dept_id) </span><span style="color:#D73A49;">REFERENCES</span><span style="color:#24292E;"> dept (did)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">-- 工资等级表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">salarygrade</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  grade </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;">,   </span><span style="color:#6A737D;">-- 级别</span></span>
<span class="line"><span style="color:#24292E;">  losalary </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">-- 最低工资</span></span>
<span class="line"><span style="color:#24292E;">  hisalary </span><span style="color:#D73A49;">INT</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">-- 最高工资</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加4个部门</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> dept(did,dname,loc) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;教研部&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;北京&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;学工部&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;上海&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;销售部&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;广州&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">40</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;财务部&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;深圳&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加4个职务</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> job (id, jname, </span><span style="color:#D73A49;">description</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;董事长&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;管理整个公司，接单&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;经理&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;管理部门员工&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;销售员&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;向客人推销产品&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;文员&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;使用办公软件&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加员工</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1001</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;孙悟空&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1004</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2000-12-17&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;8000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1002</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;卢俊义&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-02-20&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;16000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;3000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1003</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;林冲&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-02-22&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;12500.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;5000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1004</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;唐僧&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1009</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-04-02&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;29750.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1005</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;李逵&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-09-28&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;12500.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;14000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;宋江&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1009</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-05-01&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;28500.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1007</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;刘备&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1009</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-09-01&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;24500.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1008</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;猪八戒&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1004</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2007-04-19&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;30000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1009</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;罗贯中&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-11-17&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;50000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1010</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;吴用&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-09-08&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;15000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;0.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1011</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;沙僧&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1004</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2007-05-23&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;11000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1012</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;李逵&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1006</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-12-03&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;9500.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1013</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;小白龙&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1004</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2001-12-03&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;30000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1014</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;关羽&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1007</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;2002-01-23&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;13000.00&#39;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">NULL</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加5个工资等级</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> salarygrade(grade,losalary,hisalary) </span><span style="color:#D73A49;">VALUES</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">7000</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">12000</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">12010</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">14000</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">14010</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20000</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">20010</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30000</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">30010</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">99990</span><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="需求" tabindex="-1">需求 <a class="header-anchor" href="#需求" aria-label="Permalink to &quot;需求&quot;">​</a></h4><ol><li>查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</li></ol><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/*</span></span>
<span class="line"><span style="color:#7B7F8B;">分析：</span></span>
<span class="line"><span style="color:#7B7F8B;">  1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"><span style="color:#7B7F8B;">*/</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 方式一 ：隐式内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">jname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">description</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">emp,</span></span>
<span class="line"><span style="color:#F6F6F4;">job</span></span>
<span class="line"><span style="color:#F286C4;">WHERE</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">job_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 方式二 ：显式内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">jname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">description</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">emp</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> job </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">job_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">分析：</span></span>
<span class="line"><span style="color:#6A737D;">  1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#6A737D;">  2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#6A737D;">  3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#6A737D;">-- 方式一 ：隐式内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">jname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">description</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">emp,</span></span>
<span class="line"><span style="color:#24292E;">job</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">job_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 方式二 ：显式内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">jname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">description</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">emp</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> job </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">job_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">;</span></span></code></pre></div><ol start="2"><li>查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</li></ol><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/*</span></span>
<span class="line"><span style="color:#7B7F8B;">	分析：</span></span>
<span class="line"><span style="color:#7B7F8B;">		1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#7B7F8B;">		2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#7B7F8B;">		3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">		4. 部门名称，部门位置 来自于 部门表 dept</span></span>
<span class="line"><span style="color:#7B7F8B;">		5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span>
<span class="line"><span style="color:#7B7F8B;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 方式一 ：隐式内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">jname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">description</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">loc</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">	emp,</span></span>
<span class="line"><span style="color:#F6F6F4;">	job,</span></span>
<span class="line"><span style="color:#F6F6F4;">	dept</span></span>
<span class="line"><span style="color:#F286C4;">WHERE</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">job_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">and</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dept_id</span></span>
<span class="line"><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 方式二 ：显式内连接</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">jname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">description</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">loc</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">	emp</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> job </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">job_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dept_id</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">	分析：</span></span>
<span class="line"><span style="color:#6A737D;">		1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#6A737D;">		2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#6A737D;">		3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">		4. 部门名称，部门位置 来自于 部门表 dept</span></span>
<span class="line"><span style="color:#6A737D;">		5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 方式一 ：隐式内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">jname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">description</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">loc</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">	emp,</span></span>
<span class="line"><span style="color:#24292E;">	job,</span></span>
<span class="line"><span style="color:#24292E;">	dept</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">job_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span></span>
<span class="line"><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 方式二 ：显式内连接</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">jname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">description</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">loc</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">	emp</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> job </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">job_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span></span></code></pre></div><ol start="3"><li>查询员工姓名，工资，工资等级</li></ol><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 查询员工姓名，工资，工资等级</span></span>
<span class="line"><span style="color:#7B7F8B;">/*</span></span>
<span class="line"><span style="color:#7B7F8B;">分析：</span></span>
<span class="line"><span style="color:#7B7F8B;">  1. 员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  2. 工资等级 信息在 salarygrade 工资等级表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  3. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span>
<span class="line"><span style="color:#7B7F8B;">*/</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">t2.</span><span style="color:#F286C4;">*</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">emp,</span></span>
<span class="line"><span style="color:#F6F6F4;">salarygrade t2</span></span>
<span class="line"><span style="color:#F286C4;">WHERE</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">&gt;=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t2</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">losalary</span></span>
<span class="line"><span style="color:#F286C4;">AND</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">&lt;=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t2</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">hisalary</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 查询员工姓名，工资，工资等级</span></span>
<span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">分析：</span></span>
<span class="line"><span style="color:#6A737D;">  1. 员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#6A737D;">  2. 工资等级 信息在 salarygrade 工资等级表中</span></span>
<span class="line"><span style="color:#6A737D;">  3. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">t2.</span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">emp,</span></span>
<span class="line"><span style="color:#24292E;">salarygrade t2</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">losalary</span></span>
<span class="line"><span style="color:#D73A49;">AND</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">hisalary</span></span></code></pre></div><ol start="4"><li>查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</li></ol><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/*</span></span>
<span class="line"><span style="color:#7B7F8B;">分析：</span></span>
<span class="line"><span style="color:#7B7F8B;">  1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">  4. 部门名称，部门位置 来自于 部门表 dept</span></span>
<span class="line"><span style="color:#7B7F8B;">  5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span>
<span class="line"><span style="color:#7B7F8B;">  6. 工资等级 信息在 salarygrade 工资等级表中</span></span>
<span class="line"><span style="color:#7B7F8B;">  7. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span>
<span class="line"><span style="color:#7B7F8B;">*/</span></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">ename</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">jname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">description</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">loc</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">t2</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">grade</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">emp</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> job </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">job_id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">job</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> dept </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dept_id</span></span>
<span class="line"><span style="color:#F286C4;">INNER JOIN</span><span style="color:#F6F6F4;"> salarygrade t2 </span><span style="color:#F286C4;">ON</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">emp</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">salary</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">BETWEEN</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t2</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">losalary</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">and</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t2</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">hisalary</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">分析：</span></span>
<span class="line"><span style="color:#6A737D;">  1. 员工编号，员工姓名，工资 信息在emp 员工表中</span></span>
<span class="line"><span style="color:#6A737D;">  2. 职务名称，职务描述 信息在 job 职务表中</span></span>
<span class="line"><span style="color:#6A737D;">  3. job 职务表 和 emp 员工表 是 一对多的关系 emp.job_id = job.id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  4. 部门名称，部门位置 来自于 部门表 dept</span></span>
<span class="line"><span style="color:#6A737D;">  5. dept 和 emp 一对多关系 dept.id = emp.dept_id</span></span>
<span class="line"><span style="color:#6A737D;">  6. 工资等级 信息在 salarygrade 工资等级表中</span></span>
<span class="line"><span style="color:#6A737D;">  7. emp.salary &gt;= salarygrade.losalary  and emp.salary &lt;= salarygrade.hisalary</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ename</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">jname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">description</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">loc</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">grade</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">emp</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> job </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">job_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">job</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> dept </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span></span>
<span class="line"><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> salarygrade t2 </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">emp</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">salary</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">BETWEEN</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">losalary</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">hisalary</span><span style="color:#24292E;">;</span></span></code></pre></div><ol start="5"><li>查询出部门编号、部门名称、部门位置、部门人数</li></ol><p>点击查看 sql 语句</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/*</span></span>
<span class="line"><span style="color:#7B7F8B;">分析：</span></span>
<span class="line"><span style="color:#7B7F8B;">  1. 部门编号、部门名称、部门位置 来自于部门 dept 表</span></span>
<span class="line"><span style="color:#7B7F8B;">  2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量</span></span>
<span class="line"><span style="color:#7B7F8B;">  3. 使用子查询，让部门表和分组后的表进行内连接</span></span>
<span class="line"><span style="color:#7B7F8B;">*/</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 根据部门id分组查询每一个部门id和员工数</span></span>
<span class="line"><span style="color:#F286C4;">select</span><span style="color:#F6F6F4;"> dept_id, </span><span style="color:#97E1F1;">count</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> emp </span><span style="color:#F286C4;">group by</span><span style="color:#F6F6F4;"> dept_id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dname</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">loc</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#BF9EEE;">t1</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">count</span></span>
<span class="line"><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">dept,</span></span>
<span class="line"><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">SELECT</span></span>
<span class="line"><span style="color:#F6F6F4;">    dept_id,</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;">count</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;">) count</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">FROM</span></span>
<span class="line"><span style="color:#F6F6F4;">    emp</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">GROUP BY</span></span>
<span class="line"><span style="color:#F6F6F4;">    dept_id</span></span>
<span class="line"><span style="color:#F6F6F4;">) t1</span></span>
<span class="line"><span style="color:#F286C4;">WHERE</span></span>
<span class="line"><span style="color:#BF9EEE;">dept</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">id</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">t1</span><span style="color:#F6F6F4;">.</span><span style="color:#BF9EEE;">dept_id</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">分析：</span></span>
<span class="line"><span style="color:#6A737D;">  1. 部门编号、部门名称、部门位置 来自于部门 dept 表</span></span>
<span class="line"><span style="color:#6A737D;">  2. 部门人数: 在emp表中 按照dept_id 进行分组，然后count(*)统计数量</span></span>
<span class="line"><span style="color:#6A737D;">  3. 使用子查询，让部门表和分组后的表进行内连接</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#6A737D;">-- 根据部门id分组查询每一个部门id和员工数</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> dept_id, </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> emp </span><span style="color:#D73A49;">group by</span><span style="color:#24292E;"> dept_id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dname</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">loc</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">count</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">dept,</span></span>
<span class="line"><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">SELECT</span></span>
<span class="line"><span style="color:#24292E;">    dept_id,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">) count</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">FROM</span></span>
<span class="line"><span style="color:#24292E;">    emp</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">GROUP BY</span></span>
<span class="line"><span style="color:#24292E;">    dept_id</span></span>
<span class="line"><span style="color:#24292E;">) t1</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span></span>
<span class="line"><span style="color:#005CC5;">dept</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">t1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dept_id</span></span></code></pre></div><h2 id="_4-事务-🍐" tabindex="-1">4. 事务 🍐 <a class="header-anchor" href="#_4-事务-🍐" aria-label="Permalink to &quot;4\\. 事务 🍐&quot;">​</a></h2><h3 id="_4-1-概述" tabindex="-1">4.1 概述 <a class="header-anchor" href="#_4-1-概述" aria-label="Permalink to &quot;4.1 概述&quot;">​</a></h3><blockquote><p>数据库的事务（Transaction）是一种机制、一个操作序列，包含了</p><p>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令。</p></blockquote><p>这些概念不好理解，接下来举例说明，如下图有一张表</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724224955876-de58abe9.png" alt="image-20210724224955876"></p><p>张三和李四账户中各有 100 块钱，现李四需要转换 500 块钱给张三，具体的转账操作为</p><ul><li>第一步：查询李四账户余额</li><li>第二步：从李四账户金额 -500</li><li>第三步：给张三账户金额 +500</li></ul><p>现在假设在转账过程中第二步完成后出现了异常第三步没有执行，就会造成李四账户金额少了 500，而张三金额并没有多 500；这样的系统是有问题的。如果解决呢？使用事务可以解决上述问题</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724225537533-30fcc010.png" alt="image-20210724225537533"></p><p>从上图可以看到在转账前开启事务，如果出现了异常回滚事务，三步正常执行就提交事务，这样就可以完美解决问题。</p><h3 id="_4-2-语法" tabindex="-1">4.2 语法 <a class="header-anchor" href="#_4-2-语法" aria-label="Permalink to &quot;4.2 语法&quot;">​</a></h3><ul><li>开启事务</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">START TRANSACTION</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">或者</span></span>
<span class="line"><span style="color:#F286C4;">BEGIN</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">START TRANSACTION</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">或者</span></span>
<span class="line"><span style="color:#D73A49;">BEGIN</span><span style="color:#24292E;">;</span></span></code></pre></div><ul><li><p>提交事务</p></li><li><p>回滚事务（excepiton）</p></li></ul><h3 id="_4-3-代码验证" tabindex="-1">4.3 代码验证 <a class="header-anchor" href="#_4-3-代码验证" aria-label="Permalink to &quot;4.3 代码验证&quot;">​</a></h3><h4 id="环境准备-1" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备-1" aria-label="Permalink to &quot;环境准备&quot;">​</a></h4><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">DROP</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">IF</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">EXISTS</span><span style="color:#F6F6F4;"> account;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 创建账户表</span></span>
<span class="line"><span style="color:#F286C4;">CREATE</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">TABLE</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">account</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  id </span><span style="color:#F286C4;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">PRIMARY KEY</span><span style="color:#F6F6F4;"> auto_increment,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">varchar</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> double(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 添加数据</span></span>
<span class="line"><span style="color:#F286C4;">INSERT INTO</span><span style="color:#F6F6F4;"> account(</span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;">,</span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">values</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1000</span><span style="color:#F6F6F4;">),(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">1000</span><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> account;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 创建账户表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">account</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">PRIMARY KEY</span><span style="color:#24292E;"> auto_increment,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> double(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 添加数据</span></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> account(</span><span style="color:#D73A49;">name</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">money</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">values</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">),(</span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="不加事务演示问题" tabindex="-1">不加事务演示问题 <a class="header-anchor" href="#不加事务演示问题" aria-label="Permalink to &quot;不加事务演示问题&quot;">​</a></h4><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 转账操作</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 1. 查询李四账户金额是否大于500</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 2. 李四账户 -500</span></span>
<span class="line"><span style="color:#F286C4;">UPDATE</span><span style="color:#F6F6F4;"> account </span><span style="color:#F286C4;">set</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">500</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">出现异常了...  </span><span style="color:#7B7F8B;">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 3. 张三账户 +500</span></span>
<span class="line"><span style="color:#F286C4;">UPDATE</span><span style="color:#F6F6F4;"> account </span><span style="color:#F286C4;">set</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">500</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 转账操作</span></span>
<span class="line"><span style="color:#6A737D;">-- 1. 查询李四账户金额是否大于500</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 2. 李四账户 -500</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> account </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">出现异常了...  </span><span style="color:#6A737D;">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span>
<span class="line"><span style="color:#6A737D;">-- 3. 张三账户 +500</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> account </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>整体执行结果肯定会出问题，我们查询账户表中数据，发现李四账户少了 500。</p><p><img src="http://www.yangeit.cn:21010/assets/image-20210724230250263-00ff5955.png" alt="image-20210724230250263"></p><h4 id="添加事务-sql-如下" tabindex="-1">添加事务 sql 如下： <a class="header-anchor" href="#添加事务-sql-如下" aria-label="Permalink to &quot;添加事务 sql 如下：&quot;">​</a></h4><p>点击查看代码</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">-- 开启事务</span></span>
<span class="line"><span style="color:#F286C4;">BEGIN</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 转账操作</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 1. 查询李四账户金额是否大于500</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 2. 李四账户 -500</span></span>
<span class="line"><span style="color:#F286C4;">UPDATE</span><span style="color:#F6F6F4;"> account </span><span style="color:#F286C4;">set</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">500</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">李四</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">出现异常了...  </span><span style="color:#7B7F8B;">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span>
<span class="line"><span style="color:#7B7F8B;">-- 3. 张三账户 +500</span></span>
<span class="line"><span style="color:#F286C4;">UPDATE</span><span style="color:#F6F6F4;"> account </span><span style="color:#F286C4;">set</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">money</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">500</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">where</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">张三</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 提交事务</span></span>
<span class="line"><span style="color:#F286C4;">COMMIT</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">-- 回滚事务</span></span>
<span class="line"><span style="color:#F286C4;">ROLLBACK</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 开启事务</span></span>
<span class="line"><span style="color:#D73A49;">BEGIN</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- 转账操作</span></span>
<span class="line"><span style="color:#6A737D;">-- 1. 查询李四账户金额是否大于500</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 2. 李四账户 -500</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> account </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;李四&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">出现异常了...  </span><span style="color:#6A737D;">-- 此处不是注释，在整体执行时会出问题，后面的sql则不执行</span></span>
<span class="line"><span style="color:#6A737D;">-- 3. 张三账户 +500</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> account </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">money</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">500</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;张三&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 提交事务</span></span>
<span class="line"><span style="color:#D73A49;">COMMIT</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 回滚事务</span></span>
<span class="line"><span style="color:#D73A49;">ROLLBACK</span><span style="color:#24292E;">;</span></span></code></pre></div><p>上面 sql 中的执行成功进选择执行提交事务，而出现问题则执行回滚事务的语句。以后我们肯定不可能这样操作，而是在 java 中进行操作，在 java 中可以抓取异常，没出现异常提交事务，出现异常回滚事务。</p><h3 id="_4-4-事务的四大特征-acid-🍐-❤️" tabindex="-1">4.4 事务的四大特征(ACID) 🍐 ❤️ <a class="header-anchor" href="#_4-4-事务的四大特征-acid-🍐-❤️" aria-label="Permalink to &quot;4.4 事务的四大特征(ACID) 🍐 ❤️&quot;">​</a></h3><ul><li><p>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</p></li><li><p>一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态</p></li><li><p>隔离性（Isolation） :多个事务之间，操作的可见性</p></li><li><p>持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</p></li></ul><blockquote><p>说明：</p></blockquote><p>mysql 中事务是自动提交的。 也就是说我们不添加事务执行 sql 语句，语句执行完毕会自动的提交事务。 可以通过下面语句查询默认提交方式：</p><p>查询到的结果是 1 则表示自动提交，结果是 0 表示手动提交。当然也可以通过下面语句修改提交方式</p>`,388),e=[o];function c(t,r,y,F,E,i){return a(),n("div",null,e)}const A=s(l,[["render",c]]);export{C as __pageData,A as default};
