import{_ as s,o as a,c as o,V as p}from"./chunks/framework.c6d8cbec.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"operations/git/gogs.md","filePath":"operations/git/gogs.md"}'),n={name:"operations/git/gogs.md"},l=p(`<h2 id="安装docker" tabindex="-1">安装docker <a class="header-anchor" href="#安装docker" aria-label="Permalink to &quot;安装docker&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;"># 通过yum源安装docker</span></span>
<span class="line"><span style="color:#f6f6f4;">yum -y install docker</span></span>
<span class="line"><span style="color:#f6f6f4;"># 启动docker</span></span>
<span class="line"><span style="color:#f6f6f4;">systemctl start docker</span></span>
<span class="line"><span style="color:#f6f6f4;"># 开机自启</span></span>
<span class="line"><span style="color:#f6f6f4;">sudo systemctl enable docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># 通过yum源安装docker</span></span>
<span class="line"><span style="color:#24292e;">yum -y install docker</span></span>
<span class="line"><span style="color:#24292e;"># 启动docker</span></span>
<span class="line"><span style="color:#24292e;">systemctl start docker</span></span>
<span class="line"><span style="color:#24292e;"># 开机自启</span></span>
<span class="line"><span style="color:#24292e;">sudo systemctl enable docker</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127222906295-2131236414.png" alt="img"></p><h2 id="下载gogs的docker镜像" tabindex="-1">下载gogs的docker镜像 <a class="header-anchor" href="#下载gogs的docker镜像" aria-label="Permalink to &quot;下载gogs的docker镜像&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">docker pull gogs/gogs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker pull gogs/gogs</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223001053-1559574737.png" alt="img"></p><h2 id="创建gogs存储的目录" tabindex="-1">创建gogs存储的目录 <a class="header-anchor" href="#创建gogs存储的目录" aria-label="Permalink to &quot;创建gogs存储的目录&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">mkdir -p /var/gogs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">mkdir -p /var/gogs</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223034819-966959378.png" alt="img"></p><h2 id="后台运行镜像-产生容器" tabindex="-1">后台运行镜像, 产生容器 <a class="header-anchor" href="#后台运行镜像-产生容器" aria-label="Permalink to &quot;后台运行镜像, 产生容器&quot;">​</a></h2><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">docker run </span><span style="color:#F286C4;">--</span><span style="color:#F6F6F4;">name</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;">gogs </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;">d  </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;">p </span><span style="color:#BF9EEE;">10022</span><span style="color:#F6F6F4;">:</span><span style="color:#BF9EEE;">22</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;">p </span><span style="color:#BF9EEE;">10080</span><span style="color:#F6F6F4;">:</span><span style="color:#BF9EEE;">3000</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;">v </span><span style="color:#F286C4;">/var</span><span style="color:#F6F6F4;">/gogs</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;">/</span><span style="color:#97E1F1;font-style:italic;">data</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">gogs</span><span style="color:#F6F6F4;">/</span><span style="color:#97E1F1;font-style:italic;">gogs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">如果docker启动失败  </span></span>
<span class="line"><span style="color:#F6F6F4;">sudo yum update</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">gogs </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">10022</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">22</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">10080</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">3000</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/var</span><span style="color:#24292E;">/gogs</span><span style="color:#D73A49;">:</span><span style="color:#24292E;">/</span><span style="color:#6F42C1;">data</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">gogs</span><span style="color:#24292E;">/</span><span style="color:#6F42C1;">gogs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">如果docker启动失败  </span></span>
<span class="line"><span style="color:#24292E;">sudo yum update</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223205667-1871859183.png" alt="img"></p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223221044-1282561133.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223232855-291745432.png" alt="img"></p><h2 id="在新搭建的站点上-创建新仓库" tabindex="-1">在新搭建的站点上, 创建新仓库 <a class="header-anchor" href="#在新搭建的站点上-创建新仓库" aria-label="Permalink to &quot;在新搭建的站点上, 创建新仓库&quot;">​</a></h2><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223259501-1717823093.png" alt="img"></p><h2 id="配置仓库信息" tabindex="-1">配置仓库信息 <a class="header-anchor" href="#配置仓库信息" aria-label="Permalink to &quot;配置仓库信息&quot;">​</a></h2><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223325060-15908036.png" alt="img"></p><p>如果配置过程中,你的gogs的docker环境挂掉了,可以使用<code>docker start gogs</code> 重新开启gogs</p><h4 id="通过http方式获取仓库-简单易行" tabindex="-1">通过http方式获取仓库(简单易行) <a class="header-anchor" href="#通过http方式获取仓库-简单易行" aria-label="Permalink to &quot;通过http方式获取仓库(简单易行)&quot;">​</a></h4><ul><li>复制http连接需要的相关参数</li></ul><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223349014-1812804873.png" alt="img"></p><p>在命令行通过http方式获取新创建的仓库<code>zhaoolee-test-gogs</code>, 并完成一次push操作</p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223403604-294952979.png" alt="img"></p><p>验证提交成功</p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223414733-30797364.png" alt="img"></p><h4 id="测试用ssh方式链接仓库-有点麻烦-需要添加秘钥-可以跳过" tabindex="-1">测试用ssh方式链接仓库(有点麻烦, 需要添加秘钥, 可以跳过) <a class="header-anchor" href="#测试用ssh方式链接仓库-有点麻烦-需要添加秘钥-可以跳过" aria-label="Permalink to &quot;测试用ssh方式链接仓库(有点麻烦, 需要添加秘钥, 可以跳过)&quot;">​</a></h4><ul><li>用户设置-&gt;账户设置-&gt;ssh秘钥</li></ul><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223425585-648143403.png" alt="img"></p><p>通过rsa算法产生一对秘钥</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">ssh-keygen -t rsa -C &quot;zhaoolee@gmail.com&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">ssh-keygen -t rsa -C &quot;zhaoolee@gmail.com&quot;</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223456772-1629152819.png" alt="img"></p><p>将新的秘钥对添加到ssh</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">ssh-add ~/.ssh/zhaoolee_gmail</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">ssh-add ~/.ssh/zhaoolee_gmail</span></span></code></pre></div><p>在<code>~/.ssh/</code>下新建config, 并在config内指明秘钥<code>zhaoolee-gmail</code>对应的<code>域名</code>或<code>ip地址</code></p><p>[<img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码">](javascript:void(0)😉</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;"># gitlab</span></span>
<span class="line"><span style="color:#f6f6f4;">Host 111.230.254.173</span></span>
<span class="line"><span style="color:#f6f6f4;">    PreferredAuthentications publickey</span></span>
<span class="line"><span style="color:#f6f6f4;">    IdentityFile ~/.ssh/zhaoolee_gmail.pub</span></span>
<span class="line"><span style="color:#f6f6f4;"># github</span></span>
<span class="line"><span style="color:#f6f6f4;">Host github.com</span></span>
<span class="line"><span style="color:#f6f6f4;">    HostName github.com</span></span>
<span class="line"><span style="color:#f6f6f4;">    PreferredAuthentications publickey</span></span>
<span class="line"><span style="color:#f6f6f4;">    IdentityFile ~/.ssh/id_rsa.pub</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># gitlab</span></span>
<span class="line"><span style="color:#24292e;">Host 111.230.254.173</span></span>
<span class="line"><span style="color:#24292e;">    PreferredAuthentications publickey</span></span>
<span class="line"><span style="color:#24292e;">    IdentityFile ~/.ssh/zhaoolee_gmail.pub</span></span>
<span class="line"><span style="color:#24292e;"># github</span></span>
<span class="line"><span style="color:#24292e;">Host github.com</span></span>
<span class="line"><span style="color:#24292e;">    HostName github.com</span></span>
<span class="line"><span style="color:#24292e;">    PreferredAuthentications publickey</span></span>
<span class="line"><span style="color:#24292e;">    IdentityFile ~/.ssh/id_rsa.pub</span></span></code></pre></div><p>[<img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码">](javascript:void(0)😉</p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223539835-347394397.png" alt="img"></p><h4 id="将公钥zhaoolee-gmail-pub添加到仓库" tabindex="-1">将公钥<code>zhaoolee_gmail.pub</code>添加到仓库 <a class="header-anchor" href="#将公钥zhaoolee-gmail-pub添加到仓库" aria-label="Permalink to &quot;将公钥\`zhaoolee_gmail.pub\`添加到仓库&quot;">​</a></h4><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223554414-1057379575.png" alt="img"></p><h2 id="复制ssh连接仓库需要的参数" tabindex="-1">复制ssh连接仓库需要的参数 <a class="header-anchor" href="#复制ssh连接仓库需要的参数" aria-label="Permalink to &quot;复制ssh连接仓库需要的参数&quot;">​</a></h2><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223604350-378755656.png" alt="img"></p><p>通过ssh方式克隆仓库</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">git clone ssh://git@111.230.254.173:10022/zhaoolee/zhaoolee-test-gogs.git</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">git clone ssh://git@111.230.254.173:10022/zhaoolee/zhaoolee-test-gogs.git</span></span></code></pre></div><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223642649-672685502.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223649516-310951702.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223655423-1516276357.png" alt="img"></p><p>至此git服务搭建完成, 你可以邀请你的小伙伴, 来你的网站注册一个账户, 然后, 你们就可以协同开发一些好玩的项目了~</p><p>让队友注册一个新账户为<code>zhaozhao</code></p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223713224-353735294.png" alt="img"></p><p>管理员<code>zhaoolee</code>主动搜索添加新队友<code>zhaozhao</code></p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223725070-1962710261.png" alt="img"></p><p>管理员可以进行权限设置</p><p><img src="https://img2018.cnblogs.com/i-beta/1453035/201911/1453035-20191127223737110-1417361547.png" alt="img"></p>`,56),e=[l];function t(c,i,r,g,d,h){return a(),o("div",null,e)}const b=s(n,[["render",t]]);export{y as __pageData,b as default};
