import{_ as n,o as a,c as l,V as p}from"./chunks/framework.c6d8cbec.js";const o="/docs/assets/1668051403591.d61363ee.png",e="/docs/assets/1668052028054.b1051976.png",t="/docs/assets/1668052307537.73c3af5e.png",c="/docs/assets/1668052414444.06180a24.png",r="/docs/assets/image-2023-03-24-20-57-15.e80b1e36.png",y="/docs/assets/1668059112092.178fe3de.png",F="/docs/assets/1668059997020.677c4d8e.png",s="/docs/assets/image-2023-03-24-21-09-52.3ed01968.png",i="/docs/assets/image-2023-03-24-21-10-41.477f6c2c.png",E="/docs/assets/image-2023-03-21-16-44-06.db9a7790.png",u="/docs/assets/image-2023-03-21-17-04-54.a17b7c1a.png",d="/docs/assets/1668066279649.36c8e9b0.png",C="/docs/assets/image-2023-03-21-16-59-14.4a347f82.png",h="/docs/assets/1668066844202.aae4f290.png",g="/docs/assets/1668067745116.df0966ab.png",D="/docs/assets/1668067798673.d4ec2c16.png",A="/docs/assets/1668067964048.e5f0e4b8.png",m="/docs/assets/1668068110593.f0fa60a9.png",b="/docs/assets/1668068399363.0c45ffa8.png",f="/docs/assets/1668069176927.7592aa4f.png",B="/docs/assets/1668069524799.2dc05fbd.png",v="/docs/assets/1668069740969.4dc2997a.png",k="/docs/assets/1668069923403.42069a7e.png",q="/docs/assets/1668070204768.7e3a76ca.png",R=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"backend/javase/12-å¤šçº¿ç¨‹.md","filePath":"backend/javase/12-å¤šçº¿ç¨‹.md"}'),T={name:"backend/javase/12-å¤šçº¿ç¨‹.md"},S=p('<h2 id="å¤šçº¿ç¨‹" tabindex="-1">å¤šçº¿ç¨‹ <a class="header-anchor" href="#å¤šçº¿ç¨‹" aria-label="Permalink to &quot;å¤šçº¿ç¨‹&quot;">â€‹</a></h2><ul><li>å¤šçº¿ç¨‹ <ul><li>çº¿ç¨‹å¸¸ç”¨æ–¹æ³• ğŸ</li><li>çº¿ç¨‹å®‰å…¨é—®é¢˜ ğŸ ç†è§£ <ul><li>å®‰å…¨è§£å†³æ–¹æ¡ˆ âœï¸ ğŸ</li></ul></li><li>çº¿ç¨‹é€šè®¯</li></ul></li><li>çº¿ç¨‹é€šä¿¡æ¡ˆä¾‹ ğŸš€ äº†è§£åŸç†</li><li>çº¿ç¨‹æ±  <ul><li>çº¿ç¨‹æ± åˆ›å»ºå‚æ•° ğŸ â¤ï¸</li><li>æ·»åŠ ä»»åŠ¡ç»™çº¿ç¨‹æ±  ğŸ â¤ï¸</li><li>çº¿ç¨‹æ± å·¥å…·ç±» ğŸš€</li><li>å¹¶è¡Œå’Œå¹¶å‘ ğŸš€</li><li>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ ğŸš€</li></ul></li></ul><p>å‰ç½®çŸ¥è¯†</p><ol><li>èƒ½ä½¿ç”¨Runnableçš„æ–¹å¼åˆ›å»ºä»»åŠ¡ï¼Œæ·»åŠ åˆ°Threadä¸­è¿è¡Œ</li><li>æœ‰è¿‡<code>ä¸Šå•æ‰€é”é—¨</code>çš„ç»å†</li><li>ç†è§£å¤šçº¿ç¨‹å’Œå•çº¿ç¨‹çš„åŒºåˆ«</li></ol><h2 id="ä¸€ã€å¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•-ğŸš©" tabindex="-1">ä¸€ã€å¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³• ğŸš© <a class="header-anchor" href="#ä¸€ã€å¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•-ğŸš©" aria-label="Permalink to &quot;ä¸€ã€å¤šçº¿ç¨‹å¸¸ç”¨æ–¹æ³• ğŸš©&quot;">â€‹</a></h2><img src="'+o+`"><p>ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹<code>getName()</code>ã€<code>setName(String name)</code>ã€<code>currentThread()</code>ã€<code>sleep(long time)</code>è¿™äº›æ–¹æ³•çš„ä½¿ç”¨æ•ˆæœã€‚</p><p>ç‚¹å‡»æŸ¥çœ‹æ¼”ç¤ºä»£ç </p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">MyThread</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">name</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">super</span><span style="color:#F6F6F4;">(name); </span><span style="color:#7B7F8B;">//1.æ‰§è¡Œçˆ¶ç±»Thread(String name)æ„é€ å™¨ï¼Œä¸ºå½“å‰çº¿ç¨‹è®¾ç½®åå­—äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">//2.currentThread() å“ªä¸ªçº¿ç¨‹æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šå¾—åˆ°å“ªä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">for</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> i </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">; i </span><span style="color:#F286C4;">&lt;=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">; i</span><span style="color:#F286C4;">++</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">//3.getName() è·å–çº¿ç¨‹åç§°</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(t.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">è¾“å‡ºï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> i);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Thread</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">name</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">(name); </span><span style="color:#6A737D;">//1.æ‰§è¡Œçˆ¶ç±»Thread(String name)æ„é€ å™¨ï¼Œä¸ºå½“å‰çº¿ç¨‹è®¾ç½®åå­—äº†</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//2.currentThread() å“ªä¸ªçº¿ç¨‹æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šå¾—åˆ°å“ªä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Thread t </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//3.getName() è·å–çº¿ç¨‹åç§°</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(t.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;è¾“å‡ºï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>å†æµ‹è¯•ç±»ä¸­ï¼Œåˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ThreadTest1</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        t1.</span><span style="color:#62E884;">setName</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name) </span><span style="color:#7B7F8B;">//è®¾ç½®çº¿ç¨‹åç§°;</span></span>
<span class="line"><span style="color:#F6F6F4;">        t1.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(t1.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">());  </span><span style="color:#7B7F8B;">//Thread-0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t2 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">2å·çº¿ç¨‹</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// t2.setName(&quot;2å·çº¿ç¨‹&quot;);</span></span>
<span class="line"><span style="color:#F6F6F4;">        t2.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(t2.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">()); </span><span style="color:#7B7F8B;">// Thread-1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// ä¸»çº¿ç¨‹å¯¹è±¡çš„åå­—</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// å“ªä¸ªçº¿ç¨‹æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šå¾—åˆ°å“ªä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> m </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        m.</span><span style="color:#62E884;">setName</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æœ€ç‰›çš„çº¿ç¨‹</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(m.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">()); </span><span style="color:#7B7F8B;">// main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">for</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> i </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">; i </span><span style="color:#F286C4;">&lt;=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">; i</span><span style="color:#F286C4;">++</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(m.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">çº¿ç¨‹è¾“å‡ºï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> i);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadTest1</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        Thread t1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        t1.</span><span style="color:#6F42C1;">setName</span><span style="color:#24292E;">(String name) </span><span style="color:#6A737D;">//è®¾ç½®çº¿ç¨‹åç§°;</span></span>
<span class="line"><span style="color:#24292E;">        t1.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(t1.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">());  </span><span style="color:#6A737D;">//Thread-0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Thread t2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;2å·çº¿ç¨‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// t2.setName(&quot;2å·çº¿ç¨‹&quot;);</span></span>
<span class="line"><span style="color:#24292E;">        t2.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(t2.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">()); </span><span style="color:#6A737D;">// Thread-1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ä¸»çº¿ç¨‹å¯¹è±¡çš„åå­—</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å“ªä¸ªçº¿ç¨‹æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šå¾—åˆ°å“ªä¸ªçº¿ç¨‹å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Thread m </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        m.</span><span style="color:#6F42C1;">setName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ€ç‰›çš„çº¿ç¨‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(m.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">()); </span><span style="color:#6A737D;">// main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(m.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;çº¿ç¨‹è¾“å‡ºï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> i);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å‘ç°æ¯ä¸€æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±äº†åå­—äº†ã€‚</p><img src="`+e+`"><p>ç‚¹å‡»æŸ¥çœ‹joinæ–¹æ³•ä»£ç </p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ThreadTest2</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// joinæ–¹æ³•ä½œç”¨ï¼šè®©å½“å‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">1å·çº¿ç¨‹</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        t1.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        t1.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t2 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">2å·çº¿ç¨‹</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        t2.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        t2.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;"> t3 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyThread</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">3å·çº¿ç¨‹</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        t3.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        t3.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadTest2</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// joinæ–¹æ³•ä½œç”¨ï¼šè®©å½“å‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Thread t1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;1å·çº¿ç¨‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        t1.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        t1.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Thread t2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;2å·çº¿ç¨‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        t2.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        t2.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Thread t3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyThread</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;3å·çº¿ç¨‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        t3.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        t3.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ‰§è¡Œæ•ˆæœæ˜¯1å·çº¿ç¨‹å…ˆæ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œ2å·çº¿ç¨‹ï¼›2å·çº¿ç¨‹æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œ3å·çº¿ç¨‹ï¼›3å·çº¿ç¨‹æ‰§è¡Œå®Œå°±ç»“æŸäº†ã€‚</p><img src="`+t+'"><p>æˆ‘ä»¬å†å°è¯•ï¼ŒæŠŠjoin()æ–¹æ³•å»æ‰ï¼Œå†çœ‹æ‰§è¡Œæ•ˆæœã€‚æ­¤æ—¶ä½ ä¼šå‘ç°2å·çº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œ1å·çº¿ç¨‹å°±æ‰§è¡Œäº†æ•ˆæœæ˜¯å¤šæ¬¡è¿è¡Œæ‰å‡ºç°çš„ï¼Œæ ¹æ®ä¸ªäººç”µè„‘è€Œå¼‚ï¼Œå¯èƒ½å°ä¼™ä¼´åŠå¤©ä¹Ÿå‡ºç°ä¸äº†ä¹Ÿæ˜¯æ­£å¸¸çš„</p><img src="'+c+'"><p>æ€»ç»“</p><ol><li>é‡ç‚¹ç»ƒä¹ cureentThread è·å–å½“å‰çº¿ç¨‹</li><li>ç»ƒä¹ sleep(æ¯«ç§’) è®©å½“å‰æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼Œä¿—ç§°ç¡ä¸€ä¸‹</li></ol><h2 id="äºŒã€çº¿ç¨‹å®‰å…¨é—®é¢˜-ğŸš©-ğŸ-ç»†å¿ƒç†è§£" tabindex="-1">äºŒã€çº¿ç¨‹å®‰å…¨é—®é¢˜ ğŸš© ğŸ ç»†å¿ƒç†è§£ <a class="header-anchor" href="#äºŒã€çº¿ç¨‹å®‰å…¨é—®é¢˜-ğŸš©-ğŸ-ç»†å¿ƒç†è§£" aria-label="Permalink to &quot;äºŒã€çº¿ç¨‹å®‰å…¨é—®é¢˜ ğŸš© ğŸ ç»†å¿ƒç†è§£&quot;">â€‹</a></h2><p>å„ä½å°ä¼™ä¼´ï¼Œå‰é¢æˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•åˆ›å»ºçº¿ç¨‹ï¼Œä»¥åŠçº¿ç¨‹çš„å¸¸ç”¨æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ªåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨çº¿ç¨‹æ—¶æœ€é‡è¦çš„ä¸€ä¸ªé—®é¢˜ï¼Œå«çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><h3 id="_1ï¸âƒ£-2-1-çº¿ç¨‹å®‰å…¨é—®é¢˜æ¦‚è¿°" tabindex="-1">1ï¸âƒ£ 2.1 çº¿ç¨‹å®‰å…¨é—®é¢˜æ¦‚è¿° <a class="header-anchor" href="#_1ï¸âƒ£-2-1-çº¿ç¨‹å®‰å…¨é—®é¢˜æ¦‚è¿°" aria-label="Permalink to &quot;1ï¸âƒ£ 2.1 çº¿ç¨‹å®‰å…¨é—®é¢˜æ¦‚è¿°&quot;">â€‹</a></h3><p>çº¿ç¨‹å®‰å…¨é—®é¢˜æŒ‡çš„æ˜¯ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œåŒä¸€ä¸ªå…±äº«èµ„æºçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸šåŠ¡å®‰å…¨é—®é¢˜</p><img src="'+r+'"><p>åœºæ™¯ï¼š</p><ol><li>å°æ˜å’Œå°çº¢æ˜¯ä¸€å¯¹å¤«å¦»ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªå…±äº«è´¦æˆ·ï¼Œä½™é¢æ˜¯10ä¸‡å…ƒï¼Œ</li><li>å°çº¢å’Œå°æ˜åŒæ—¶æ¥å–é’±ï¼Œå¹¶ä¸”2äººå„è‡ªéƒ½åœ¨å–é’±10ä¸‡å…ƒï¼Œ<strong>å¯èƒ½å‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</strong></li></ol><img src="'+y+`"><p>åœ¨è¿™ä¸ªå–é’±æ¡ˆä¾‹ä¸­ï¼Œä¸¤ä¸ªäººæŠŠå…±äº«è´¦æˆ·çš„é’±éƒ½å–äº†10ä¸‡ï¼Œä½†é—®é¢˜æ˜¯åªæœ‰10ä¸‡å—é’±</p><h3 id="_2ï¸âƒ£-2-2-çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç æ¼”ç¤º" tabindex="-1">2ï¸âƒ£ 2.2 çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç æ¼”ç¤º <a class="header-anchor" href="#_2ï¸âƒ£-2-2-çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç æ¼”ç¤º" aria-label="Permalink to &quot;2ï¸âƒ£ 2.2 çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç æ¼”ç¤º&quot;">â€‹</a></h3><p>å…ˆå®šä¹‰ä¸€ä¸ªå…±äº«çš„è´¦æˆ·ç±»</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Account</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> cardId; </span><span style="color:#7B7F8B;">// å¡å·</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> money; </span><span style="color:#7B7F8B;">// ä½™é¢ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Account</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Account</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">cardId</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">money</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.cardId </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> cardId;</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// å°æ˜ å°çº¢åŒæ—¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">drawMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">money</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">&gt;=</span><span style="color:#F6F6F4;"> money){</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> money </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">-=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±ï¼šä½™é¢ä¸è¶³~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getCardId</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> cardId;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">setCardId</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">cardId</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.cardId </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> cardId;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getMoney</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">setMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">money</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String cardId; </span><span style="color:#6A737D;">// å¡å·</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> money; </span><span style="color:#6A737D;">// ä½™é¢ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">cardId</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#E36209;">money</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.cardId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> cardId;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å°æ˜ å°çº¢åŒæ—¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">drawMoney</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#E36209;">money</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        String name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> money){</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money);</span></span>
<span class="line"><span style="color:#24292E;">        }</span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±ï¼šä½™é¢ä¸è¶³~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> String </span><span style="color:#6F42C1;">getCardId</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> cardId;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setCardId</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">cardId</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.cardId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> cardId;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getMoney</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setMoney</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> </span><span style="color:#E36209;">money</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>åœ¨å®šä¹‰ä¸€ä¸ªæ˜¯å–é’±çš„çº¿ç¨‹ç±»</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">DrawThread</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Account</span><span style="color:#F6F6F4;"> acc;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DrawThread</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">Account</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">acc</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">name</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">super</span><span style="color:#F6F6F4;">(name);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.acc </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> acc;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// å–é’±(å°æ˜ï¼Œå°çº¢)</span></span>
<span class="line"><span style="color:#F6F6F4;">        acc.</span><span style="color:#62E884;">drawMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100000</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DrawThread</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Thread</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Account acc;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DrawThread</span><span style="color:#24292E;">(Account </span><span style="color:#E36209;">acc</span><span style="color:#24292E;">, String </span><span style="color:#E36209;">name</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">(name);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.acc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> acc;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å–é’±(å°æ˜ï¼Œå°çº¢)</span></span>
<span class="line"><span style="color:#24292E;">        acc.</span><span style="color:#6F42C1;">drawMoney</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æœ€åï¼Œå†å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œåœ¨æµ‹è¯•ç±»ä¸­åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ThreadTest</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºä¸€ä¸ªè´¦æˆ·å¯¹è±¡ï¼Œä»£è¡¨ä¸¤ä¸ªäººçš„å…±äº«è´¦æˆ·ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Account</span><span style="color:#F6F6F4;"> acc </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Account</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ICBC-110</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">100000</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«ä»£è¡¨å°æ˜ å°çº¢ï¼Œå†å»åŒä¸€ä¸ªè´¦æˆ·å¯¹è±¡ä¸­å–é’±10ä¸‡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DrawThread</span><span style="color:#F6F6F4;">(acc, </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å°æ˜</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">).</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// å°æ˜</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DrawThread</span><span style="color:#F6F6F4;">(acc, </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å°çº¢</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">).</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// å°çº¢</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºä¸€ä¸ªè´¦æˆ·å¯¹è±¡ï¼Œä»£è¡¨ä¸¤ä¸ªäººçš„å…±äº«è´¦æˆ·ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Account acc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ICBC-110&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">100000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«ä»£è¡¨å°æ˜ å°çº¢ï¼Œå†å»åŒä¸€ä¸ªè´¦æˆ·å¯¹è±¡ä¸­å–é’±10ä¸‡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DrawThread</span><span style="color:#24292E;">(acc, </span><span style="color:#032F62;">&quot;å°æ˜&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// å°æ˜</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DrawThread</span><span style="color:#24292E;">(acc, </span><span style="color:#032F62;">&quot;å°çº¢&quot;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// å°çº¢</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>è¿è¡Œç¨‹åºï¼Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹ã€‚ä½ ä¼šå‘ç°ä¸¤ä¸ªäººéƒ½å–äº†10ä¸‡å—é’±ï¼Œä½™é¢ä¸º-10å®Œäº†ã€‚</p><img src="`+F+`"><h3 id="_3ï¸âƒ£-2-3-çº¿ç¨‹åŒæ­¥æ–¹æ¡ˆ" tabindex="-1">3ï¸âƒ£ 2.3 çº¿ç¨‹åŒæ­¥æ–¹æ¡ˆ <a class="header-anchor" href="#_3ï¸âƒ£-2-3-çº¿ç¨‹åŒæ­¥æ–¹æ¡ˆ" aria-label="Permalink to &quot;3ï¸âƒ£ 2.3 çº¿ç¨‹åŒæ­¥æ–¹æ¡ˆ&quot;">â€‹</a></h3><p>ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œè´¦æˆ·ä¸­å‡ºç°äº†è´Ÿæ•° å‡ºç°äº†--çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ï¼ï¼</p><p>è§£å†³æ–¹æ¡ˆï¼šåŠ é”</p><p><strong>æ„æ€æ˜¯æ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼ŒåŠ é”åæ‰èƒ½è¿›å…¥è®¿é—®ï¼Œè®¿é—®å®Œæ¯•åè‡ªåŠ¨é‡Šæ”¾é”ï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰èƒ½å†åŠ é”è¿›æ¥ã€‚</strong></p><p><strong>Javaæä¾›äº†ä¸‰ç§æ·é”æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>åŒæ­¥ä»£ç å—</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">//é”å¯¹è±¡ï¼šå¿…é¡»æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡ï¼ˆåŒä¸€ä¸ªåœ°å€ï¼‰</span></span>
<span class="line"><span style="color:#F286C4;">synchronized</span><span style="color:#F6F6F4;">(é”å¯¹è±¡){</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">//...è®¿é—®å…±äº«æ•°æ®çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//é”å¯¹è±¡ï¼šå¿…é¡»æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡ï¼ˆåŒä¸€ä¸ªåœ°å€ï¼‰</span></span>
<span class="line"><span style="color:#D73A49;">synchronized</span><span style="color:#24292E;">(é”å¯¹è±¡){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//...è®¿é—®å…±äº«æ•°æ®çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ol start="2"><li>åŒæ­¥æ–¹æ³•</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">synchronized</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> æ–¹æ³•å(å‚æ•°åˆ—è¡¨) {</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">synchronized</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> æ–¹æ³•å(å‚æ•°åˆ—è¡¨) {</span></span></code></pre></div><ol start="3"><li>Locké”</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">1.é¦–å…ˆåœ¨æˆå‘˜å˜é‡ä½å­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªLockæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯é”å¯¹è±¡ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">final</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Lock</span><span style="color:#F6F6F4;"> lk </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ReentrantLock</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">2.åœ¨éœ€è¦ä¸Šé”çš„åœ°æ–¹åŠ å…¥ä¸‹é¢çš„ä»£ç </span></span>
<span class="line"><span style="color:#F6F6F4;">	 lk.</span><span style="color:#62E884;">lock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// åŠ é”</span></span>
<span class="line"><span style="color:#F6F6F4;">	 </span><span style="color:#7B7F8B;">//...ä¸­é—´æ˜¯è¢«é”ä½çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#F6F6F4;">	 lk.</span><span style="color:#62E884;">unlock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// è§£é”</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">1.é¦–å…ˆåœ¨æˆå‘˜å˜é‡ä½å­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªLockæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯é”å¯¹è±¡ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> Lock lk </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReentrantLock</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">2.åœ¨éœ€è¦ä¸Šé”çš„åœ°æ–¹åŠ å…¥ä¸‹é¢çš„ä»£ç </span></span>
<span class="line"><span style="color:#24292E;">	 lk.</span><span style="color:#6F42C1;">lock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// åŠ é”</span></span>
<span class="line"><span style="color:#24292E;">	 </span><span style="color:#6A737D;">//...ä¸­é—´æ˜¯è¢«é”ä½çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#24292E;">	 lk.</span><span style="color:#6F42C1;">unlock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// è§£é”</span></span></code></pre></div><h4 id="_1ï¸âƒ£-åŒæ­¥ä»£ç å—" tabindex="-1">1ï¸âƒ£ åŒæ­¥ä»£ç å— <a class="header-anchor" href="#_1ï¸âƒ£-åŒæ­¥ä»£ç å—" aria-label="Permalink to &quot;1ï¸âƒ£ åŒæ­¥ä»£ç å—&quot;">â€‹</a></h4><p>åŒæ­¥ä»£ç å—çš„ä½œç”¨å°±æ˜¯æŠŠè®¿é—®å…±äº«æ•°æ®çš„ä»£ç é”èµ·æ¥ï¼Œä»¥æ­¤ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><p><img src="`+s+'"><img src="'+i+`"></p><blockquote><p>å¿«æ·é”®ï¼šé€‰ä¸­è¦åŠ é”çš„ä»£ç ï¼ŒæŒ‰ä½ctrl+alt+t é€‰æ‹©synchronized ğŸ‘ˆ</p></blockquote><p>ä½¿ç”¨åŒæ­¥ä»£ç å—ï¼Œæ¥è§£å†³å‰é¢ä»£ç é‡Œé¢çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹DrawThreadç±»ä¸­çš„ä»£ç å³å¯ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// å°æ˜ å°çº¢çº¿ç¨‹åŒæ—¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">drawMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> money) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// thisæ­£å¥½ä»£è¡¨å…±äº«èµ„æºï¼</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">synchronized</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">&gt;=</span><span style="color:#F6F6F4;"> money){</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> money </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">-=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±ï¼šä½™é¢ä¸è¶³~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// å°æ˜ å°çº¢çº¿ç¨‹åŒæ—¶è¿‡æ¥çš„</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">drawMoney</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> money) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">    String name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// thisæ­£å¥½ä»£è¡¨å…±äº«èµ„æºï¼</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">synchronized</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> money){</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money);</span></span>
<span class="line"><span style="color:#24292E;">        }</span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±ï¼šä½™é¢ä¸è¶³~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ­¤æ—¶å†è¿è¡Œæµ‹è¯•ç±»ï¼Œè§‚å¯Ÿæ˜¯å¦ä¼šå‡ºç°ä¸åˆç†çš„æƒ…å†µã€‚</p><p>é”å¯¹è±¡å¦‚ä½•é€‰æ‹©</p><ol><li>é”çš„ç‰¹æ€§ï¼šå”¯ä¸€æ€§</li><li>å»ºè®®æŠŠ<strong>å…±äº«èµ„æºä½œä¸ºé”å¯¹è±¡</strong>, ä¸è¦å°†éšä¾¿<strong>æ— å…³çš„å¯¹è±¡</strong>å½“åšé”å¯¹è±¡</li><li>å¯¹äº<strong>å®ä¾‹æ–¹æ³•</strong>ï¼Œå»ºè®®ä½¿ç”¨this ä½œä¸ºé”å¯¹è±¡</li><li>å¯¹äº<strong>é™æ€æ–¹æ³•</strong> staticä¿®é¥°çš„ï¼Œå»ºè®®æŠŠç±»çš„å­—èŠ‚ç (ç±»å.class) å½“åšé”å¯¹è±¡</li></ol><h4 id="_2ï¸âƒ£åŒæ­¥æ–¹æ³•" tabindex="-1">2ï¸âƒ£åŒæ­¥æ–¹æ³• <a class="header-anchor" href="#_2ï¸âƒ£åŒæ­¥æ–¹æ³•" aria-label="Permalink to &quot;2ï¸âƒ£åŒæ­¥æ–¹æ³•&quot;">â€‹</a></h4><p>æç¤º</p><p>åŒæ­¥æ–¹æ³•ï¼Œå°±æ˜¯æŠŠ<strong>æ•´ä¸ªæ–¹æ³•ç»™é”ä½</strong></p><ul><li>ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•</li><li>å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨çš„æ—¶å€™å°±æ‰§è¡Œä¸äº†ï¼Œåªæœ‰ç­‰ä¸Šä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ç»“æŸï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</li></ul><img src="`+s+`"><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// åŒæ­¥æ–¹æ³•</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">synchronized</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">drawMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> money) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">&gt;=</span><span style="color:#F6F6F4;"> money){</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> money </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">-=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±ï¼šä½™é¢ä¸è¶³~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// åŒæ­¥æ–¹æ³•</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">synchronized</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">drawMoney</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> money) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">    String name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> money){</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money);</span></span>
<span class="line"><span style="color:#24292E;">    }</span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±ï¼šä½™é¢ä¸è¶³~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ”¹å®Œä¹‹åï¼Œå†æ¬¡è¿è¡Œæµ‹è¯•ç±»ï¼Œè§‚å¯Ÿæ˜¯å¦ä¼šå‡ºç°ä¸åˆç†çš„æƒ…å†µã€‚</p><p>åŒæ­¥æ–¹æ³•æœ‰æ²¡æœ‰é”å¯¹è±¡ï¼Ÿé”å¯¹è±¡æ˜¯è°ï¼Ÿ</p><ul><li>åŒæ­¥æ–¹æ³•ä¹Ÿæ˜¯æœ‰é”å¯¹è±¡ï¼Œåªä¸è¿‡è¿™ä¸ªé”å¯¹è±¡æ²¡æœ‰æ˜¾ç¤ºçš„å†™å‡ºæ¥è€Œå·²ã€‚ <ol><li>å¯¹äºå®ä¾‹æ–¹æ³•ï¼Œé”å¯¹è±¡å…¶å®æ˜¯thisï¼ˆä¹Ÿå°±æ˜¯æ–¹æ³•çš„è°ƒç”¨è€…ï¼‰</li><li>å¯¹äºé™æ€æ–¹æ³•ï¼Œé”å¯¹è±¡æ—¶ç±»çš„å­—èŠ‚ç å¯¹è±¡ï¼ˆç±»å.classï¼‰</li></ol></li></ul><p>åŒæ­¥ä»£ç å—å’ŒåŒæ­¥æ–¹æ³•åŒºåˆ«</p><ol><li><strong>ä¸å­˜åœ¨å“ªä¸ªå¥½ä¸ä¸å¥½</strong>ï¼Œåªæ˜¯ä¸€ä¸ªé”ä½çš„<strong>èŒƒå›´å¤§ï¼Œä¸€ä¸ªèŒƒå›´å°</strong></li><li>åŒæ­¥æ–¹æ³•æ˜¯å°†æ–¹æ³•ä¸­<strong>æ‰€æœ‰çš„ä»£ç é”ä½</strong></li><li>åŒæ­¥ä»£ç å—æ˜¯å°†æ–¹æ³•ä¸­çš„<strong>éƒ¨åˆ†ä»£ç é”ä½</strong></li></ol><h4 id="_3ï¸âƒ£-locké”" tabindex="-1">3ï¸âƒ£ Locké” <a class="header-anchor" href="#_3ï¸âƒ£-locké”" aria-label="Permalink to &quot;3ï¸âƒ£ Locké”&quot;">â€‹</a></h4><p>Locké”</p><p>Locké”æ˜¯JDK5ç‰ˆæœ¬ä¸“é—¨æä¾›çš„ä¸€ç§é”å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªé”å¯¹è±¡çš„æ–¹æ³•æ¥è¾¾åˆ°åŠ é”ï¼Œå’Œé‡Šæ”¾é”çš„ç›®çš„ï¼Œ<strong>ä½¿ç”¨èµ·æ¥æ›´åŠ çµæ´»</strong>ã€‚æ ¼å¼å¦‚ä¸‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">1.é¦–å…ˆåœ¨æˆå‘˜å˜é‡ä½å­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªLockæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯é”å¯¹è±¡ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">final</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Lock</span><span style="color:#F6F6F4;"> lk </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ReentrantLock</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">2.åœ¨éœ€è¦ä¸Šé”çš„åœ°æ–¹åŠ å…¥ä¸‹é¢çš„ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	 lk.</span><span style="color:#62E884;">lock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// åŠ é”</span></span>
<span class="line"><span style="color:#F6F6F4;">	 </span><span style="color:#7B7F8B;">//...ä¸­é—´æ˜¯è¢«é”ä½çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#F6F6F4;">	 lk.</span><span style="color:#62E884;">unlock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// è§£é”</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">1.é¦–å…ˆåœ¨æˆå‘˜å˜é‡ä½å­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªLockæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯é”å¯¹è±¡ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> Lock lk </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReentrantLock</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">2.åœ¨éœ€è¦ä¸Šé”çš„åœ°æ–¹åŠ å…¥ä¸‹é¢çš„ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	 lk.</span><span style="color:#6F42C1;">lock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// åŠ é”</span></span>
<span class="line"><span style="color:#24292E;">	 </span><span style="color:#6A737D;">//...ä¸­é—´æ˜¯è¢«é”ä½çš„ä»£ç ...</span></span>
<span class="line"><span style="color:#24292E;">	 lk.</span><span style="color:#6F42C1;">unlock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// è§£é”</span></span></code></pre></div><p>ä½¿ç”¨Locké”æ”¹å†™å‰é¢DrawThreadä¸­å–é’±çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// åˆ›å»ºäº†ä¸€ä¸ªé”å¯¹è±¡</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">final</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Lock</span><span style="color:#F6F6F4;"> lk </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ReentrantLock</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">drawMoney</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">double</span><span style="color:#F6F6F4;"> money) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            lk.</span><span style="color:#62E884;">lock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// åŠ é”</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">&gt;=</span><span style="color:#F6F6F4;"> money){</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> money </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money </span><span style="color:#F286C4;">-=</span><span style="color:#F6F6F4;"> money;</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.money);</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(name </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¥å–é’±ï¼šä½™é¢ä¸è¶³~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"><span style="color:#F6F6F4;">        } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            e.</span><span style="color:#62E884;">printStackTrace</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        } </span><span style="color:#F286C4;">finally</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            lk.</span><span style="color:#62E884;">unlock</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// è§£é”</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// åˆ›å»ºäº†ä¸€ä¸ªé”å¯¹è±¡</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> Lock lk </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReentrantLock</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">drawMoney</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">double</span><span style="color:#24292E;"> money) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å…ˆææ¸…æ¥šæ˜¯è°æ¥å–é’±ï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        String name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            lk.</span><span style="color:#6F42C1;">lock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// åŠ é”</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 1ã€åˆ¤æ–­ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">&gt;=</span><span style="color:#24292E;"> money){</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> money </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> money;</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±åï¼Œä½™é¢å‰©ä½™ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.money);</span></span>
<span class="line"><span style="color:#24292E;">            }</span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ¥å–é’±ï¼šä½™é¢ä¸è¶³~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">finally</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            lk.</span><span style="color:#6F42C1;">unlock</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// è§£é”</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>è¿è¡Œç¨‹åºç»“æœï¼Œè§‚å¯Ÿæ˜¯å¦æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚åˆ°æ­¤ä¸‰ç§è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜çš„åŠæ³•æˆ‘ä»¬å°±å­¦ä¹ å®Œäº†ã€‚</p><h2 id="ä¸‰ã€çº¿ç¨‹é€šä¿¡-ğŸš©-ğŸš€-äº†è§£" tabindex="-1">ä¸‰ã€çº¿ç¨‹é€šä¿¡ ğŸš© ğŸš€ äº†è§£ <a class="header-anchor" href="#ä¸‰ã€çº¿ç¨‹é€šä¿¡-ğŸš©-ğŸš€-äº†è§£" aria-label="Permalink to &quot;ä¸‰ã€çº¿ç¨‹é€šä¿¡ ğŸš© ğŸš€ äº†è§£&quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹çº¿ç¨‹é€šä¿¡ã€‚</p><p><strong>é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯çº¿ç¨‹é€šä¿¡å‘¢ï¼Ÿ</strong></p><ul><li>å½“å¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œå…±äº«èµ„æºæ—¶ï¼Œçº¿ç¨‹é—´é€šè¿‡æŸç§æ–¹å¼äº’ç›¸å‘ŠçŸ¥è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ç›¸äº’åè°ƒï¼Œé¿å…æ— æ•ˆçš„èµ„æºæŒ£æŠ¢ã€‚</li></ul><p><strong>çº¿ç¨‹é€šä¿¡çš„å¸¸è§æ¨¡å¼ï¼šæ˜¯ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹</strong></p><ul><li>ç”Ÿäº§è€…çº¿ç¨‹è´Ÿè´£ç”Ÿæˆæ•°æ®</li><li>æ¶ˆè´¹è€…çº¿ç¨‹è´Ÿè´£æ¶ˆè´¹ç”Ÿäº§è€…ç”Ÿæˆçš„æ•°æ®</li><li>æ³¨æ„ï¼šç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®ååº”è¯¥è®©è‡ªå·±ç­‰å¾…ï¼Œé€šçŸ¥å…¶ä»–æ¶ˆè´¹è€…æ¶ˆè´¹ï¼›æ¶ˆè´¹è€…æ¶ˆè´¹å®Œæ•°æ®ä¹‹ååº”è¯¥è®©è‡ªå·±ç­‰å¾…ï¼ŒåŒæ—¶é€šçŸ¥ç”Ÿäº§è€…ç”Ÿæˆã€‚</li></ul><h3 id="é˜»å¡é˜Ÿåˆ—å®ç°æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ¨¡å‹" tabindex="-1">é˜»å¡é˜Ÿåˆ—å®ç°æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ¨¡å‹ <a class="header-anchor" href="#é˜»å¡é˜Ÿåˆ—å®ç°æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ¨¡å‹" aria-label="Permalink to &quot;é˜»å¡é˜Ÿåˆ—å®ç°æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ¨¡å‹&quot;">â€‹</a></h3><h4 id="_3-1-1-æ ¸å¿ƒ-api-blockingqueue" tabindex="-1">3.1.1 æ ¸å¿ƒ API BlockingQueue <a class="header-anchor" href="#_3-1-1-æ ¸å¿ƒ-api-blockingqueue" aria-label="Permalink to &quot;3.1.1 æ ¸å¿ƒ API BlockingQueue&quot;">â€‹</a></h4><p>BlockingQueue é˜»å¡é˜Ÿåˆ—ï¼Œç›¸å½“äºä»“åº“ï¼Œç”¨æ¥æ”¾ç½®å•†å“</p><ul><li>æ ¸å¿ƒæ–¹æ³• <ul><li>put(Object) å°†å‚æ•°æ”¾å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡ï¼ˆç­‰å¾…ï¼‰ã€‚</li><li>take() ï¼š å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®ï¼Œå–ä¸åˆ°ä¼šé˜»å¡ï¼ˆç­‰å¾…ï¼‰ã€‚</li></ul></li><li>å¸¸è§å®ç°ï¼š <ul><li>ArrayBlockingQueue åº•å±‚æ˜¯æ•°ç»„ï¼Œæœ‰ç•Œ</li><li>LinkedBlockingQueue åº•å±‚æ˜¯é“¾è¡¨ï¼Œæ— ç•Œï¼Œä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œï¼Œæœ€å¤§å€¼ä¸º int çš„æœ€å¤§å€¼</li></ul></li></ul><h4 id="_3-1-2-æ­¥é„¹å’Œå…·ä½“å®ç°" tabindex="-1">3.1.2 æ­¥é„¹å’Œå…·ä½“å®ç° <a class="header-anchor" href="#_3-1-2-æ­¥é„¹å’Œå…·ä½“å®ç°" aria-label="Permalink to &quot;3.1.2 æ­¥é„¹å’Œå…·ä½“å®ç°&quot;">â€‹</a></h4><h5 id="_1ï¸âƒ£-æ­¥é„¹" tabindex="-1">1ï¸âƒ£ æ­¥é„¹ <a class="header-anchor" href="#_1ï¸âƒ£-æ­¥é„¹" aria-label="Permalink to &quot;1ï¸âƒ£ æ­¥é„¹&quot;">â€‹</a></h5><ol><li>åˆ›å»ºä¸€ä¸ª ArrayBlockingQueue ä¸º 10 çš„é˜»å¡é˜Ÿåˆ—</li><li>é€šè¿‡æ„é€ çš„å½¢å¼ï¼Œå°†é˜Ÿåˆ—å¯¹è±¡ä¼ å…¥åˆ° Thread ç±»ä¸­ï¼ˆProduccer ç”Ÿäº§è€…ï¼ŒCustomer æ¶ˆè´¹è€…ï¼‰</li><li>åœ¨ç”Ÿäº§è€… Produccer ä¸­çš„ run æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ put æ–¹æ³•æ”¾å…¥æ±‰å ¡åŒ…</li><li>åœ¨æ¶ˆè´¹è€… Customer çš„ run æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ take æ–¹æ³• æ¶ˆè´¹æ±‰å ¡åŒ…</li></ol><h5 id="_2ï¸âƒ£-ä»£ç å®ç°" tabindex="-1">2ï¸âƒ£ ä»£ç å®ç° <a class="header-anchor" href="#_2ï¸âƒ£-ä»£ç å®ç°" aria-label="Permalink to &quot;2ï¸âƒ£ ä»£ç å®ç°&quot;">â€‹</a></h5><p>ç‚¹å‡»æŸ¥çœ‹ä»£ç </p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Test</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#7B7F8B;">//        åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œç”¨æ¥è£…é£Ÿç‰©  å‚æ•°ä¸ºå®¹ç§¯   å®¹å™¨ä¸ºå…¬å…±å˜é‡</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt; jz</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt;(</span><span style="color:#BF9EEE;">10</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Produccer</span><span style="color:#F6F6F4;"> produccer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Produccer</span><span style="color:#F6F6F4;">(jz);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Customer</span><span style="color:#F6F6F4;"> customer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Customer</span><span style="color:#F6F6F4;">(jz);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">//        å¯åŠ¨çº¿ç¨‹</span></span>
<span class="line"><span style="color:#F6F6F4;">        produccer.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        customer.</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Test</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">//        åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œç”¨æ¥è£…é£Ÿç‰©  å‚æ•°ä¸ºå®¹ç§¯   å®¹å™¨ä¸ºå…¬å…±å˜é‡</span></span>
<span class="line"><span style="color:#24292E;">        ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; jz</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt;(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Produccer produccer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Produccer</span><span style="color:#24292E;">(jz);</span></span>
<span class="line"><span style="color:#24292E;">        Customer customer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Customer</span><span style="color:#24292E;">(jz);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//        å¯åŠ¨çº¿ç¨‹</span></span>
<span class="line"><span style="color:#24292E;">        produccer.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        customer.</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * ç”Ÿäº§è€…</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Produccer</span><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;">  </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#7B7F8B;">//    å¦‚æœè¦ä¼ å€¼ï¼Œä½¿ç”¨æ„é€ æ–¹æ³•</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt; jz;</span></span>
<span class="line"><span style="color:#7B7F8B;">//    æ€»å…±ç”Ÿäº§50ä¸ª</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> count </span><span style="color:#F286C4;">=</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Produccer</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt; </span><span style="color:#FFB86C;font-style:italic;">jz</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.jz </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> jz;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#7B7F8B;">//       ç”¨æ¥ç”Ÿäº§ä¸œè¥¿ å¾€é˜Ÿåˆ—ä¸­å¡ä¸œè¥¿  put</span></span>
<span class="line"><span style="color:#F6F6F4;">       </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (count</span><span style="color:#F286C4;">&lt;=</span><span style="color:#BF9EEE;">50</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">//           å¦‚æœé˜Ÿåˆ—æ»¡çš„  å°±ç¡è§‰</span></span>
<span class="line"><span style="color:#7B7F8B;">//           å¦‚æœé˜Ÿåˆ—æœ‰ç©ºä½™ï¼Œå°±ç”Ÿäº§</span></span>
<span class="line"><span style="color:#F6F6F4;">           </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">               jz.</span><span style="color:#62E884;">put</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å°ç‚’è‚‰</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">count);</span></span>
<span class="line"><span style="color:#F6F6F4;">               System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ç”Ÿäº§è€…å­˜å…¥å°ç‚’è‚‰</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">count);</span></span>
<span class="line"><span style="color:#7B7F8B;">//               å½“å®¹å™¨å­˜æ»¡åï¼Œput ä¼šé˜»å¡  ç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹</span></span>
<span class="line"><span style="color:#F6F6F4;">               count</span><span style="color:#F286C4;">++</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">           } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">               e.</span><span style="color:#62E884;">printStackTrace</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">           }</span></span>
<span class="line"><span style="color:#F6F6F4;">       }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç”Ÿäº§è€…</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Produccer</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Thread</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#6A737D;">//    å¦‚æœè¦ä¼ å€¼ï¼Œä½¿ç”¨æ„é€ æ–¹æ³•</span></span>
<span class="line"><span style="color:#24292E;">    ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; jz;</span></span>
<span class="line"><span style="color:#6A737D;">//    æ€»å…±ç”Ÿäº§50ä¸ª</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> count </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Produccer</span><span style="color:#24292E;">(ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; </span><span style="color:#E36209;">jz</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.jz </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jz;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#6A737D;">//       ç”¨æ¥ç”Ÿäº§ä¸œè¥¿ å¾€é˜Ÿåˆ—ä¸­å¡ä¸œè¥¿  put</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (count</span><span style="color:#D73A49;">&lt;=</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//           å¦‚æœé˜Ÿåˆ—æ»¡çš„  å°±ç¡è§‰</span></span>
<span class="line"><span style="color:#6A737D;">//           å¦‚æœé˜Ÿåˆ—æœ‰ç©ºä½™ï¼Œå°±ç”Ÿäº§</span></span>
<span class="line"><span style="color:#24292E;">           </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">               jz.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;å°ç‚’è‚‰&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">count);</span></span>
<span class="line"><span style="color:#24292E;">               System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ç”Ÿäº§è€…å­˜å…¥å°ç‚’è‚‰&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">count);</span></span>
<span class="line"><span style="color:#6A737D;">//               å½“å®¹å™¨å­˜æ»¡åï¼Œput ä¼šé˜»å¡  ç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹</span></span>
<span class="line"><span style="color:#24292E;">               count</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">           } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">               e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">           }</span></span>
<span class="line"><span style="color:#24292E;">       }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * æ¶ˆè´¹è€…----çº¿ç¨‹B</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Customer</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Thread</span><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">//    å¦‚æœè¦ä¼ å€¼ï¼Œä½¿ç”¨æ„é€ æ–¹æ³•</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt; jz;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Customer</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;String&gt; </span><span style="color:#FFB86C;font-style:italic;">jz</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.jz </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> jz;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#7B7F8B;">//        æ¶ˆè´¹å®¹å™¨ä¸­çš„äº‹ç‰©ï¼Œtakeæ–¹æ³•</span></span>
<span class="line"><span style="color:#F6F6F4;">     </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"><span style="color:#7B7F8B;">//         System.out.println(&quot;æ¶ˆè´¹è€… æ­£å‡†å¤‡æ¶ˆè´¹&quot;);</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> take </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">null</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">//  ç¡ä¸ª100ms è®©ç”Ÿäº§è€…å…ˆç”Ÿäº§</span></span>
<span class="line"><span style="color:#F6F6F4;">             Thread.</span><span style="color:#62E884;">sleep</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">             take </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> jz.</span><span style="color:#62E884;">take</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#7B7F8B;">//        å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰ä¸œè¥¿çš„æ—¶å€™ï¼Œ takeä¼šé˜»å¡ç­‰å¾…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">             System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¶ˆè´¹è€… æ­£åœ¨æ¶ˆè´¹ </span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">take);</span></span>
<span class="line"><span style="color:#F6F6F4;">         } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">InterruptedException</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">             e.</span><span style="color:#62E884;">printStackTrace</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">         }</span></span>
<span class="line"><span style="color:#F6F6F4;">     }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ¶ˆè´¹è€…----çº¿ç¨‹B</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Thread</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//    å¦‚æœè¦ä¼ å€¼ï¼Œä½¿ç”¨æ„é€ æ–¹æ³•</span></span>
<span class="line"><span style="color:#24292E;">    ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; jz;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Customer</span><span style="color:#24292E;">(ArrayBlockingQueue&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; </span><span style="color:#E36209;">jz</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.jz </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jz;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#6A737D;">//        æ¶ˆè´¹å®¹å™¨ä¸­çš„äº‹ç‰©ï¼Œtakeæ–¹æ³•</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#6A737D;">//         System.out.println(&quot;æ¶ˆè´¹è€… æ­£å‡†å¤‡æ¶ˆè´¹&quot;);</span></span>
<span class="line"><span style="color:#24292E;">         String take </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//  ç¡ä¸ª100ms è®©ç”Ÿäº§è€…å…ˆç”Ÿäº§</span></span>
<span class="line"><span style="color:#24292E;">             Thread.</span><span style="color:#6F42C1;">sleep</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">             take </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jz.</span><span style="color:#6F42C1;">take</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6A737D;">//        å½“é˜Ÿåˆ—ä¸­æ²¡æœ‰ä¸œè¥¿çš„æ—¶å€™ï¼Œ takeä¼šé˜»å¡ç­‰å¾…</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">             System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ¶ˆè´¹è€… æ­£åœ¨æ¶ˆè´¹ &quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">take);</span></span>
<span class="line"><span style="color:#24292E;">         } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (InterruptedException </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">             e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">         }</span></span>
<span class="line"><span style="color:#24292E;">     }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="å››ã€çº¿ç¨‹æ± -ğŸš©-â¤ï¸-ğŸ" tabindex="-1">å››ã€çº¿ç¨‹æ±  ğŸš© â¤ï¸ ğŸ <a class="header-anchor" href="#å››ã€çº¿ç¨‹æ± -ğŸš©-â¤ï¸-ğŸ" aria-label="Permalink to &quot;å››ã€çº¿ç¨‹æ±  ğŸš© â¤ï¸ ğŸ&quot;">â€‹</a></h2><h3 id="_1ï¸âƒ£-4-1-çº¿ç¨‹æ± æ¦‚è¿°" tabindex="-1">1ï¸âƒ£ 4.1 çº¿ç¨‹æ± æ¦‚è¿° <a class="header-anchor" href="#_1ï¸âƒ£-4-1-çº¿ç¨‹æ± æ¦‚è¿°" aria-label="Permalink to &quot;1ï¸âƒ£ 4.1 çº¿ç¨‹æ± æ¦‚è¿°&quot;">â€‹</a></h3><p>æç¤º</p><p><strong>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çº¿ç¨‹çš„æŠ€æœ¯</strong>ã€‚</p><p><strong>ä¸ä½¿ç”¨çº¿ç¨‹æ± çš„åœºæ™¯ï¼š</strong></p><blockquote><p>å‡è®¾ï¼šç”¨æˆ·æ¯æ¬¡å‘èµ·ä¸€ä¸ªè¯·æ±‚ç»™åå°ï¼Œåå°å°±åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†ï¼Œä¸‹æ¬¡æ–°çš„ä»»åŠ¡è¿‡æ¥è‚¯å®šä¹Ÿä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œå¦‚æœç”¨æˆ·é‡éå¸¸å¤§ï¼Œåˆ›å»ºçš„çº¿ç¨‹ä¹Ÿè®²è¶Šæ¥è¶Šå¤šã€‚ç„¶è€Œï¼Œåˆ›å»ºçº¿ç¨‹æ˜¯å¼€é”€å¾ˆå¤§çš„ï¼Œå¹¶ä¸”è¯·æ±‚è¿‡å¤šæ—¶ï¼Œä¼šä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚</p></blockquote><p><strong>ä½¿ç”¨çº¿ç¨‹æ± çš„åœºæ™¯</strong></p><blockquote><p>ä¸‹æ¬¡æ–°çš„ä»»åŠ¡è¿‡æ¥ï¼Œå…ˆä¸åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ä»çº¿ç¨‹æ± ä¸­è·å–çº¿ç¨‹ï¼Œå‡å°‘çº¿ç¨‹çš„åˆ›å»º</p></blockquote><p><strong>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹å¤ç”¨æŠ€æœ¯ï¼Œå®ƒå¯ä»¥æé«˜çº¿ç¨‹çš„åˆ©ç”¨ç‡</strong></p><img src="`+E+'"><h3 id="_2ï¸âƒ£-4-2-åˆ›å»ºçº¿ç¨‹æ± -ğŸ-â¤ï¸" tabindex="-1">2ï¸âƒ£ 4.2 åˆ›å»ºçº¿ç¨‹æ±  ğŸ â¤ï¸ <a class="header-anchor" href="#_2ï¸âƒ£-4-2-åˆ›å»ºçº¿ç¨‹æ± -ğŸ-â¤ï¸" aria-label="Permalink to &quot;2ï¸âƒ£ 4.2 åˆ›å»ºçº¿ç¨‹æ±  ğŸ â¤ï¸&quot;">â€‹</a></h3><img src="'+u+'"><p>ä½¿ç”¨ThreadPoolExecutorç±»å°±å¯ä»¥ç”¨æ¥åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</p><p>åœ¨JDK5ç‰ˆæœ¬ä¸­æä¾›äº†ä»£è¡¨<strong>çº¿ç¨‹æ± çš„æ¥å£ExecutorService</strong>ï¼Œè€Œè¿™ä¸ªæ¥å£ä¸‹æœ‰ä¸€ä¸ªå®ç°ç±»å«<strong>ThreadPoolExecutorç±»</strong></p><p>ä¸‹é¢æ˜¯å®ƒçš„æ„é€ å™¨ï¼Œå‚æ•°æ¯”è¾ƒå¤šï¼Œä¸è¦æ€•ï¼Œå¹²å°±å®Œäº†_ã€‚</p><img src="'+d+`"><p>æ¥ä¸‹æ¥ï¼Œç”¨è¿™7ä¸ªå‚æ•°çš„æ„é€ å™¨æ¥åˆ›å»ºçº¿ç¨‹æ± çš„å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#97E1F1;font-style:italic;">ExecutorService</span><span style="color:#F6F6F4;"> pool </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ThreadPoolExecutor</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,	</span><span style="color:#7B7F8B;">//æ ¸å¿ƒçº¿ç¨‹æ•°æœ‰3ä¸ª</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">,  </span><span style="color:#7B7F8B;">//æœ€å¤§çº¿ç¨‹æ•°æœ‰5ä¸ªã€‚   ä¸´æ—¶çº¿ç¨‹æ•°=æœ€å¤§çº¿ç¨‹æ•°-æ ¸å¿ƒçº¿ç¨‹æ•°=5-3=2</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">8</span><span style="color:#F6F6F4;">,	</span><span style="color:#7B7F8B;">//ä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´8ç§’ã€‚ æ„æ€æ˜¯ä¸´æ—¶çº¿ç¨‹8ç§’æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œï¼Œå°±ä¼šè¢«é”€æ¯æ‰ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">    TimeUnit.SECONDS,</span><span style="color:#7B7F8B;">//æ—¶é—´å•ä½ï¼ˆç§’ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;&gt;(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">//ä»»åŠ¡é˜»å¡é˜Ÿåˆ—ï¼Œæ²¡æœ‰æ¥å¾—åŠæ‰§è¡Œçš„ä»»åŠ¡åœ¨ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…</span></span>
<span class="line"><span style="color:#F6F6F4;">    Executors.</span><span style="color:#62E884;">defaultThreadFactory</span><span style="color:#F6F6F4;">(), </span><span style="color:#7B7F8B;">//ç”¨äºåˆ›å»ºçº¿ç¨‹çš„å·¥å‚å¯¹è±¡</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> ThreadPoolExecutor.</span><span style="color:#62E884;">CallerRunsPolicy</span><span style="color:#F6F6F4;">() </span><span style="color:#7B7F8B;">//æ‹’ç»ç­–ç•¥</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ExecutorService pool </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadPoolExecutor</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,	</span><span style="color:#6A737D;">//æ ¸å¿ƒçº¿ç¨‹æ•°æœ‰3ä¸ª</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">//æœ€å¤§çº¿ç¨‹æ•°æœ‰5ä¸ªã€‚   ä¸´æ—¶çº¿ç¨‹æ•°=æœ€å¤§çº¿ç¨‹æ•°-æ ¸å¿ƒçº¿ç¨‹æ•°=5-3=2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,	</span><span style="color:#6A737D;">//ä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´8ç§’ã€‚ æ„æ€æ˜¯ä¸´æ—¶çº¿ç¨‹8ç§’æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œï¼Œå°±ä¼šè¢«é”€æ¯æ‰ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    TimeUnit.SECONDS,</span><span style="color:#6A737D;">//æ—¶é—´å•ä½ï¼ˆç§’ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayBlockingQueue&lt;&gt;(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">//ä»»åŠ¡é˜»å¡é˜Ÿåˆ—ï¼Œæ²¡æœ‰æ¥å¾—åŠæ‰§è¡Œçš„ä»»åŠ¡åœ¨ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…</span></span>
<span class="line"><span style="color:#24292E;">    Executors.</span><span style="color:#6F42C1;">defaultThreadFactory</span><span style="color:#24292E;">(), </span><span style="color:#6A737D;">//ç”¨äºåˆ›å»ºçº¿ç¨‹çš„å·¥å‚å¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ThreadPoolExecutor.</span><span style="color:#6F42C1;">CallerRunsPolicy</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">//æ‹’ç»ç­–ç•¥</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><p>å…³äºçº¿ç¨‹æ± ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸‹é¢çš„ä¸¤ä¸ªé—®é¢˜</p><img src="`+C+'"><p>ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Ÿ</p><p>æ–°ä»»åŠ¡æäº¤æ—¶ï¼Œå‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ã€ä»»åŠ¡é˜Ÿåˆ—æ»¡äº†ã€å¹¶ä¸”è¿˜å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹ã€‚</p><p>ä»€ä¹ˆæ—¶å€™å¼€å§‹æ‹’ç»æ–°çš„ä»»åŠ¡ï¼Ÿ</p><p>æ ¸å¿ƒçº¿ç¨‹å’Œä¸´æ—¶çº¿ç¨‹éƒ½åœ¨å¿™ã€ä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ã€æ–°ä»»åŠ¡è¿‡æ¥æ—¶æ‰ä¼šå¼€å§‹æ‹’ç»ä»»åŠ¡ã€‚</p><h3 id="_3ï¸âƒ£-4-3-çº¿ç¨‹æ± æ‰§è¡Œ-æäº¤-ä»»åŠ¡" tabindex="-1">3ï¸âƒ£ 4.3 çº¿ç¨‹æ± æ‰§è¡Œ(æäº¤)ä»»åŠ¡ <a class="header-anchor" href="#_3ï¸âƒ£-4-3-çº¿ç¨‹æ± æ‰§è¡Œ-æäº¤-ä»»åŠ¡" aria-label="Permalink to &quot;3ï¸âƒ£ 4.3 çº¿ç¨‹æ± æ‰§è¡Œ(æäº¤)ä»»åŠ¡&quot;">â€‹</a></h3><h4 id="çº¿ç¨‹æ± æ‰§è¡Œrunnableä»»åŠ¡" tabindex="-1">çº¿ç¨‹æ± æ‰§è¡ŒRunnableä»»åŠ¡ <a class="header-anchor" href="#çº¿ç¨‹æ± æ‰§è¡Œrunnableä»»åŠ¡" aria-label="Permalink to &quot;çº¿ç¨‹æ± æ‰§è¡ŒRunnableä»»åŠ¡&quot;">â€‹</a></h4><p>åˆ›å»ºå¥½çº¿ç¨‹æ± ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡äº†ã€‚çº¿ç¨‹æ± æ‰§è¡Œçš„ä»»åŠ¡å¯ä»¥æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯Runnableä»»åŠ¡ï¼›ä¸€ç§æ˜¯callableä»»åŠ¡ã€‚ä¸‹é¢çš„executeæ–¹æ³•å¯ä»¥ç”¨æ¥æ‰§è¡ŒRunnableä»»åŠ¡ã€‚</p><img src="'+h+`"><p>å…ˆå‡†å¤‡ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ç±»</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">MyRunnable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">implements</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Runnable</span><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// ä»»åŠ¡æ˜¯å¹²å•¥çš„ï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> ==&gt; è¾“å‡º666~~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">//ä¸ºäº†æ¨¡æ‹Ÿçº¿ç¨‹ä¸€ç›´åœ¨æ‰§è¡Œï¼Œè¿™é‡Œç¡ä¹…ä¸€ç‚¹</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            Thread.</span><span style="color:#62E884;">sleep</span><span style="color:#F6F6F4;">(Integer.MAX_VALUE);</span></span>
<span class="line"><span style="color:#F6F6F4;">        } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">InterruptedException</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            e.</span><span style="color:#62E884;">printStackTrace</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyRunnable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Runnable</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ä»»åŠ¡æ˜¯å¹²å•¥çš„ï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; ==&gt; è¾“å‡º666~~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//ä¸ºäº†æ¨¡æ‹Ÿçº¿ç¨‹ä¸€ç›´åœ¨æ‰§è¡Œï¼Œè¿™é‡Œç¡ä¹…ä¸€ç‚¹</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            Thread.</span><span style="color:#6F42C1;">sleep</span><span style="color:#24292E;">(Integer.MAX_VALUE);</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (InterruptedException </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä¸‹é¢æ˜¯æ‰§è¡ŒRunnableä»»åŠ¡çš„ä»£ç ï¼Œæ³¨æ„é˜…è¯»æ³¨é‡Šï¼Œå¯¹ç…§ç€å‰é¢çš„7ä¸ªå‚æ•°ç†è§£ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#97E1F1;font-style:italic;">ExecutorService</span><span style="color:#F6F6F4;"> pool </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ThreadPoolExecutor</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,	</span><span style="color:#7B7F8B;">//æ ¸å¿ƒçº¿ç¨‹æ•°æœ‰3ä¸ª</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">,  </span><span style="color:#7B7F8B;">//æœ€å¤§çº¿ç¨‹æ•°æœ‰5ä¸ªã€‚   ä¸´æ—¶çº¿ç¨‹æ•°=æœ€å¤§çº¿ç¨‹æ•°-æ ¸å¿ƒçº¿ç¨‹æ•°=5-3=2</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">8</span><span style="color:#F6F6F4;">,	</span><span style="color:#7B7F8B;">//ä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´8ç§’ã€‚ æ„æ€æ˜¯ä¸´æ—¶çº¿ç¨‹8ç§’æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œï¼Œå°±ä¼šè¢«é”€æ¯æ‰ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">    TimeUnit.SECONDS,</span><span style="color:#7B7F8B;">//æ—¶é—´å•ä½ï¼ˆç§’ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;&gt;(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">), </span><span style="color:#7B7F8B;">//ä»»åŠ¡é˜»å¡é˜Ÿåˆ—ï¼Œæ²¡æœ‰æ¥å¾—åŠæ‰§è¡Œçš„ä»»åŠ¡åœ¨ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…</span></span>
<span class="line"><span style="color:#F6F6F4;">    Executors.</span><span style="color:#62E884;">defaultThreadFactory</span><span style="color:#F6F6F4;">(), </span><span style="color:#7B7F8B;">//ç”¨äºåˆ›å»ºçº¿ç¨‹çš„å·¥å‚å¯¹è±¡</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> ThreadPoolExecutor.</span><span style="color:#62E884;">CallerRunsPolicy</span><span style="color:#F6F6F4;">() </span><span style="color:#7B7F8B;">//æ‹’ç»ç­–ç•¥</span></span>
<span class="line"><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#97E1F1;font-style:italic;">Runnable</span><span style="color:#F6F6F4;"> target </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyRunnable</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target); </span><span style="color:#7B7F8B;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target); </span><span style="color:#7B7F8B;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target); </span><span style="color:#7B7F8B;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#7B7F8B;">//ä¸‹é¢4ä¸ªä»»åŠ¡åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œæ’é˜Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">//ä¸‹é¢2ä¸ªä»»åŠ¡ï¼Œä¼šè¢«ä¸´æ—¶çº¿ç¨‹çš„åˆ›å»ºæ—¶æœºäº†</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span>
<span class="line"><span style="color:#7B7F8B;">// åˆ°äº†æ–°ä»»åŠ¡çš„æ‹’ç»æ—¶æœºäº†ï¼</span></span>
<span class="line"><span style="color:#F6F6F4;">pool.</span><span style="color:#62E884;">execute</span><span style="color:#F6F6F4;">(target);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ExecutorService pool </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadPoolExecutor</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,	</span><span style="color:#6A737D;">//æ ¸å¿ƒçº¿ç¨‹æ•°æœ‰3ä¸ª</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">,  </span><span style="color:#6A737D;">//æœ€å¤§çº¿ç¨‹æ•°æœ‰5ä¸ªã€‚   ä¸´æ—¶çº¿ç¨‹æ•°=æœ€å¤§çº¿ç¨‹æ•°-æ ¸å¿ƒçº¿ç¨‹æ•°=5-3=2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,	</span><span style="color:#6A737D;">//ä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´8ç§’ã€‚ æ„æ€æ˜¯ä¸´æ—¶çº¿ç¨‹8ç§’æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œï¼Œå°±ä¼šè¢«é”€æ¯æ‰ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    TimeUnit.SECONDS,</span><span style="color:#6A737D;">//æ—¶é—´å•ä½ï¼ˆç§’ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayBlockingQueue&lt;&gt;(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">), </span><span style="color:#6A737D;">//ä»»åŠ¡é˜»å¡é˜Ÿåˆ—ï¼Œæ²¡æœ‰æ¥å¾—åŠæ‰§è¡Œçš„ä»»åŠ¡åœ¨ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…</span></span>
<span class="line"><span style="color:#24292E;">    Executors.</span><span style="color:#6F42C1;">defaultThreadFactory</span><span style="color:#24292E;">(), </span><span style="color:#6A737D;">//ç”¨äºåˆ›å»ºçº¿ç¨‹çš„å·¥å‚å¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ThreadPoolExecutor.</span><span style="color:#6F42C1;">CallerRunsPolicy</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">//æ‹’ç»ç­–ç•¥</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Runnable target </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyRunnable</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target); </span><span style="color:#6A737D;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target); </span><span style="color:#6A737D;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target); </span><span style="color:#6A737D;">// çº¿ç¨‹æ± ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ï¼</span></span>
<span class="line"><span style="color:#6A737D;">//ä¸‹é¢4ä¸ªä»»åŠ¡åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œæ’é˜Ÿ</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//ä¸‹é¢2ä¸ªä»»åŠ¡ï¼Œä¼šè¢«ä¸´æ—¶çº¿ç¨‹çš„åˆ›å»ºæ—¶æœºäº†</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span>
<span class="line"><span style="color:#6A737D;">// åˆ°äº†æ–°ä»»åŠ¡çš„æ‹’ç»æ—¶æœºäº†ï¼</span></span>
<span class="line"><span style="color:#24292E;">pool.</span><span style="color:#6F42C1;">execute</span><span style="color:#24292E;">(target);</span></span></code></pre></div><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œç»“æœè¾“å‡ºå¦‚ä¸‹</p><img src="`+g+'"><h4 id="çº¿ç¨‹æ± æ‰§è¡Œcallableä»»åŠ¡" tabindex="-1">çº¿ç¨‹æ± æ‰§è¡ŒCallableä»»åŠ¡ <a class="header-anchor" href="#çº¿ç¨‹æ± æ‰§è¡Œcallableä»»åŠ¡" aria-label="Permalink to &quot;çº¿ç¨‹æ± æ‰§è¡ŒCallableä»»åŠ¡&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡ŒCallableä»»åŠ¡ã€‚callableä»»åŠ¡ç›¸å¯¹äºRunnableä»»åŠ¡æ¥è¯´ï¼Œå°±æ˜¯å¤šäº†ä¸€ä¸ªè¿”å›å€¼ã€‚</p><p>æ‰§è¡ŒCallableä»»åŠ¡éœ€è¦ç”¨åˆ°ä¸‹é¢çš„submitæ–¹æ³•</p><img src="'+D+`"><p><strong>ç¬¬ä¸€æ­¥ï¼šå…ˆå‡†å¤‡ä¸€ä¸ªCallableçº¿ç¨‹ä»»åŠ¡</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">MyCallable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">implements</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Callable</span><span style="color:#F6F6F4;">&lt;String&gt; {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> n;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">n</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.n </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> n;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// 2ã€é‡å†™callæ–¹æ³•</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">call</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// æè¿°çº¿ç¨‹çš„ä»»åŠ¡ï¼Œè¿”å›çº¿ç¨‹æ‰§è¡Œè¿”å›åçš„ç»“æœã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// éœ€æ±‚ï¼šæ±‚1-nçš„å’Œè¿”å›ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> sum </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">for</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> i </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">1</span><span style="color:#F6F6F4;">; i </span><span style="color:#F286C4;">&lt;=</span><span style="color:#F6F6F4;"> n; i</span><span style="color:#F286C4;">++</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            sum </span><span style="color:#F286C4;">+=</span><span style="color:#F6F6F4;"> i;</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ±‚å‡ºäº†1-</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> n </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">çš„å’Œæ˜¯ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> sum;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Callable</span><span style="color:#24292E;">&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> n;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> </span><span style="color:#E36209;">n</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.n </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> n;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 2ã€é‡å†™callæ–¹æ³•</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> String </span><span style="color:#6F42C1;">call</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// æè¿°çº¿ç¨‹çš„ä»»åŠ¡ï¼Œè¿”å›çº¿ç¨‹æ‰§è¡Œè¿”å›åçš„ç»“æœã€‚</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// éœ€æ±‚ï¼šæ±‚1-nçš„å’Œè¿”å›ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> sum </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">; i </span><span style="color:#D73A49;">&lt;=</span><span style="color:#24292E;"> n; i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            sum </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> i;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æ±‚å‡ºäº†1-&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> n </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;çš„å’Œæ˜¯ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> sum;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><strong>ç¬¬äºŒæ­¥ï¼šå†å‡†å¤‡ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œåœ¨æµ‹è¯•ç±»ä¸­åˆ›å»ºçº¿ç¨‹æ± ï¼Œå¹¶æ‰§è¡Œcallableä»»åŠ¡ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ThreadPoolTest2</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€é€šè¿‡ThreadPoolExecutoråˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ExecutorService</span><span style="color:#F6F6F4;"> pool </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ThreadPoolExecutor</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#BF9EEE;">3</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#BF9EEE;">8</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">            TimeUnit.SECONDS,</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayBlockingQueue</span><span style="color:#F6F6F4;">&lt;&gt;(</span><span style="color:#BF9EEE;">4</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">            Executors.</span><span style="color:#62E884;">defaultThreadFactory</span><span style="color:#F6F6F4;">(),</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> ThreadPoolExecutor.</span><span style="color:#62E884;">CallerRunsPolicy</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä½¿ç”¨çº¿ç¨‹å¤„ç†Callableä»»åŠ¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f2 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">200</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f3 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">300</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f4 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">400</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 3ã€æ‰§è¡Œå®ŒCallableä»»åŠ¡åï¼Œéœ€è¦è·å–è¿”å›ç»“æœã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f1.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f2.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f3.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f4.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadPoolTest2</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€é€šè¿‡ThreadPoolExecutoråˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        ExecutorService pool </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadPoolExecutor</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            TimeUnit.SECONDS,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayBlockingQueue&lt;&gt;(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">            Executors.</span><span style="color:#6F42C1;">defaultThreadFactory</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ThreadPoolExecutor.</span><span style="color:#6F42C1;">CallerRunsPolicy</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä½¿ç”¨çº¿ç¨‹å¤„ç†Callableä»»åŠ¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">300</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f4 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">400</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3ã€æ‰§è¡Œå®ŒCallableä»»åŠ¡åï¼Œéœ€è¦è·å–è¿”å›ç»“æœã€‚</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f1.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f2.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f3.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f4.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ‰§è¡Œåï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="`+A+'"><h3 id="_5ï¸âƒ£-4-5-çº¿ç¨‹æ± å·¥å…·ç±»-executors-ğŸš€-äº†è§£" tabindex="-1">5ï¸âƒ£ 4.5 çº¿ç¨‹æ± å·¥å…·ç±»ï¼ˆExecutorsï¼‰ğŸš€ äº†è§£ <a class="header-anchor" href="#_5ï¸âƒ£-4-5-çº¿ç¨‹æ± å·¥å…·ç±»-executors-ğŸš€-äº†è§£" aria-label="Permalink to &quot;5ï¸âƒ£ 4.5 çº¿ç¨‹æ± å·¥å…·ç±»ï¼ˆExecutorsï¼‰ğŸš€ äº†è§£&quot;">â€‹</a></h3><p>å‚æ•°å¤ªå¤šã€è®°ä¸ä½ï¼Œæœ‰æ²¡æœ‰å¿«æ·çš„åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹æ³•å‘¢ï¼Ÿ</p><p><strong>æœ‰çš„</strong>ã€‚</p><p>Javaä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªåˆ›å»ºçº¿ç¨‹æ± çš„å·¥å…·ç±»ï¼Œå«åšExecutorsï¼Œå®ƒæä¾›äº†æ–¹æ³•å¯ä»¥åˆ›å»ºå„ç§ä¸èƒ½ç‰¹ç‚¹çš„çº¿ç¨‹æ± ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="'+m+`"><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹åˆ›å»ºå›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚è¿™å‡ ä¸ªæ–¹æ³•ç”¨å¾—ä¸å¤šï¼Œæ‰€ä»¥è¿™é‡Œä¸åšè¿‡å¤šæ¼”ç¤ºï¼Œå°ä¼™ä¼´ä»¬äº†è§£ä¸€ä¸‹å°±è¡Œäº†ã€‚</p><p>ç‚¹å‡»æŸ¥çœ‹ä»£ç </p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ThreadPoolTest3</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€é€šè¿‡Executorsåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ExecutorService</span><span style="color:#F6F6F4;"> pool </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Executors.</span><span style="color:#62E884;">newFixedThreadPool</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">17</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// è€å¸ˆï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢ï¼Ÿï¼Ÿï¼Ÿ</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// è®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ = CPUçš„æ ¸æ•° + 1</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// IOå¯†é›†å‹çš„ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ = CPUæ ¸æ•° * 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä½¿ç”¨çº¿ç¨‹å¤„ç†Callableä»»åŠ¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">100</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f2 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">200</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f3 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">300</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Future</span><span style="color:#F6F6F4;">&lt;String&gt; f4 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> pool.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">MyCallable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">400</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f1.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f2.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f3.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(f4.</span><span style="color:#62E884;">get</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ThreadPoolTest3</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€é€šè¿‡Executorsåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        ExecutorService pool </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Executors.</span><span style="color:#6F42C1;">newFixedThreadPool</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">17</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è€å¸ˆï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢ï¼Ÿï¼Ÿï¼Ÿ</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ = CPUçš„æ ¸æ•° + 1</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// IOå¯†é›†å‹çš„ä»»åŠ¡ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ = CPUæ ¸æ•° * 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä½¿ç”¨çº¿ç¨‹å¤„ç†Callableä»»åŠ¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">100</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f3 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">300</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">        Future&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; f4 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pool.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyCallable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">400</span><span style="color:#24292E;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f1.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f2.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f3.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(f4.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>Executorsåˆ›å»ºçº¿ç¨‹æ± è¿™ä¹ˆå¥½ç”¨ï¼Œä¸ºä»€ä¹ˆä¸æ¨èå°ä¼™ä¼´ä»¬ä½¿ç”¨å‘¢ï¼Ÿ</p><p>åŸå› åœ¨è¿™é‡Œï¼šçœ‹ä¸‹å›¾ï¼Œè¿™æ˜¯ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹æä¾›çš„å¼ºåˆ¶è§„èŒƒè¦æ±‚ã€‚</p><img src="`+b+'"><h2 id="äº”ã€è¡¥å……çŸ¥è¯†-ğŸš©-ğŸ-ğŸš€-äº†è§£" tabindex="-1">äº”ã€è¡¥å……çŸ¥è¯† ğŸš© ğŸ ğŸš€ äº†è§£ <a class="header-anchor" href="#äº”ã€è¡¥å……çŸ¥è¯†-ğŸš©-ğŸ-ğŸš€-äº†è§£" aria-label="Permalink to &quot;äº”ã€è¡¥å……çŸ¥è¯† ğŸš© ğŸ ğŸš€ äº†è§£&quot;">â€‹</a></h2><p>æœ€åï¼Œæˆ‘ä»¬å†è¡¥å……å‡ ä¸ªæ¦‚å¿µæ€§çš„çŸ¥è¯†ç‚¹ï¼Œå°ä¼™ä¼´ä»¬çŸ¥é“è¿™äº›æ¦‚å¿µä»€ä¹ˆæ„æ€å°±å¯ä»¥äº†ã€‚</p><h3 id="_1ï¸âƒ£-5-1-å¹¶å‘å’Œå¹¶è¡Œ" tabindex="-1">1ï¸âƒ£ 5.1 å¹¶å‘å’Œå¹¶è¡Œ <a class="header-anchor" href="#_1ï¸âƒ£-5-1-å¹¶å‘å’Œå¹¶è¡Œ" aria-label="Permalink to &quot;1ï¸âƒ£ 5.1 å¹¶å‘å’Œå¹¶è¡Œ&quot;">â€‹</a></h3><p>å…ˆå­¦ä¹ ç¬¬ä¸€ä¸ªè¡¥å……çŸ¥è¯†ç‚¹ï¼Œå¹¶å‘å’Œå¹¶è¡Œã€‚åœ¨è®²è§£å¹¶å‘å’Œå¹¶è¡Œçš„å«ä¹‰ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯è¿›ç¨‹ã€çº¿ç¨‹ï¼Ÿ</p><ul><li>æ­£å¸¸è¿è¡Œçš„ç¨‹åºï¼ˆè½¯ä»¶ï¼‰å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹</li><li>çº¿ç¨‹æ˜¯å±äºè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­åŒ…å«å¤šä¸ªçº¿ç¨‹</li><li>è¿›ç¨‹ä¸­çš„çº¿ç¨‹å…¶å®å¹¶å‘å’Œå¹¶è¡ŒåŒæ—¶å­˜åœ¨ï¼ˆç»§ç»­å¾€ä¸‹çœ‹ï¼‰</li></ul><p>æˆ‘ä»¬å¯ä»¥æ‰“å¼€ç³»ç»Ÿçš„ä»»åŠ¡ç®¡ç†å™¨çœ‹çœ‹ï¼ˆå¿«æ·é”®ï¼šCtrl+Shfit+Escï¼‰ï¼Œè‡ªå·±çš„ç”µè„‘ä¸Šç›®å‰æœ‰å“ªäº›è¿›ç¨‹ã€‚</p><img src="'+f+'"><p>çŸ¥é“äº†ä»€ä¹ˆæ˜¯è¿›ç¨‹å’Œçº¿ç¨‹ä¹‹åï¼Œæ¥ç€æˆ‘ä»¬å†æ¥å­¦ä¹ å¹¶å‘å’Œå¹¶è¡Œçš„å«ä¹‰ã€‚</p><p><strong>é¦–å…ˆï¼Œæ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¹¶å‘ï¼Ÿ</strong></p><p>è¿›ç¨‹ä¸­çš„çº¿ç¨‹ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œï¼Œä½†æ˜¯CPUåŒæ—¶å¤„ç†çº¿ç¨‹çš„æ•°é‡æ˜¯ä¼˜å…ˆçš„ï¼Œä¸ºäº†ä¿è¯å…¨éƒ¨çº¿ç¨‹éƒ½èƒ½æ‰§è¡Œåˆ°ï¼ŒCPUé‡‡ç”¨è½®è¯¢æœºåˆ¶ä¸ºç³»ç»Ÿçš„æ¯ä¸ªçº¿ç¨‹æœåŠ¡ï¼Œç”±äºCPUåˆ‡æ¢çš„é€Ÿåº¦å¾ˆå¿«ï¼Œç»™æˆ‘ä»¬çš„æ„Ÿè§‰è¿™äº›çº¿ç¨‹åœ¨åŒæ—¶æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¹¶å‘ã€‚ï¼ˆç®€å•è®°ï¼šå¹¶å‘å°±æ˜¯å¤šæ¡çº¿ç¨‹äº¤æ›¿æ‰§è¡Œï¼‰</p><p><strong>æ¥ä¸‹ï¼Œå†æ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¹¶è¡Œï¼Ÿ</strong></p><p>å¹¶è¡ŒæŒ‡çš„æ˜¯ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¢«CPUè°ƒåº¦æ‰§è¡Œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¤šä¸ªCPUæ ¸å¿ƒåœ¨æ‰§è¡Œå¤šæ¡çº¿ç¨‹</p><img src="'+B+'"><p><strong>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œå¤šçº¿ç¨‹åˆ°åº•æ˜¯å¹¶å‘è¿˜æ˜¯å¹¶è¡Œå‘¢ï¼Ÿ</strong></p><p>å…¶å®å¤šä¸ªçº¿ç¨‹åœ¨æˆ‘ä»¬çš„ç”µè„‘ä¸Šæ‰§è¡Œï¼Œå¹¶å‘å’Œå¹¶è¡Œæ˜¯åŒæ—¶å­˜åœ¨çš„ã€‚</p><h3 id="_2ï¸âƒ£-5-2-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">2ï¸âƒ£ 5.2 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#_2ï¸âƒ£-5-2-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;2ï¸âƒ£ 5.2 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ æœ€åä¸€ä¸ªæœ‰å…³çº¿ç¨‹çš„çŸ¥è¯†ç‚¹ï¼Œå«åšçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€è°“ç”Ÿå‘½å‘¨æœŸå°±æ˜¯çº¿ç¨‹ä»ç”Ÿåˆ°æ­»çš„è¿‡ç¨‹ä¸­é—´æœ‰å“ªäº›çŠ¶æ€ï¼Œä»¥åŠè¿™äº›çŠ¶æ€ä¹‹é—´æ˜¯æ€ä¹ˆåˆ‡æ¢çš„ã€‚</p><p>ä¸ºäº†è®©å¤§å®¶åŒå¥½çš„ç†è§£çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…ˆç”¨äººçš„ç”Ÿå‘½å‘¨æœŸä¸¾ä¸ªä¾‹å­ï¼Œäººä»ç”Ÿåˆ°æ­»æœ‰ä¸‹é¢çš„å‡ ä¸ªè¿‡ç¨‹ã€‚åœ¨äººçš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ä¸­ï¼Œå„ç§çŠ¶æ€ä¹‹é—´å¯èƒ½ä¼šæœ‰åˆ‡æ¢ï¼Œçº¿ç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><img src="'+v+'"><p>æ¥ä¸‹æ¥å°±æ¥å­¦ä¹ çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨Threadç±»ä¸­æœ‰ä¸€ä¸ªåµŒå¥—çš„æšä¸¾ç±»å«Thread.Statusï¼Œè¿™é‡Œé¢å®šä¹‰äº†çº¿ç¨‹çš„6ä¸­çŠ¶æ€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="'+k+`"><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">NEW</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> æ–°å»ºçŠ¶æ€ï¼Œçº¿ç¨‹è¿˜æ²¡æœ‰å¯åŠ¨</span></span>
<span class="line"><span style="color:#F6F6F4;">RUNNABLE</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> å¯ä»¥è¿è¡ŒçŠ¶æ€ï¼Œçº¿ç¨‹è°ƒç”¨äº†</span><span style="color:#62E884;">start</span><span style="color:#F6F6F4;">()æ–¹æ³•åå¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#F6F6F4;">BLOCKED</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> é”é˜»å¡çŠ¶æ€ï¼Œæ²¡æœ‰è·å–åˆ°é”å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#F6F6F4;">WAITING</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> æ— é™ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶è¢«è°ƒç”¨äº†waitæ–¹æ³•å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#F6F6F4;">TIMED_WAITING</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> è®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶è¢«è°ƒç”¨äº†</span><span style="color:#62E884;">sleep</span><span style="color:#F6F6F4;">(æ¯«ç§’)æˆ–è€…</span><span style="color:#62E884;">wait</span><span style="color:#F6F6F4;">(æ¯«ç§’)æ–¹æ³•å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#F6F6F4;">TERMINATED</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> ç»ˆæ­¢çŠ¶æ€, çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è€…é‡åˆ°å¼‚å¸¸æ—¶ï¼Œå¤„äºè¿™ä¸ªçŠ¶æ€ã€‚</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">NEW</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> æ–°å»ºçŠ¶æ€ï¼Œçº¿ç¨‹è¿˜æ²¡æœ‰å¯åŠ¨</span></span>
<span class="line"><span style="color:#24292E;">RUNNABLE</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> å¯ä»¥è¿è¡ŒçŠ¶æ€ï¼Œçº¿ç¨‹è°ƒç”¨äº†</span><span style="color:#6F42C1;">start</span><span style="color:#24292E;">()æ–¹æ³•åå¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#24292E;">BLOCKED</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> é”é˜»å¡çŠ¶æ€ï¼Œæ²¡æœ‰è·å–åˆ°é”å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#24292E;">WAITING</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> æ— é™ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶è¢«è°ƒç”¨äº†waitæ–¹æ³•å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#24292E;">TIMED_WAITING</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> è®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶è¢«è°ƒç”¨äº†</span><span style="color:#6F42C1;">sleep</span><span style="color:#24292E;">(æ¯«ç§’)æˆ–è€…</span><span style="color:#6F42C1;">wait</span><span style="color:#24292E;">(æ¯«ç§’)æ–¹æ³•å¤„äºè¿™ä¸ªçŠ¶æ€</span></span>
<span class="line"><span style="color:#24292E;">TERMINATED</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> ç»ˆæ­¢çŠ¶æ€, çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è€…é‡åˆ°å¼‚å¸¸æ—¶ï¼Œå¤„äºè¿™ä¸ªçŠ¶æ€ã€‚</span></span></code></pre></div><p>è¿™å‡ ç§çŠ¶æ€ä¹‹é—´åˆ‡æ¢å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="`+q+'">',174),w=[S];function _(x,j,P,M,N,I){return a(),l("div",null,w)}const L=n(T,[["render",_]]);export{R as __pageData,L as default};
