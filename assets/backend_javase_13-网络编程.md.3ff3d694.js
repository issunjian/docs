import{_ as s,o as n,c as a,V as l}from"./chunks/framework.c6d8cbec.js";const p="/docs/assets/image-2023-03-22-21-04-56.a6ff3e7f.png",o="/docs/assets/1668262460269.f404808d.png",e="/docs/assets/1668262589242.4d598091.png",t="/docs/assets/1668262831222.e70962fe.png",c="/docs/assets/1668263019076.40d6883c.png",r="/docs/assets/1668263179793.e77b0616.png",y="/docs/assets/1668263481919.fb21654d.png",F="/docs/assets/1668263759999.3f26c6bb.png",i="/docs/assets/image-2023-03-26-14-47-39.f4418dfc.png",E="/docs/assets/1668264280209.f39d9eaa.png",g="/docs/assets/1668264499362.caf26040.png",u="/docs/assets/1668265337659.dadd50d4.png",C="/docs/assets/1668267533206.1003e6cd.png",D="/docs/assets/1668267760295.db678d97.png",d="/docs/assets/1668267891624.df2f73fa.png",A="/docs/assets/1668268046104.cc9d9df7.png",k="/docs/assets/1668268144938.47e3f429.png",B="/docs/assets/1668268174867.19201a35.png",S="/docs/assets/1668268230804.9dc7f784.png",m="/docs/assets/1668270124031.c82275e2.png",b="/docs/assets/image-2023-03-26-15-40-43.8aa01cef.png",h="/docs/assets/image-2023-03-26-15-41-35.911600f5.png",f="/docs/assets/1668315156739.91e495be.png",O=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"backend/javase/13-ç½‘ç»œç¼–ç¨‹.md","filePath":"backend/javase/13-ç½‘ç»œç¼–ç¨‹.md"}'),v={name:"backend/javase/13-ç½‘ç»œç¼–ç¨‹.md"},q=l('<h2 id="ç½‘ç»œç¼–ç¨‹" tabindex="-1">ç½‘ç»œç¼–ç¨‹ <a class="header-anchor" href="#ç½‘ç»œç¼–ç¨‹" aria-label="Permalink to &quot;ç½‘ç»œç¼–ç¨‹&quot;">â€‹</a></h2><ul><li>ç½‘ç»œç¼–ç¨‹ <ul><li>ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´  ğŸ â¤ï¸</li><li>UDPé€šè®¯ ğŸš€ ğŸ</li><li>TCPé€šè®¯ ğŸ âœï¸å®Œæˆæ¡ˆä¾‹å³å¯</li><li>TCPå’ŒUDPçš„åŒºåˆ« ğŸ â¤ï¸</li></ul></li></ul><p>å‰ç½®çŸ¥è¯†</p><ol><li>å®Œæˆè¿‡å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶çš„æ¡ˆä¾‹</li><li>ç†è§£å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶çš„ä¼ è¾“è¿‡ç¨‹</li><li>ç†è§£æ–‡ä»¶æ˜¯ç”±å­—èŠ‚ç»„æˆçš„</li><li>æ›¾ç»æœ‰è¿‡å‘é€å›¾ç‰‡ç»™æœ‹å‹ï¼Œå´å› ä¸ºç½‘ç»œé—®é¢˜ï¼Œå¤±è´¥çš„ç»å†(å¦‚å›¾ğŸ‘‰) <img src="'+p+'"></li></ol><h2 id="ä¸€ã€ç½‘ç»œç¼–ç¨‹æ¦‚è¿°-ğŸš©" tabindex="-1">ä¸€ã€ç½‘ç»œç¼–ç¨‹æ¦‚è¿° ğŸš© <a class="header-anchor" href="#ä¸€ã€ç½‘ç»œç¼–ç¨‹æ¦‚è¿°-ğŸš©" aria-label="Permalink to &quot;ä¸€ã€ç½‘ç»œç¼–ç¨‹æ¦‚è¿° ğŸš©&quot;">â€‹</a></h2><p>ç½‘ç»œç¼–ç¨‹:ç¼–å†™çš„åº”ç”¨ç¨‹åºå¯ä»¥ä¸ç½‘ç»œä¸Šå…¶ä»–è®¾å¤‡ä¸­çš„åº”ç”¨ç¨‹åºè¿›è¡Œæ•°æ®äº¤äº’</p><p><strong>ç½‘ç»œç¼–ç¨‹çš„ä½œç”¨ï¼š</strong></p><ol><li>å¦‚æˆ‘ä»¬ç»å¸¸ç”¨çš„å¾®ä¿¡æ”¶å‘æ¶ˆæ¯å°±éœ€è¦ç”¨åˆ°ç½‘ç»œé€šä¿¡çš„æŠ€æœ¯</li><li>å¦‚æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨å¯ä»¥æµè§ˆå„ç§ç½‘ç»œã€è§†é¢‘ç­‰ä¹Ÿéœ€è¦ç”¨åˆ°ç½‘ç»œç¼–ç¨‹çš„æŠ€æœ¯</li></ol><p><strong>Javaæä¾›çš„ç½‘ç»œç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆ:</strong></p><ol><li>åœ¨java.netåŒ…ä¸‹æä¾›äº†è¯¸å¤šç±»ï¼Œå®ç°ç½‘ç»œç¼–ç¨‹</li></ol><p><strong>ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ¶æ„ï¼š</strong></p><ol><li>CSæ¶æ„ï¼ˆClient å®¢æˆ·ç«¯/ServeræœåŠ¡ç«¯ï¼‰</li><li>BSæ¶æ„ï¼ˆBrower æµè§ˆå™¨/ServeræœåŠ¡ç«¯ï¼‰</li></ol><ul><li><strong>CSæ¶æ„çš„ç‰¹ç‚¹ï¼š</strong> CSæ¶æ„éœ€è¦ç”¨æˆ·åœ¨è‡ªå·±çš„ç”µè„‘æˆ–è€…æ‰‹æœºä¸Šå®‰è£…å®¢æˆ·ç«¯è½¯ä»¶ï¼Œç„¶åç”±å®¢æˆ·ç«¯è½¯ä»¶é€šè¿‡ç½‘ç»œè¿æ¥æœåŠ¡å™¨ç¨‹åºï¼Œç”±æœåŠ¡å™¨æŠŠæ•°æ®å‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ°å„ç§æ•°æ®äº†ã€‚</li></ul><img src="'+o+'"><ul><li><p><strong>BSæ¶æ„çš„ç‰¹ç‚¹ï¼š</strong> BSæ¶æ„ä¸éœ€è¦å¼€å‘å®¢æˆ·ç«¯è½¯ä»¶ï¼Œç”¨æˆ·åªéœ€è¦é€šè¿‡æµè§ˆå™¨è¾“å…¥ç½‘å€å°±å¯ä»¥ç›´æ¥ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œå¹¶ç”±æœåŠ¡å™¨å°†æ•°æ®è¿”å›ç»™æµè§ˆå™¨ï¼Œç”¨æˆ·åœ¨é¡µé¢ä¸Šå°±å¯ä»¥çœ‹åˆ°å„ç§æ•°æ®äº†ã€‚</p><img src="'+e+'"></li></ul><blockquote><p>ä¸ç®¡æ˜¯CSã€è¿˜æ˜¯BSéƒ½æ˜¯éœ€è¦ç”¨åˆ°ç½‘ç»œç¼–ç¨‹çš„ç›¸å…³æŠ€æœ¯</p></blockquote><h2 id="äºŒã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ -ğŸš©-ğŸ-â¤ï¸" tabindex="-1">äºŒã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´  ğŸš© ğŸ â¤ï¸ <a class="header-anchor" href="#äºŒã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ -ğŸš©-ğŸ-â¤ï¸" aria-label="Permalink to &quot;äºŒã€ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´  ğŸš© ğŸ â¤ï¸&quot;">â€‹</a></h2><p>ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ï¼šIPåœ°å€ã€ç«¯å£å·ã€é€šä¿¡åè®®</p><img src="'+t+`"><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‡è®¾ç°åœ¨è¦ä»ä¸€å°ç”µè„‘ä¸­çš„å¾®ä¿¡ä¸Šï¼Œå‘ä¸€å¥â€œä½ æ„å•¥ï¼Ÿâ€åˆ°å…¶ä»–ç”µè„‘çš„å¾®ä¿¡ä¸Šï¼Œæµç¨‹å¦‚ä¸‹</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">1.å…ˆé€šè¿‡ipåœ°å€æ‰¾åˆ°å¯¹æ–¹çš„ç”µè„‘</span></span>
<span class="line"><span style="color:#F6F6F4;">2.å†é€šè¿‡ç«¯å£å·æ‰¾åˆ°å¯¹æ–¹çš„ç”µè„‘ä¸Šçš„åº”ç”¨ç¨‹åº</span></span>
<span class="line"><span style="color:#F6F6F4;">3.æŒ‰ç…§åŒæ–¹çº¦å®šå¥½çš„è§„åˆ™å‘é€ã€æ¥æ”¶æ•°æ®</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">1.å…ˆé€šè¿‡ipåœ°å€æ‰¾åˆ°å¯¹æ–¹çš„ç”µè„‘</span></span>
<span class="line"><span style="color:#24292E;">2.å†é€šè¿‡ç«¯å£å·æ‰¾åˆ°å¯¹æ–¹çš„ç”µè„‘ä¸Šçš„åº”ç”¨ç¨‹åº</span></span>
<span class="line"><span style="color:#24292E;">3.æŒ‰ç…§åŒæ–¹çº¦å®šå¥½çš„è§„åˆ™å‘é€ã€æ¥æ”¶æ•°æ®</span></span></code></pre></div><img src="`+c+'"><h3 id="_1ï¸âƒ£-2-1-ipåœ°å€" tabindex="-1">1ï¸âƒ£ 2.1 IPåœ°å€ <a class="header-anchor" href="#_1ï¸âƒ£-2-1-ipåœ°å€" aria-label="Permalink to &quot;1ï¸âƒ£ 2.1 IPåœ°å€&quot;">â€‹</a></h3><p>IPï¼ˆIneternet Protocolï¼‰å…¨ç§°äº’è”ç½‘åè®®åœ°å€ï¼Œæ˜¯åˆ†é…ç»™ç½‘ç»œè®¾å¤‡çš„å”¯ä¸€è¡¨ç¤ºã€‚</p><blockquote><p>IPåœ°å€åˆ†ä¸ºï¼šIPV4åœ°å€ã€IPV6åœ°å€</p></blockquote><p>IPV4åœ°å€ç”±32ä¸ªæ¯”ç‰¹ä½ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰ç»„æˆï¼Œå¦‚æœä¸‹å›¾æ‰€ç¤ºï¼Œä½†æ˜¯ç”±äºé‡‡ç”¨äºŒè¿›åˆ¶å¤ªä¸å®¹æ˜“é˜…è¯»äº†ï¼Œäºæ˜¯å°±å°†æ¯8ä½çœ‹æˆä¸€ç»„ï¼ŒæŠŠæ¯ä¸€ç»„ç”¨<strong>åè¿›åˆ¶</strong>è¡¨ç¤ºï¼ˆå«åš<strong>ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•</strong>ï¼‰ã€‚æ‰€ä»¥å°±æœ‰äº†æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„IPåœ°å€å½¢å¼ï¼Œå¦‚ï¼š192.168.1.66</p><img src="'+r+'"><p>å¦‚æœæƒ³æŸ¥çœ‹æœ¬æœºçš„IPåœ°å€ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£(win+R cmd)ï¼Œè¾“å…¥<code>ipconfig</code>å‘½ä»¤æŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="'+y+'"><p>ç»è¿‡ä¸æ–­çš„å‘å±•ï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„è®¾å¤‡éœ€è¦è”ç½‘ï¼ŒIPV4åœ°å€å·²ç»ä¸å¤Ÿç”¨äº†(255 * 255 * 255 * 255=çº¦42äº¿)</p><p>IPV6é‡‡ç”¨128ä½äºŒè¿›åˆ¶æ•°æ®æ¥è¡¨ç¤ºï¼ˆ16ä¸ªå­—èŠ‚ï¼‰ï¼Œå·ç§°å¯ä»¥ä¸º<strong>åœ°çƒä¸Šçš„æ¯ä¸€ç²’æ²™å­ç¼–ä¸€ä¸ªIPåœ°å€</strong>ï¼Œ</p><p>IPV6æ¯”è¾ƒé•¿ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œæ¯16ä½ç¼–æˆä¸€ç»„ï¼Œæ¯ç»„é‡‡ç”¨åå…­è¿›åˆ¶æ•°æ®è¡¨ç¤ºï¼Œç„¶åç”¨<strong>å†’å·</strong>éš”å¼€ï¼ˆ<strong>ç§°ä¸ºå†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºæ³•</strong>ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="'+F+'"><p>ç°åœ¨çš„ç½‘ç»œè®¾å¤‡ï¼Œä¸€èˆ¬IPV4å’ŒIPV6åœ°å€éƒ½æ˜¯æ”¯æŒçš„ã€‚ <img src="'+i+'"></p><p>åŸŸå</p><p>åŸŸåæ˜¯ä¸€ä¸ªIPåœ°å€ä¸Šçš„<strong>é¢å…·</strong> ã€‚ä¸€ä¸ªåŸŸåçš„ç›®çš„æ˜¯<strong>ä¾¿äºè®°å¿†å’Œæ²Ÿé€š</strong>çš„ä¸€ç»„æœåŠ¡å™¨çš„åœ°å€</p><blockquote><p>å¦‚ï¼šç™¾åº¦çš„åŸŸåï¼š<a href="https://www.baidu.com/" target="_blank" rel="noreferrer">https://www.baidu.com/open in new window</a> å¯¹åº”çš„ipåœ°å€æ˜¯ï¼š14.119.104.189</p></blockquote><p><strong>åŸŸåå¦‚ä½•æ‰¾åˆ°åŒ¹é…IPï¼Ÿ</strong></p><p>åŸŸåå’ŒIPå…¶å®æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œç”±<strong>è¿è¥å•†æ¥ç®¡ç†åŸŸåå’ŒIPçš„å¯¹åº”å…³ç³»</strong>ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šæ•²ä¸€ä¸ªåŸŸåæ—¶ï¼Œé¦–å…ˆç”±è¿è¥å•†çš„åŸŸåè§£ææœåŠ¡ï¼ŒæŠŠåŸŸåè½¬æ¢ä¸ºipåœ°å€ï¼Œå†é€šè¿‡IPåœ°å€å»è®¿é—®å¯¹åº”çš„æœåŠ¡å™¨è®¾å¤‡ã€‚</p><img src="'+E+`"><blockquote><p><strong>æœ¬åœ°å›é€åœ°å€</strong>ï¼š<code>127.0.0.1</code>ï¼Œæ–¹ä¾¿æµ‹è¯•ä½¿ç”¨(å› ä¸ºç”µè„‘æ²¡æ’ç½‘çº¿æˆ–è€…æ²¡è¿æ¥Wifiçš„æ—¶å€™æ²¡æœ‰åˆ†é…ipåœ°å€)</p></blockquote><p>ç‚¹å‡»æŸ¥çœ‹å¸¸è§çš„å‡ ä¸ªå…³äºæ§åˆ¶å°å‘½ä»¤</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">ipconfig</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> æŸ¥çœ‹æœ¬æœºçš„ipåœ°å€</span></span>
<span class="line"><span style="color:#F6F6F4;">ping åŸŸå</span><span style="color:#F286C4;">/</span><span style="color:#F6F6F4;">ip  æ£€æµ‹å½“å‰ç”µè„‘ä¸æŒ‡å®šçš„ipæ˜¯å¦è¿é€š</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ipconfig</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> æŸ¥çœ‹æœ¬æœºçš„ipåœ°å€</span></span>
<span class="line"><span style="color:#24292E;">ping åŸŸå</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">ip  æ£€æµ‹å½“å‰ç”µè„‘ä¸æŒ‡å®šçš„ipæ˜¯å¦è¿é€š</span></span></code></pre></div><p>pingå‘½ä»¤å‡ºç°ä»¥ä¸‹çš„æç¤ºï¼Œè¯´æ˜ç½‘ç»œæ˜¯é€šè¿‡çš„</p><img src="`+g+'"><p>ä½¿ç”¨Javaä»£ç è·å¾—æœ¬æœºçš„IPåœ°å€</p><p><strong>Javaä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ç”¨æ¥è¡¨IPåœ°å€ï¼Œè¿™ä¸ªç±»æ˜¯InetAddressç±»</strong><img src="'+u+`"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">InetAddressTest</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€è·å–æœ¬æœºIPåœ°å€å¯¹è±¡çš„</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">InetAddress</span><span style="color:#F6F6F4;"> ip1 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> InetAddress.</span><span style="color:#62E884;">getLocalHost</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(ip1.</span><span style="color:#62E884;">getHostName</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(ip1.</span><span style="color:#62E884;">getHostAddress</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€è·å–æŒ‡å®šIPæˆ–è€…åŸŸåçš„IPåœ°å€å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">InetAddress</span><span style="color:#F6F6F4;"> ip2 </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> InetAddress.</span><span style="color:#62E884;">getByName</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">www.baidu.com</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(ip2.</span><span style="color:#62E884;">getHostName</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(ip2.</span><span style="color:#62E884;">getHostAddress</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// ping www.baidu.com</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(ip2.</span><span style="color:#62E884;">isReachable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">6000</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">InetAddressTest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€è·å–æœ¬æœºIPåœ°å€å¯¹è±¡çš„</span></span>
<span class="line"><span style="color:#24292E;">        InetAddress ip1 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> InetAddress.</span><span style="color:#6F42C1;">getLocalHost</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ip1.</span><span style="color:#6F42C1;">getHostName</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ip1.</span><span style="color:#6F42C1;">getHostAddress</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€è·å–æŒ‡å®šIPæˆ–è€…åŸŸåçš„IPåœ°å€å¯¹è±¡ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        InetAddress ip2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> InetAddress.</span><span style="color:#6F42C1;">getByName</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;www.baidu.com&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ip2.</span><span style="color:#6F42C1;">getHostName</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ip2.</span><span style="color:#6F42C1;">getHostAddress</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ping www.baidu.com</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(ip2.</span><span style="color:#6F42C1;">isReachable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">6000</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä½œä¸š</p><p>ğŸš©</p><ol><li>ä½¿ç”¨win+R è¾“å…¥cmd æ‰“å¼€æ§åˆ¶å°ï¼Œè¾“å…¥ipconfig æŸ¥çœ‹æœ¬æœºçš„ipåœ°å€</li><li>æˆ–è€…æ‰“å¼€ç½‘ç»œé€‚é…å™¨ï¼ŒæŸ¥çœ‹ç½‘ç»œè¯¦æƒ…ï¼ŒæŸ¥çœ‹æœ¬æœºåœ°å€ã€‚æˆ–è€…æ‰“å¼€é£ç§‹æŸ¥çœ‹ä½ åŒå­¦çš„ç½‘ç»œåœ°å€</li><li>åœ¨Javaç±»ä¸­ä½¿ç”¨InetAddressçš„api è·å¾—æœ¬æœºåœ°å€(æ–¹æ³•ï¼šgetHostAddress)</li></ol><h3 id="_2ï¸âƒ£-2-2-ç«¯å£å·" tabindex="-1">2ï¸âƒ£ 2.2 ç«¯å£å· <a class="header-anchor" href="#_2ï¸âƒ£-2-2-ç«¯å£å·" aria-label="Permalink to &quot;2ï¸âƒ£ 2.2 ç«¯å£å·&quot;">â€‹</a></h3><p>ç«¯å£å·</p><p>æŒ‡çš„æ˜¯è®¡ç®—æœºè®¾å¤‡ä¸Šè¿è¡Œçš„<strong>åº”ç”¨ç¨‹åºçš„æ ‡è¯†</strong>ï¼Œè¢«è§„å®šä¸ºä¸€ä¸ª<strong>16ä½çš„äºŒè¿›åˆ¶æ•°æ®</strong>ï¼ŒèŒƒå›´ï¼ˆ<strong>0~65535</strong>ï¼‰</p><p>ç«¯å£å·åˆ†ç±»:äº†è§£</p><ul><li>å‘¨çŸ¥ç«¯å£ï¼š0~1023ï¼Œè¢«é¢„å…ˆå®šä¹‰çš„çŸ¥ååº”ç”¨ç¨‹åºå ç”¨ï¼ˆå¦‚ï¼šHTTPå ç”¨80ï¼ŒFTPå ç”¨21ï¼‰</li><li>æ³¨å†Œç«¯å£ï¼š1024~49151ï¼Œåˆ†é…ç»™ç”¨æˆ·ç»å¸¸æˆ–è€…æŸäº›åº”ç”¨ç¨‹åº</li><li>åŠ¨æ€ç«¯å£ï¼š49152~65536ï¼Œä¹‹æ‰€ä»¥ç§°ä¸ºåŠ¨æ€ç«¯å£ï¼Œæ˜¯å› ä¸ºå®ƒä¸€èˆ¬ä¸å›ºå®šåˆ†é…ç»™æŸè¿›ç¨‹ï¼Œè€Œæ˜¯åŠ¨æ€åˆ†é…çš„ã€‚</li></ul><p><strong>å¸¸è§çš„ç«¯å£ï¼š</strong> å¼€å‘å¸¸è§ ğŸ‘ˆ</p><ol><li>80ç«¯å£ æ˜¯httpåè®®çš„ç«¯å£</li><li>443ç«¯å£ æ˜¯httpsåè®®çš„ç«¯å£</li><li>3306ç«¯å£ æ˜¯mysqlæ•°æ®åº“çš„ç«¯å£</li><li>22ç«¯å£ æ˜¯æ–‡ä»¶ä¸Šä¼ çš„ç«¯å£</li></ol><p>æ³¨æ„:åŒä¸€ä¸ªè®¡ç®—æœºè®¾å¤‡ä¸­ï¼Œä¸èƒ½å‡ºç°ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œç”¨åŒä¸€ä¸ªç«¯å£å· <img src="`+C+'"></p><h3 id="_3ï¸âƒ£-2-4-åè®®" tabindex="-1">3ï¸âƒ£ 2.4 åè®® <a class="header-anchor" href="#_3ï¸âƒ£-2-4-åè®®" aria-label="Permalink to &quot;3ï¸âƒ£ 2.4 åè®®&quot;">â€‹</a></h3><p>åè®®</p><p>ç½‘ç»œä¸Šé€šä¿¡çš„è®¾å¤‡ï¼Œäº‹å…ˆè§„å®šçš„<strong>è¿æ¥è§„åˆ™</strong>ï¼Œä»¥åŠ<strong>ä¼ è¾“æ•°æ®çš„è§„åˆ™</strong>è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®ã€‚</p><p><strong>ä½œç”¨ï¼š</strong></p><img src="'+D+'"><p>**åè®®çš„ç§ç±»ï¼š**äº†è§£ä¼ è¾“å±‚åè®®</p><blockquote><p>åªè¦æŒ‰ç…§OSIç½‘ç»œå‚è€ƒæ¨¡å‹åˆ¶é€ çš„è®¾å¤‡ï¼Œå°±å¯ä»¥åœ¨å›½é™…äº’è”ç½‘ä¸Šäº’è”äº’é€š</p></blockquote><img src="'+d+'"><ul><li><strong>UDPåè®®ç‰¹ç‚¹</strong></li></ul><img src="'+A+'"><ul><li><strong>TPCåè®®ç‰¹ç‚¹</strong></li></ul><img src="'+k+'"><p>ä¸‰æ¬¡æ¡æ‰‹å¦‚ä¸‹å›¾æ‰€ç¤º <strong>ï¼šç›®çš„æ˜¯ç¡®è®¤é€šä¿¡åŒæ–¹ï¼Œæ‰‹æ³•æ¶ˆæ¯éƒ½æ˜¯æ­£å¸¸æ²¡é—®é¢˜çš„</strong></p><img src="'+B+'"><p>å››æ¬¡æŒ¥æ‰‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<strong>ç›®çš„æ˜¯ç¡®ä¿åŒæ–¹æ•°æ®çš„æ”¶å‘å·²ç»å®Œæˆï¼Œæ²¡æœ‰æ•°æ®ä¸¢å¤±</strong></p><img src="'+S+`"><h2 id="ä¸‰ã€udpé€šä¿¡ä»£ç -æ¡ˆä¾‹-ğŸš©" tabindex="-1">ä¸‰ã€UDPé€šä¿¡ä»£ç ï¼ˆæ¡ˆä¾‹ï¼‰ ğŸš© <a class="header-anchor" href="#ä¸‰ã€udpé€šä¿¡ä»£ç -æ¡ˆä¾‹-ğŸš©" aria-label="Permalink to &quot;ä¸‰ã€UDPé€šä¿¡ä»£ç ï¼ˆæ¡ˆä¾‹ï¼‰ ğŸš©&quot;">â€‹</a></h2><p>å­¦ä¹ åŸºäºUDPåè®®é€šä¿¡çš„ç¨‹åº</p><p>UDPå…¥é—¨æ¡ˆä¾‹å‰ç½®çŸ¥è¯†ï¼š</p><ol><li>äº†è§£ UDPæ˜¯é¢å‘æ— è¿æ¥çš„ã€ä¸éœ€è¦ç¡®è®¤åŒæ–¹æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯ä¸å¯é çš„åè®®</li><li>Javaæä¾›äº†ä¸€ä¸ªç±»å«<code>DatagramSocket</code>æ¥å®ŒæˆåŸºäºUDPåè®®çš„æ”¶å‘æ•°æ®</li><li>ä½¿ç”¨<code>DatagramSocket</code>æ”¶å‘æ•°æ®æ—¶ï¼Œæ•°æ®è¦ä»¥æ•°æ®åŒ…çš„å½¢å¼ä½“ç°ï¼Œä¸€ä¸ªæ•°æ®åŒ…é™åˆ¶åœ¨<strong>64KBä»¥å†…</strong>å¤§å°æœ‰é™åˆ¶</li><li><strong>æœ‰å‘é€ç«¯å’Œæ¥æ”¶ç«¯2ä¸ªç¨‹åº</strong></li></ol><h3 id="_1ï¸âƒ£-3-1-å…¥é—¨ç¨‹åº-âœï¸" tabindex="-1">1ï¸âƒ£ 3.1 å…¥é—¨ç¨‹åº âœï¸ <a class="header-anchor" href="#_1ï¸âƒ£-3-1-å…¥é—¨ç¨‹åº-âœï¸" aria-label="Permalink to &quot;1ï¸âƒ£ 3.1 å…¥é—¨ç¨‹åº âœï¸&quot;">â€‹</a></h3><p>éœ€æ±‚ï¼šå®¢æˆ·ç«¯ç¨‹åºå‘ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç¨‹åºæ¥æ”¶æ•°æ®å¹¶æ‰“å°ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#7B7F8B;">//        åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramSocket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramSocket</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">       </span><span style="color:#7B7F8B;">/* public DatagramPacket(byte buf[], int length,</span></span>
<span class="line"><span style="color:#7B7F8B;">             InetAddress address, int port)</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°ä¸€ï¼šå°è£…è¦å‘å‡ºå»çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°äºŒï¼šå‘é€å‡ºå»çš„æ•°æ®å¤§å°ï¼ˆå­—èŠ‚ä¸ªæ•°ï¼‰</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°ä¸‰ï¼šæœåŠ¡ç«¯çš„IPåœ°å€ï¼ˆæ‰¾åˆ°æœåŠ¡ç«¯ä¸»æœºï¼‰</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°å››ï¼šæœåŠ¡ç«¯ç¨‹åºçš„ç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;">             */</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[] bytes </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å‘é€ç«¯ï¼šæˆ‘æ˜¯è€ç‹ï¼Œä½ åœ¨å—</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramPacket</span><span style="color:#F6F6F4;"> packet </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramPacket</span><span style="color:#F6F6F4;">(bytes, bytes.length</span></span>
<span class="line"><span style="color:#F6F6F4;">                , InetAddress.</span><span style="color:#62E884;">getLocalHost</span><span style="color:#F6F6F4;">(),  </span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 3ã€å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">send</span><span style="color:#F6F6F4;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å®¢æˆ·ç«¯æ•°æ®å‘é€å®Œæ¯•~~~</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// é‡Šæ”¾èµ„æºï¼</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#6A737D;">//        åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        DatagramSocket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramSocket</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6A737D;">/* public DatagramPacket(byte buf[], int length,</span></span>
<span class="line"><span style="color:#6A737D;">             InetAddress address, int port)</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°ä¸€ï¼šå°è£…è¦å‘å‡ºå»çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°äºŒï¼šå‘é€å‡ºå»çš„æ•°æ®å¤§å°ï¼ˆå­—èŠ‚ä¸ªæ•°ï¼‰</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°ä¸‰ï¼šæœåŠ¡ç«¯çš„IPåœ°å€ï¼ˆæ‰¾åˆ°æœåŠ¡ç«¯ä¸»æœºï¼‰</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°å››ï¼šæœåŠ¡ç«¯ç¨‹åºçš„ç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#6A737D;">             */</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[] bytes </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;å‘é€ç«¯ï¼šæˆ‘æ˜¯è€ç‹ï¼Œä½ åœ¨å—&quot;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        DatagramPacket packet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramPacket</span><span style="color:#24292E;">(bytes, bytes.length</span></span>
<span class="line"><span style="color:#24292E;">                , InetAddress.</span><span style="color:#6F42C1;">getLocalHost</span><span style="color:#24292E;">(),  </span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3ã€å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;å®¢æˆ·ç«¯æ•°æ®å‘é€å®Œæ¯•~~~&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// é‡Šæ”¾èµ„æºï¼</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">----æœåŠ¡ç«¯å¯åŠ¨----</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramSocket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramSocket</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[] buffer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[</span><span style="color:#BF9EEE;">1024</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">64</span><span style="color:#F6F6F4;">]; </span><span style="color:#7B7F8B;">// 64KB.</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramPacket</span><span style="color:#F6F6F4;"> packet </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramPacket</span><span style="color:#F6F6F4;">(buffer, buffer.length);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 3ã€å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®</span></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">receive</span><span style="color:#F6F6F4;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 4ã€ä»å­—èŠ‚æ•°ç»„ä¸­ï¼ŒæŠŠæ¥æ”¶åˆ°çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// æ¥æ”¶å¤šå°‘å°±å€’å‡ºå¤šå°‘</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// è·å–æœ¬æ¬¡æ•°æ®åŒ…æ¥æ”¶äº†å¤šå°‘æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> len </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> packet.</span><span style="color:#62E884;">getLength</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> rs </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">String</span><span style="color:#F6F6F4;">(buffer, </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;"> , len);</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(rs);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;----æœåŠ¡ç«¯å¯åŠ¨----&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">        DatagramSocket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramSocket</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[] buffer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 64KB.</span></span>
<span class="line"><span style="color:#24292E;">        DatagramPacket packet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramPacket</span><span style="color:#24292E;">(buffer, buffer.length);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3ã€å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">receive</span><span style="color:#24292E;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 4ã€ä»å­—èŠ‚æ•°ç»„ä¸­ï¼ŒæŠŠæ¥æ”¶åˆ°çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// æ¥æ”¶å¤šå°‘å°±å€’å‡ºå¤šå°‘</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è·å–æœ¬æ¬¡æ•°æ®åŒ…æ¥æ”¶äº†å¤šå°‘æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> len </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> packet.</span><span style="color:#6F42C1;">getLength</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        String rs </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(buffer, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> , len);</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(rs);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_2ï¸âƒ£-3-2-è¿›é˜¶ç¨‹åº-âœï¸-å¢åŠ ä¸€ä¸ªwhileå¾ªç¯" tabindex="-1">2ï¸âƒ£ 3.2 è¿›é˜¶ç¨‹åº âœï¸ å¢åŠ ä¸€ä¸ªwhileå¾ªç¯ <a class="header-anchor" href="#_2ï¸âƒ£-3-2-è¿›é˜¶ç¨‹åº-âœï¸-å¢åŠ ä¸€ä¸ªwhileå¾ªç¯" aria-label="Permalink to &quot;2ï¸âƒ£ 3.2 è¿›é˜¶ç¨‹åº âœï¸ å¢åŠ ä¸€ä¸ªwhileå¾ªç¯&quot;">â€‹</a></h3><p>éœ€æ±‚ï¼šå®ç°å®¢æˆ·ç«¯ä¸æ–­çš„å‘æ•°æ®ï¼Œè€ŒæœåŠ¡ç«¯èƒ½ä¸æ–­çš„æ¥æ”¶æ•°æ®ï¼Œå®¢æˆ·ç«¯å‘é€exitæ—¶å®¢æˆ·ç«¯ç¨‹åºé€€å‡ºã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨ï¼šå®ç°å®¢æˆ·ç«¯åå¤çš„å‘ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#7B7F8B;">//        åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramSocket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramSocket</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">       </span><span style="color:#7B7F8B;">/* public DatagramPacket(byte buf[], int length,</span></span>
<span class="line"><span style="color:#7B7F8B;">             InetAddress address, int port)</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°ä¸€ï¼šå°è£…è¦å‘å‡ºå»çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°äºŒï¼šå‘é€å‡ºå»çš„æ•°æ®å¤§å°ï¼ˆå­—èŠ‚ä¸ªæ•°ï¼‰</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°ä¸‰ï¼šæœåŠ¡ç«¯çš„IPåœ°å€ï¼ˆæ‰¾åˆ°æœåŠ¡ç«¯ä¸»æœºï¼‰</span></span>
<span class="line"><span style="color:#7B7F8B;">               å‚æ•°å››ï¼šæœåŠ¡ç«¯ç¨‹åºçš„ç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;">             */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#97E1F1;font-style:italic;">Scanner</span><span style="color:#F6F6F4;"> scanner </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Scanner</span><span style="color:#F6F6F4;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">             </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> msg </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> scanner.</span><span style="color:#62E884;">next</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// ä¸€æ—¦å‘ç°ç”¨æˆ·è¾“å…¥çš„exitå‘½ä»¤ï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">exit</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">equals</span><span style="color:#F6F6F4;">(msg)){</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#F286C4;">break</span><span style="color:#F6F6F4;">; </span><span style="color:#7B7F8B;">// è·³å‡ºæ­»å¾ªç¯</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">DatagramPacket</span><span style="color:#F6F6F4;"> packet </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramPacket</span><span style="color:#F6F6F4;">(msg.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">(), msg.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">().length</span></span>
<span class="line"><span style="color:#F6F6F4;">                    , InetAddress.</span><span style="color:#62E884;">getLocalHost</span><span style="color:#F6F6F4;">(),  </span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 3ã€å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">            socket.</span><span style="color:#62E884;">send</span><span style="color:#F6F6F4;">(packet);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨ï¼šå®ç°å®¢æˆ·ç«¯åå¤çš„å‘ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> */</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#6A737D;">//        åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        DatagramSocket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramSocket</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6A737D;">/* public DatagramPacket(byte buf[], int length,</span></span>
<span class="line"><span style="color:#6A737D;">             InetAddress address, int port)</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°ä¸€ï¼šå°è£…è¦å‘å‡ºå»çš„æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°äºŒï¼šå‘é€å‡ºå»çš„æ•°æ®å¤§å°ï¼ˆå­—èŠ‚ä¸ªæ•°ï¼‰</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°ä¸‰ï¼šæœåŠ¡ç«¯çš„IPåœ°å€ï¼ˆæ‰¾åˆ°æœåŠ¡ç«¯ä¸»æœºï¼‰</span></span>
<span class="line"><span style="color:#6A737D;">               å‚æ•°å››ï¼šæœåŠ¡ç«¯ç¨‹åºçš„ç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#6A737D;">             */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">         Scanner scanner </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Scanner</span><span style="color:#24292E;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">             String msg </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scanner.</span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// ä¸€æ—¦å‘ç°ç”¨æˆ·è¾“å…¥çš„exitå‘½ä»¤ï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;exit&quot;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(msg)){</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// è·³å‡ºæ­»å¾ªç¯</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            DatagramPacket packet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramPacket</span><span style="color:#24292E;">(msg.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">(), msg.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">().length</span></span>
<span class="line"><span style="color:#24292E;">                    , InetAddress.</span><span style="color:#6F42C1;">getLocalHost</span><span style="color:#24292E;">(),  </span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 3ã€å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#24292E;">            socket.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(packet);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚ ServerSocket(port);</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  4ã€ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥æ”¶åˆ°ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œç„¶åé€šè¿‡è½¬æˆå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  5ã€å…³æµå’Œé‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">----æœåŠ¡ç«¯å¯åŠ¨----</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramSocket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramSocket</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[] buffer </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[</span><span style="color:#BF9EEE;">1024</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">64</span><span style="color:#F6F6F4;">]; </span><span style="color:#7B7F8B;">// 64KB.</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">DatagramPacket</span><span style="color:#F6F6F4;"> packet </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DatagramPacket</span><span style="color:#F6F6F4;">(buffer, buffer.length);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 3ã€å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®</span></span>
<span class="line"><span style="color:#F6F6F4;">            socket.</span><span style="color:#62E884;">receive</span><span style="color:#F6F6F4;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 4ã€ä»å­—èŠ‚æ•°ç»„ä¸­ï¼ŒæŠŠæ¥æ”¶åˆ°çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// æ¥æ”¶å¤šå°‘å°±å€’å‡ºå¤šå°‘</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// è·å–æœ¬æ¬¡æ•°æ®åŒ…æ¥æ”¶äº†å¤šå°‘æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> len </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> packet.</span><span style="color:#62E884;">getLength</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> rs </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">String</span><span style="color:#F6F6F4;">(buffer, </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;"> , len);</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(packet.</span><span style="color:#62E884;">getAddress</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getHostAddress</span><span style="color:#F6F6F4;">()</span><span style="color:#F286C4;">+</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">rs);</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">--------------------------------------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> *  1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚ ServerSocket(port);</span></span>
<span class="line"><span style="color:#6A737D;"> *  2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#6A737D;"> *  3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> *  4ã€ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥æ”¶åˆ°ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œç„¶åé€šè¿‡è½¬æˆå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#6A737D;"> *  5ã€å…³æµå’Œé‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;----æœåŠ¡ç«¯å¯åŠ¨----&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">        DatagramSocket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramSocket</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[] buffer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1024</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 64KB.</span></span>
<span class="line"><span style="color:#24292E;">        DatagramPacket packet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DatagramPacket</span><span style="color:#24292E;">(buffer, buffer.length);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 3ã€å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">            socket.</span><span style="color:#6F42C1;">receive</span><span style="color:#24292E;">(packet);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 4ã€ä»å­—èŠ‚æ•°ç»„ä¸­ï¼ŒæŠŠæ¥æ”¶åˆ°çš„æ•°æ®ç›´æ¥æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// æ¥æ”¶å¤šå°‘å°±å€’å‡ºå¤šå°‘</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// è·å–æœ¬æ¬¡æ•°æ®åŒ…æ¥æ”¶äº†å¤šå°‘æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> len </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> packet.</span><span style="color:#6F42C1;">getLength</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            String rs </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(buffer, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> , len);</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(packet.</span><span style="color:#6F42C1;">getAddress</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getHostAddress</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;:&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">rs);</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;--------------------------------------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä½œä¸š</p><p>ğŸš© 1. å‚è€ƒä¸‹åˆ—æç¤ºï¼Œå®ŒæˆUDPå…¥é—¨æ¡ˆä¾‹ï¼ˆ1å‘1æ¥ï¼‰</p><ul><li><strong>å‘é€ç«¯</strong></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 1. åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰ DatagramSocket</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 2. åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰ DatagramPacket</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 3. å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº† send</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 4. é‡Šæ”¾èµ„æºï¼ close</span></span>
<span class="line"><span style="color:#7B7F8B;"> *</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ä¹¦å†™ä»£ç </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> * 1. åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆå‘éŸ­èœå‡ºå»çš„äººï¼‰ DatagramSocket</span></span>
<span class="line"><span style="color:#6A737D;"> * 2. åˆ›å»ºæ•°æ®åŒ…å¯¹è±¡å°è£…è¦å‘å‡ºå»çš„æ•°æ®ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰ DatagramPacket</span></span>
<span class="line"><span style="color:#6A737D;"> * 3. å¼€å§‹æ­£å¼å‘é€è¿™ä¸ªæ•°æ®åŒ…çš„æ•°æ®å‡ºå»äº† send</span></span>
<span class="line"><span style="color:#6A737D;"> * 4. é‡Šæ”¾èµ„æºï¼ close</span></span>
<span class="line"><span style="color:#6A737D;"> *</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä¹¦å†™ä»£ç </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li><strong>æ¥æ”¶ç«¯</strong></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 1.  åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£   DatagramSocket</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰ DatagramPacket(æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦)</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 3. å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ® receive(åŒ…è£¹)</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 4. ä»åŒ…è£¹ä¸­è·å¾—æ•°æ®ï¼Œå¹¶ä¸”è§£ææˆString(byteæ•°ç»„ï¼Œ0ï¼ŒåŒ…è£¹çš„é•¿åº¦)</span></span>
<span class="line"><span style="color:#7B7F8B;"> * 5. é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ä¹¦å†™ä»£ç </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›®æ ‡ï¼šå®ŒæˆUDPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘</span></span>
<span class="line"><span style="color:#6A737D;"> * 1.  åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯å¯¹è±¡ï¼ˆåˆ›å»ºä¸€ä¸ªæ¥éŸ­èœçš„äººï¼‰ æ³¨å†Œç«¯å£   DatagramSocket</span></span>
<span class="line"><span style="color:#6A737D;"> * 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®çš„ï¼ˆåˆ›å»ºä¸€ä¸ªéŸ­èœç›˜å­ï¼‰ DatagramPacket(æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦)</span></span>
<span class="line"><span style="color:#6A737D;"> * 3. å¼€å§‹æ­£å¼ä½¿ç”¨æ•°æ®åŒ…æ¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ® receive(åŒ…è£¹)</span></span>
<span class="line"><span style="color:#6A737D;"> * 4. ä»åŒ…è£¹ä¸­è·å¾—æ•°æ®ï¼Œå¹¶ä¸”è§£ææˆString(byteæ•°ç»„ï¼Œ0ï¼ŒåŒ…è£¹çš„é•¿åº¦)</span></span>
<span class="line"><span style="color:#6A737D;"> * 5. é‡Šæ”¾èµ„æº</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä¹¦å†™ä»£ç </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="å››ã€tcpé€šä¿¡ä»£ç -æ¡ˆä¾‹-ğŸš©-âœï¸" tabindex="-1">å››ã€TCPé€šä¿¡ä»£ç ï¼ˆæ¡ˆä¾‹ï¼‰ ğŸš© âœï¸ <a class="header-anchor" href="#å››ã€tcpé€šä¿¡ä»£ç -æ¡ˆä¾‹-ğŸš©-âœï¸" aria-label="Permalink to &quot;å››ã€TCPé€šä¿¡ä»£ç ï¼ˆæ¡ˆä¾‹ï¼‰ ğŸš© âœï¸&quot;">â€‹</a></h2><p>å­¦ä¹ TCPé€šä¿¡çš„ä»£ç å®Œæˆç½‘ç»œé€šè®¯</p><p><strong>å‰ç½®çŸ¥è¯†:</strong></p><ol><li>socketåè®®æ˜¯é¢å‘è¿æ¥ã€é€šè®¯å¯é çš„åè®®</li><li>socketåè®®éœ€è¦ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œæ–­å¼€éœ€è¦4æ¬¡</li></ol><p><strong>Socketå®ŒæˆTCPé€šä¿¡çš„æµç¨‹ï¼š</strong></p><ol><li><strong>å½“åˆ›å»ºSocketå¯¹è±¡æ—¶</strong>ï¼Œå°±ä¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯<strong>åˆ›å»º</strong>ä¸€ä¸ªæ•°æ®<strong>é€šä¿¡çš„ç®¡é“</strong>ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯<strong>ä¸¤è¾¹éƒ½ä¼šæœ‰</strong>ä¸€ä¸ªSocket<strong>å¯¹è±¡</strong>æ¥<strong>è®¿é—®</strong>è¿™ä¸ªé€šä¿¡<strong>ç®¡é“</strong>ã€‚</li><li>ç°åœ¨å‡è®¾å®¢æˆ·ç«¯è¦å‘é€ä¸€ä¸ª<code>åœ¨ä¸€èµ·</code>ç»™æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯è¿™è¾¹å…ˆéœ€è¦é€šè¿‡Socketå¯¹è±¡è·å–åˆ°ä¸€ä¸ª<strong>å­—èŠ‚è¾“å‡ºæµ</strong>ï¼Œé€šè¿‡<strong>å­—èŠ‚è¾“å‡ºæµ</strong>å†™æ•°æ®åˆ°æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯è¿™è¾¹é€šè¿‡Socketå¯¹è±¡å¯ä»¥<strong>è·å–å­—èŠ‚è¾“å…¥æµ</strong>ï¼Œé€šè¿‡å­—èŠ‚è¾“å…¥æµå°±å¯ä»¥è¯»å–å®¢æˆ·ç«¯å†™è¿‡æ¥çš„æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</li><li>æœåŠ¡ç«¯å¤„ç†å®Œæ•°æ®ä¹‹åï¼Œå‡è®¾éœ€è¦æŠŠ<code>æ²¡æ„Ÿè§‰</code>å‘ç»™å®¢æˆ·ç«¯ç«¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯è¿™è¾¹å†é€šè¿‡Socketè·å–åˆ°ä¸€ä¸ª<strong>å­—èŠ‚è¾“å‡ºæµ</strong>ï¼Œ<strong>å°†æ•°æ®å†™ç»™å®¢æˆ·ç«¯</strong></li><li>å®¢æˆ·ç«¯è¿™è¾¹å†è·å–è¾“å…¥æµï¼Œé€šè¿‡å­—èŠ‚è¾“å…¥æµæ¥è¯»å–æœåŠ¡ç«¯å†™è¿‡æ¥çš„æ•°æ®ã€‚</li></ol><img src="`+m+'"><blockquote><p>æ³¨æ„ï¼šå†™ä»£ç ä¹‹å‰ä¸€å®šè¦ç†è§£ä¸Šå›¾ï¼Œä¸ç„¶è¾“å…¥å’Œè¾“å‡ºæµï¼Œå®¹æ˜“æ™•ï¼</p></blockquote><h3 id="_1ï¸âƒ£-4-1-tcpå…¥é—¨ç¨‹åº-è¯´ä¸€å¥è¯" tabindex="-1">1ï¸âƒ£ 4.1 TCPå…¥é—¨ç¨‹åº è¯´ä¸€å¥è¯ <a class="header-anchor" href="#_1ï¸âƒ£-4-1-tcpå…¥é—¨ç¨‹åº-è¯´ä¸€å¥è¯" aria-label="Permalink to &quot;1ï¸âƒ£ 4.1 TCPå…¥é—¨ç¨‹åº è¯´ä¸€å¥è¯&quot;">â€‹</a></h3><img src="'+b+`"><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Socket</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">127.0.0.1</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">OutputStream</span><span style="color:#F6F6F4;"> os </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getOutputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">        os.</span><span style="color:#62E884;">write</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">åœ¨ä¸€èµ·ï¼Œå¥½å—ï¼Ÿ</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">        os.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">(); </span><span style="color:#7B7F8B;">// é‡Šæ”¾è¿æ¥èµ„æº</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> */</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#24292E;">        Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Socket</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;127.0.0.1&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#24292E;">        OutputStream os </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getOutputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#24292E;">        os.</span><span style="color:#6F42C1;">write</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;åœ¨ä¸€èµ·ï¼Œå¥½å—ï¼Ÿ&quot;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">        os.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// é‡Šæ”¾è¿æ¥èµ„æº</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><img src="`+h+`"><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ServerSocket</span><span style="color:#F6F6F4;"> serverSocket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ServerSocket</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> serverSocket.</span><span style="color:#62E884;">accept</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">InputStream</span><span style="color:#F6F6F4;"> is </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getInputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">//        4åˆ›å»ºä¸€ä¸ªbyteæ•°ç»„æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[]  buffer</span><span style="color:#F286C4;">=</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[</span><span style="color:#BF9EEE;">1024</span><span style="color:#F6F6F4;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// 5ã€ä½¿ç”¨æ•°æ®è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#7B7F8B;">//        è·å¾—æ•°æ®é•¿åº¦</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> msglen </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> is.</span><span style="color:#62E884;">read</span><span style="color:#F6F6F4;">(buffer);</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> msg</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">String</span><span style="color:#F6F6F4;">(buffer, </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">, msglen);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(socket.</span><span style="color:#62E884;">getRemoteSocketAddress</span><span style="color:#F6F6F4;">()</span><span style="color:#F286C4;">+</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">---------------------------------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        is.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°1å‘1æ”¶ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        ServerSocket serverSocket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerSocket</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#24292E;">        Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> serverSocket.</span><span style="color:#6F42C1;">accept</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#24292E;">        InputStream is </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getInputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//        4åˆ›å»ºä¸€ä¸ªbyteæ•°ç»„æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[]  buffer</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1024</span><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 5ã€ä½¿ç”¨æ•°æ®è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#6A737D;">//        è·å¾—æ•°æ®é•¿åº¦</span></span>
<span class="line"><span style="color:#24292E;">         </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> msglen </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> is.</span><span style="color:#6F42C1;">read</span><span style="color:#24292E;">(buffer);</span></span>
<span class="line"><span style="color:#24292E;">         String msg</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(buffer, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, msglen);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(socket.</span><span style="color:#6F42C1;">getRemoteSocketAddress</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;:&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;---------------------------------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        is.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_2ï¸âƒ£-4-2-tcpå…¥é—¨ç¨‹åº-è¯´å¤šå¥è¯" tabindex="-1">2ï¸âƒ£ 4.2 TCPå…¥é—¨ç¨‹åº è¯´å¤šå¥è¯ <a class="header-anchor" href="#_2ï¸âƒ£-4-2-tcpå…¥é—¨ç¨‹åº-è¯´å¤šå¥è¯" aria-label="Permalink to &quot;2ï¸âƒ£ 4.2 TCPå…¥é—¨ç¨‹åº è¯´å¤šå¥è¯&quot;">â€‹</a></h3><p>å®ç°å®¢æˆ·ç«¯å¯ä»¥åå¤çš„å‘æ¶ˆæ¯å‡ºå»ï¼Œå®ç°æœåŠ¡ç«¯åå¤æ¥æ”¶æ¶ˆæ¯</p><ol><li>åå¤å‘ï¼Œåå¤æ¥æ”¶æ¶ˆæ¯ï¼Œè¯´æ˜è¦ç”¨åˆ°å¾ªç¯----&gt; <strong>æ­»å¾ªç¯</strong></li><li><strong>æ­»å¾ªç¯</strong>è¯´æ˜ç¨‹åºæ— æ³•åœæ­¢ï¼Œè¾“å…¥exitå‡ºå‘break è·³å‡ºå¾ªç¯ï¼Œç»“æŸç¨‹åº</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°å®¢æˆ·ç«¯å¯ä»¥åå¤çš„å‘æ¶ˆæ¯å‡ºå»</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Socket</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">127.0.0.1</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">OutputStream</span><span style="color:#F6F6F4;"> os </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getOutputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Scanner</span><span style="color:#F6F6F4;"> sc </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Scanner</span><span style="color:#F6F6F4;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">è¯·è¯´ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> msg </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> sc.</span><span style="color:#62E884;">nextLine</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// ä¸€æ—¦ç”¨æˆ·è¾“å…¥äº†exitï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯ç¨‹åº</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">exit</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">equals</span><span style="color:#F6F6F4;">(msg)){</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¬¢è¿æ‚¨ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                os.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#F286C4;">break</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">            os.</span><span style="color:#62E884;">write</span><span style="color:#F6F6F4;">(msg.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">            os.</span><span style="color:#62E884;">flush</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°å®¢æˆ·ç«¯å¯ä»¥åå¤çš„å‘æ¶ˆæ¯å‡ºå»</span></span>
<span class="line"><span style="color:#6A737D;"> */</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#24292E;">        Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Socket</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;127.0.0.1&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#24292E;">        OutputStream os </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getOutputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Scanner sc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Scanner</span><span style="color:#24292E;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;è¯·è¯´ï¼š&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            String msg </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> sc.</span><span style="color:#6F42C1;">nextLine</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// ä¸€æ—¦ç”¨æˆ·è¾“å…¥äº†exitï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯ç¨‹åº</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;exit&quot;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(msg)){</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ¬¢è¿æ‚¨ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                os.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#24292E;">            os.</span><span style="color:#6F42C1;">write</span><span style="color:#24292E;">(msg.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">            os.</span><span style="color:#6F42C1;">flush</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°æœåŠ¡ç«¯åå¤å‘æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">       System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ServerSocket</span><span style="color:#F6F6F4;"> serverSocket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ServerSocket</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> serverSocket.</span><span style="color:#62E884;">accept</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">InputStream</span><span style="color:#F6F6F4;"> is </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getInputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">//        4åˆ›å»ºä¸€ä¸ªbyteæ•°ç»„æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[]  buffer</span><span style="color:#F286C4;">=</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[</span><span style="color:#BF9EEE;">1024</span><span style="color:#F6F6F4;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#7B7F8B;">// 5ã€ä½¿ç”¨è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> msglen </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> is.</span><span style="color:#62E884;">read</span><span style="color:#F6F6F4;">(buffer);</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> msg</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">String</span><span style="color:#F6F6F4;">(buffer, </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">, msglen);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(socket.</span><span style="color:#62E884;">getRemoteSocketAddress</span><span style="color:#F6F6F4;">()</span><span style="color:#F286C4;">+</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">---------------------------------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(socket.</span><span style="color:#62E884;">getRemoteSocketAddress</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ç¦»çº¿äº†ï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                is.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#F286C4;">break</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šå®ç°æœåŠ¡ç«¯åå¤å‘æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">       System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        ServerSocket serverSocket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerSocket</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#24292E;">        Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> serverSocket.</span><span style="color:#6F42C1;">accept</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 3ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚</span></span>
<span class="line"><span style="color:#24292E;">        InputStream is </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getInputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">//        4åˆ›å»ºä¸€ä¸ªbyteæ•°ç»„æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[]  buffer</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1024</span><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">// 5ã€ä½¿ç”¨è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> msglen </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> is.</span><span style="color:#6F42C1;">read</span><span style="color:#24292E;">(buffer);</span></span>
<span class="line"><span style="color:#24292E;">                String msg</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(buffer, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, msglen);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(socket.</span><span style="color:#6F42C1;">getRemoteSocketAddress</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;:&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">msg);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;---------------------------------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(socket.</span><span style="color:#6F42C1;">getRemoteSocketAddress</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ç¦»çº¿äº†ï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                is.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3ï¸âƒ£-4-3-tcpå…¥é—¨ç¨‹åº-çº¿ç¨‹æ± ä¼˜åŒ–-ğŸ-âœï¸" tabindex="-1">3ï¸âƒ£ 4.3 TCPå…¥é—¨ç¨‹åº çº¿ç¨‹æ± ä¼˜åŒ– ğŸ âœï¸ <a class="header-anchor" href="#_3ï¸âƒ£-4-3-tcpå…¥é—¨ç¨‹åº-çº¿ç¨‹æ± ä¼˜åŒ–-ğŸ-âœï¸" aria-label="Permalink to &quot;3ï¸âƒ£ 4.3 TCPå…¥é—¨ç¨‹åº çº¿ç¨‹æ± ä¼˜åŒ– ğŸ âœï¸&quot;">â€‹</a></h3><p>ä¸ºäº†è®©æœåŠ¡ç«¯èƒ½å¤Ÿæ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯é€šä¿¡ï¼Œå°±éœ€è¦ç”¨åˆ°å¤šçº¿ç¨‹æŠ€æœ¯ã€‚å…·ä½“çš„å®ç°æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ¯å½“æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯è¿™è¾¹å°±ä¸ºSocketå¼€å¯ä¸€æ¡çº¿ç¨‹å–æ‰§è¡Œè¯»å–æ•°æ®çš„æ“ä½œï¼Œæ¥å¤šå°‘ä¸ªå®¢æˆ·ç«¯ï¼Œå°±æœ‰å¤šå°‘æ¡çº¿ç¨‹ã€‚æŒ‰ç…§è¿™æ ·çš„è®¾è®¡ï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯è¿æ¥äº†ã€‚</p><img src="`+f+`"><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°å®¢æˆ·ç«¯å¯ä»¥åå¤çš„å‘æ¶ˆæ¯å‡ºå»</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  1. å’Œä¸Šè¿°æ¡ˆä¾‹ä¸€æ ·</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Client</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Socket</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">127.0.0.1</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">OutputStream</span><span style="color:#F6F6F4;"> os </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getOutputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">Scanner</span><span style="color:#F6F6F4;"> sc </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Scanner</span><span style="color:#F6F6F4;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">è¯·è¯´ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> msg </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> sc.</span><span style="color:#62E884;">nextLine</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// ä¸€æ—¦ç”¨æˆ·è¾“å…¥äº†exitï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯ç¨‹åº</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">exit</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">equals</span><span style="color:#F6F6F4;">(msg)){</span></span>
<span class="line"><span style="color:#F6F6F4;">                System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¬¢è¿æ‚¨ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                os.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                socket.</span><span style="color:#62E884;">close</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#F286C4;">break</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#F6F6F4;">            os.</span><span style="color:#62E884;">write</span><span style="color:#F6F6F4;">(msg.</span><span style="color:#62E884;">getBytes</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"><span style="color:#F6F6F4;">            os.</span><span style="color:#62E884;">flush</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-å®¢æˆ·ç«¯å¼€å‘ï¼šå®ç°å®¢æˆ·ç«¯å¯ä»¥åå¤çš„å‘æ¶ˆæ¯å‡ºå»</span></span>
<span class="line"><span style="color:#6A737D;"> *  1. å’Œä¸Šè¿°æ¡ˆä¾‹ä¸€æ ·</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Client</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚(ipå’Œç«¯å£æ˜¯æœåŠ¡ç«¯çš„)</span></span>
<span class="line"><span style="color:#24292E;">        Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Socket</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;127.0.0.1&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span></span>
<span class="line"><span style="color:#24292E;">        OutputStream os </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getOutputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Scanner sc </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Scanner</span><span style="color:#24292E;">(System.in);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;è¯·è¯´ï¼š&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            String msg </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> sc.</span><span style="color:#6F42C1;">nextLine</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// ä¸€æ—¦ç”¨æˆ·è¾“å…¥äº†exitï¼Œå°±é€€å‡ºå®¢æˆ·ç«¯ç¨‹åº</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;exit&quot;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">equals</span><span style="color:#24292E;">(msg)){</span></span>
<span class="line"><span style="color:#24292E;">                System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ¬¢è¿æ‚¨ä¸‹æ¬¡å…‰ä¸´ï¼é€€å‡ºæˆåŠŸï¼&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                os.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                socket.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 4ã€å¼€å§‹å†™æ•°æ®å‡ºå»äº†</span></span>
<span class="line"><span style="color:#24292E;">            os.</span><span style="color:#6F42C1;">write</span><span style="color:#24292E;">(msg.</span><span style="color:#6F42C1;">getBytes</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">            os.</span><span style="color:#6F42C1;">flush</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šè¦æ±‚å®ç°ä¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡ã€‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  1. åœ¨æ­»å¾ªç¯å†…ï¼Œä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#7B7F8B;"> *  2. ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å¤šä¸ªäººçš„æ¶ˆæ¯ï¼ˆå‘é€ç«¯ä¸å˜ï¼‰</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Server</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">throws</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">ServerSocket</span><span style="color:#F6F6F4;"> serverSocket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ServerSocket</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">22222</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">         </span><span style="color:#97E1F1;font-style:italic;">ExecutorService</span><span style="color:#F6F6F4;"> executorService </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Executors.</span><span style="color:#62E884;">newFixedThreadPool</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> serverSocket.</span><span style="color:#62E884;">accept</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æœ‰äººä¸Šçº¿äº†ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getRemoteSocketAddress</span><span style="color:#F6F6F4;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// 3ã€æŠŠè¿™ä¸ªå®¢æˆ·ç«¯å¯¹åº”çš„socketé€šä¿¡ç®¡é“ï¼Œäº¤ç»™ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è´Ÿè´£å¤„ç†ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">            executorService.</span><span style="color:#62E884;">submit</span><span style="color:#F6F6F4;">(</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ServerReaderRunnable</span><span style="color:#F6F6F4;">(socket));</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> *  ç›®æ ‡ï¼šå®ŒæˆTCPé€šä¿¡å¿«é€Ÿå…¥é—¨-æœåŠ¡ç«¯å¼€å‘ï¼šè¦æ±‚å®ç°ä¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡ã€‚</span></span>
<span class="line"><span style="color:#6A737D;"> *  1. åœ¨æ­»å¾ªç¯å†…ï¼Œä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#6A737D;"> *  2. ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å¤šä¸ªäººçš„æ¶ˆæ¯ï¼ˆå‘é€ç«¯ä¸å˜ï¼‰</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">throws</span><span style="color:#24292E;"> Exception {</span></span>
<span class="line"><span style="color:#24292E;">        System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ-------&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 1ã€åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span></span>
<span class="line"><span style="color:#24292E;">        ServerSocket serverSocket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerSocket</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">22222</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">         ExecutorService executorService </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Executors.</span><span style="color:#6F42C1;">newFixedThreadPool</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 2ã€ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span></span>
<span class="line"><span style="color:#24292E;">            Socket socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> serverSocket.</span><span style="color:#6F42C1;">accept</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ‰äººä¸Šçº¿äº†ï¼š&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getRemoteSocketAddress</span><span style="color:#24292E;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// 3ã€æŠŠè¿™ä¸ªå®¢æˆ·ç«¯å¯¹åº”çš„socketé€šä¿¡ç®¡é“ï¼Œäº¤ç»™ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è´Ÿè´£å¤„ç†ã€‚</span></span>
<span class="line"><span style="color:#24292E;">            executorService.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerReaderRunnable</span><span style="color:#24292E;">(socket));</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * è¯»å–æ¶ˆæ¯çš„æ‰§è¡Œç¨‹åº</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">ServerReaderRunnable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">implements</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Runnable</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> socket;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ServerReaderRunnable</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">Socket</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">socket</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#BF9EEE;font-style:italic;">this</span><span style="color:#F6F6F4;">.socket </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Override</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">InputStream</span><span style="color:#F6F6F4;"> is </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> socket.</span><span style="color:#62E884;">getInputStream</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[] bytes</span><span style="color:#F286C4;">=</span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">byte</span><span style="color:#F6F6F4;">[</span><span style="color:#BF9EEE;">1024</span><span style="color:#F6F6F4;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">while</span><span style="color:#F6F6F4;"> (</span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#7B7F8B;">// ä½¿ç”¨æ•°æ®è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#F6F6F4;">                </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">                    </span><span style="color:#97E1F1;font-style:italic;">int</span><span style="color:#F6F6F4;"> len </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> is.</span><span style="color:#62E884;">read</span><span style="color:#F6F6F4;">(bytes); </span><span style="color:#7B7F8B;">//ä¼ è¿‡æ¥çš„æ•°æ®é•¿åº¦</span></span>
<span class="line"><span style="color:#F6F6F4;">                    </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> s </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">String</span><span style="color:#F6F6F4;">(bytes, </span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">, len);</span></span>
<span class="line"><span style="color:#F6F6F4;">                    System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(Thread.</span><span style="color:#62E884;">currentThread</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">()</span><span style="color:#F286C4;">+</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">çº¿ç¨‹è´Ÿè´£ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">socket.</span><span style="color:#62E884;">getRemoteSocketAddress</span><span style="color:#F6F6F4;">()</span><span style="color:#F286C4;">+</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;">s);</span><span style="color:#7B7F8B;">//æ‰“å°ä¸€ä¸‹</span></span>
<span class="line"><span style="color:#F6F6F4;">                } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">                    System.out.</span><span style="color:#62E884;">println</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">bbqï¼š</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">                    </span><span style="color:#F286C4;">break</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">                }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"><span style="color:#F6F6F4;">        } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (</span><span style="color:#97E1F1;font-style:italic;">Exception</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">            e.</span><span style="color:#62E884;">printStackTrace</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">        }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * è¯»å–æ¶ˆæ¯çš„æ‰§è¡Œç¨‹åº</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerReaderRunnable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Runnable</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Socket socket;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ServerReaderRunnable</span><span style="color:#24292E;">(Socket </span><span style="color:#E36209;">socket</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.socket </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Override</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            InputStream is </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> socket.</span><span style="color:#6F42C1;">getInputStream</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[] bytes</span><span style="color:#D73A49;">=new</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">byte</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">1024</span><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">// ä½¿ç”¨æ•°æ®è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> len </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> is.</span><span style="color:#6F42C1;">read</span><span style="color:#24292E;">(bytes); </span><span style="color:#6A737D;">//ä¼ è¿‡æ¥çš„æ•°æ®é•¿åº¦</span></span>
<span class="line"><span style="color:#24292E;">                    String s </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(bytes, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, len);</span></span>
<span class="line"><span style="color:#24292E;">                    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(Thread.</span><span style="color:#6F42C1;">currentThread</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;çº¿ç¨‹è´Ÿè´£ï¼š&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">socket.</span><span style="color:#6F42C1;">getRemoteSocketAddress</span><span style="color:#24292E;">()</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">&quot;ï¼š&quot;</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">s);</span><span style="color:#6A737D;">//æ‰“å°ä¸€ä¸‹</span></span>
<span class="line"><span style="color:#24292E;">                } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">                    System.out.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;bbqï¼š&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#D73A49;">break</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">                }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (Exception </span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">            e.</span><span style="color:#6F42C1;">printStackTrace</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,117),w=[q];function P(_,x,I,T,j,R){return n(),a("div",null,w)}const U=s(v,[["render",P]]);export{O as __pageData,U as default};
