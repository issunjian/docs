import{_ as s,o as a,c as n,V as l}from"./chunks/framework.c6d8cbec.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"home/springbootå¸¸ç”¨æ³¨è§£.md","filePath":"home/springbootå¸¸ç”¨æ³¨è§£.md"}'),p={name:"home/springbootå¸¸ç”¨æ³¨è§£.md"},o=l(`<h2 id="springbootå…¥é—¨-spring-springbootå¸¸ç”¨æ³¨è§£" tabindex="-1">SpringBootå…¥é—¨ - Spring/SpringBootå¸¸ç”¨æ³¨è§£ <a class="header-anchor" href="#springbootå…¥é—¨-spring-springbootå¸¸ç”¨æ³¨è§£" aria-label="Permalink to &quot;SpringBootå…¥é—¨ - Spring/SpringBootå¸¸ç”¨æ³¨è§£&quot;">â€‹</a></h2><h2 id="_1-springbootç›¸å…³" tabindex="-1">1.SpringBootç›¸å…³ <a class="header-anchor" href="#_1-springbootç›¸å…³" aria-label="Permalink to &quot;1.SpringBootç›¸å…³&quot;">â€‹</a></h2><h3 id="_1-1-springbootapplication" tabindex="-1">1.1 <code>@SpringBootApplication</code> <a class="header-anchor" href="#_1-1-springbootapplication" aria-label="Permalink to &quot;1.1 \`@SpringBootApplication\`&quot;">â€‹</a></h3><p>æ ‡è¯†è¿™æ˜¯ä¸€ä¸ª Spring Boot åº”ç”¨ï¼Œç”¨æ¥å¼€å¯ Spring Boot çš„å„é¡¹èƒ½åŠ›ã€‚</p><p><em>è¿™ä¸ªæ³¨è§£æ˜¯ Spring Boot é¡¹ç›®çš„åŸºçŸ³ï¼Œæ˜¯ä¸€ä¸ªå¼•å¯¼ç±»ï¼Œåˆ›å»º SpringBoot é¡¹ç›®ä¹‹åä¼šé»˜è®¤åœ¨ä¸»ç±»åŠ ä¸Šã€‚</em></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">SpringBootApplication</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">SpringSecurityJwtGuideApplication</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">main</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">java</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">lang</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;">[] </span><span style="color:#FFB86C;font-style:italic;">args</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        SpringApplication.</span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">(SpringSecurityJwtGuideApplication.class, args);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootApplication</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SpringSecurityJwtGuideApplication</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">main</span><span style="color:#24292E;">(java.lang.</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">[] </span><span style="color:#E36209;">args</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        SpringApplication.</span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(SpringSecurityJwtGuideApplication.class, args);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥æŠŠ <code>@SpringBootApplication</code>çœ‹ä½œæ˜¯ <code>@Configuration</code>ã€<code>@EnableAutoConfiguration</code>ã€<code>@ComponentScan</code> æ³¨è§£çš„é›†åˆã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">package</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">org.springframework.boot.autoconfigure</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Target</span><span style="color:#F6F6F4;">(ElementType.TYPE)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Retention</span><span style="color:#F6F6F4;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Documented</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Inherited</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">SpringBootConfiguration</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">//å…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">EnableAutoConfiguration</span><span style="color:#7B7F8B;">//å¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ComponentScan</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">excludeFilters</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">		@</span><span style="color:#97E1F1;font-style:italic;">Filter</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">type</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> FilterType.CUSTOM, </span><span style="color:#BF9EEE;">classes</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> TypeExcludeFilter.class),</span></span>
<span class="line"><span style="color:#F6F6F4;">		@</span><span style="color:#97E1F1;font-style:italic;">Filter</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">type</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> FilterType.CUSTOM, </span><span style="color:#BF9EEE;">classes</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> AutoConfigurationExcludeFilter.class) })</span><span style="color:#7B7F8B;">//æ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> @</span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">SpringBootApplication</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">   ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">package</span><span style="color:#24292E;"> org.springframework.boot.autoconfigure;</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Target</span><span style="color:#24292E;">(ElementType.TYPE)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Retention</span><span style="color:#24292E;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Documented</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Inherited</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootConfiguration</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">//å…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EnableAutoConfiguration</span><span style="color:#6A737D;">//å¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ComponentScan</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">excludeFilters</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">		@</span><span style="color:#D73A49;">Filter</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> FilterType.CUSTOM, </span><span style="color:#005CC5;">classes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> TypeExcludeFilter.class),</span></span>
<span class="line"><span style="color:#24292E;">		@</span><span style="color:#D73A49;">Filter</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">type</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> FilterType.CUSTOM, </span><span style="color:#005CC5;">classes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> AutoConfigurationExcludeFilter.class) })</span><span style="color:#6A737D;">//æ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SpringBootApplication</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">   ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">package</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">org.springframework.boot</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Target</span><span style="color:#F6F6F4;">(ElementType.TYPE)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Retention</span><span style="color:#F6F6F4;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Documented</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Configuration</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">//å£°æ˜å½“å‰ç±»æ˜¯é…ç½®ç±»</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> @</span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">SpringBootConfiguration</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">package</span><span style="color:#24292E;"> org.springframework.boot;</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Target</span><span style="color:#24292E;">(ElementType.TYPE)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Retention</span><span style="color:#24292E;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Documented</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">//å£°æ˜å½“å‰ç±»æ˜¯é…ç½®ç±»</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SpringBootConfiguration</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ ¹æ® SpringBoot å®˜ç½‘ï¼Œè¿™ä¸‰ä¸ªæ³¨è§£çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>@EnableAutoConfiguration</code>ï¼šå¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶</li><li><code>@ComponentScan</code>ï¼š æ‰«æè¢«<code>@Component</code> (<code>@Repository</code>,<code>@Service</code>,<code>@Controller</code>)æ³¨è§£çš„ beanï¼Œæ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚</li><li><code>@SpringBootConfiguration</code>ï¼šå…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»</li></ul><h3 id="_1-2-enableautoconfiguration-ğŸ‘ˆ" tabindex="-1">1.2 <code>@EnableAutoConfiguration</code> ğŸ‘ˆ <a class="header-anchor" href="#_1-2-enableautoconfiguration-ğŸ‘ˆ" aria-label="Permalink to &quot;1.2 \`@EnableAutoConfiguration\` ğŸ‘ˆ&quot;">â€‹</a></h3><p>å¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶ã€‚</p><p><strong>åˆ©ç”¨<code>@Import</code>æ³¨è§£ï¼Œå°†æ‰€æœ‰ç¬¦åˆè‡ªåŠ¨è£…é…æ¡ä»¶çš„beanæ³¨å…¥åˆ°IOCå®¹å™¨ä¸­</strong></p><h3 id="_1-3-springbootconfigurationæ³¨è§£-ğŸ‘ˆ" tabindex="-1">1.3 <code>@SpringBootConfiguration</code>æ³¨è§£ ğŸ‘ˆ <a class="header-anchor" href="#_1-3-springbootconfigurationæ³¨è§£-ğŸ‘ˆ" aria-label="Permalink to &quot;1.3 \`@SpringBootConfiguration\`æ³¨è§£ ğŸ‘ˆ&quot;">â€‹</a></h3><p>è¿™ä¸ªæ³¨è§£æ›´ç®€å•äº†ï¼Œå®ƒåªæ˜¯å¯¹<code>Configuration</code>æ³¨è§£çš„ä¸€ä¸ªå°è£…è€Œå·²</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Target</span><span style="color:#F6F6F4;">({ElementType.TYPE})</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Retention</span><span style="color:#F6F6F4;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Documented</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Configuration</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;">//å£°æ˜å½“å‰ç±»æ˜¯é…ç½®ç±»</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> @</span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">SpringBootConfiguration</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Target</span><span style="color:#24292E;">({ElementType.TYPE})</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Retention</span><span style="color:#24292E;">(RetentionPolicy.RUNTIME)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Documented</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">//å£°æ˜å½“å‰ç±»æ˜¯é…ç½®ç±»</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SpringBootConfiguration</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_1-4-enableconfigurationproperties-ğŸ‘ˆ" tabindex="-1">1.4 <strong>@EnableConfigurationProperties</strong> ğŸ‘ˆ <a class="header-anchor" href="#_1-4-enableconfigurationproperties-ğŸ‘ˆ" aria-label="Permalink to &quot;1.4 **@EnableConfigurationProperties** ğŸ‘ˆ&quot;">â€‹</a></h3><p>ä¸€èˆ¬è¦é…åˆ <code>@ConfigurationProperties</code> æ³¨è§£ä½¿ç”¨ï¼Œç”¨æ¥å¼€å¯å¯¹ <code>@ConfigurationProperties</code> æ³¨è§£é…ç½® Bean çš„æ”¯æŒã€‚</p><h3 id="_1-5-import-ğŸ‘ˆ" tabindex="-1">1.5 <strong>@Import</strong> ğŸ‘ˆ <a class="header-anchor" href="#_1-5-import-ğŸ‘ˆ" aria-label="Permalink to &quot;1.5 **@Import** ğŸ‘ˆ&quot;">â€‹</a></h3><p>è¿™æ˜¯ Spring 3.0 æ·»åŠ çš„æ–°æ³¨è§£ï¼Œç”¨æ¥å¯¼å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ª <code>@Configuration</code> æ³¨è§£ä¿®é¥°çš„ç±»ï¼Œè¿™åœ¨ Spring Boot é‡Œé¢åº”ç”¨å¾ˆå¤šã€‚</p><blockquote><p><strong>@Import æ³¨è§£çš„æœ€ä¸»è¦åŠŸèƒ½å°±æ˜¯å¯¼å…¥é¢å¤–çš„é…ç½®ä¿¡æ¯</strong> ğŸ‘ˆ</p></blockquote><h3 id="_1-6-conditional-åŠå…¶ç›¸å…³" tabindex="-1">1.6 <strong>@Conditional</strong> åŠå…¶ç›¸å…³ <a class="header-anchor" href="#_1-6-conditional-åŠå…¶ç›¸å…³" aria-label="Permalink to &quot;1.6 **@Conditional** åŠå…¶ç›¸å…³&quot;">â€‹</a></h3><h4 id="_1-6-1-conditional" tabindex="-1">1.6.1 <strong>@Conditional</strong> <a class="header-anchor" href="#_1-6-1-conditional" aria-label="Permalink to &quot;1.6.1 **@Conditional**&quot;">â€‹</a></h4><p>è¿™æ˜¯ Spring 4.0 æ·»åŠ çš„æ–°æ³¨è§£ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ª Spring Bean æˆ–è€… Configuration é…ç½®æ–‡ä»¶ï¼Œå½“æ»¡è¶³æŒ‡å®šçš„æ¡ä»¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-2-conditionalonbean" tabindex="-1">1.6.2 <strong>@ConditionalOnBean</strong> <a class="header-anchor" href="#_1-6-2-conditionalonbean" aria-label="Permalink to &quot;1.6.2 **@ConditionalOnBean**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“å®¹å™¨ä¸­æœ‰æŒ‡å®šçš„ Bean æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-3-conditionalonmissingbean" tabindex="-1">1.6.3 <strong>@ConditionalOnMissingBean</strong> <a class="header-anchor" href="#_1-6-3-conditionalonmissingbean" aria-label="Permalink to &quot;1.6.3 **@ConditionalOnMissingBean**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå’Œ <code>@ConditionalOnBean</code> æ³¨è§£ç›¸åï¼Œå½“å®¹å™¨ä¸­æ²¡æœ‰æŒ‡å®šçš„ Bean æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-4-conditionalonclass" tabindex="-1">1.6.4 <strong>@ConditionalOnClass</strong> <a class="header-anchor" href="#_1-6-4-conditionalonclass" aria-label="Permalink to &quot;1.6.4 **@ConditionalOnClass**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“å®¹å™¨ä¸­æœ‰æŒ‡å®šçš„ Class æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-5-conditionalonmissingclass" tabindex="-1">1.6.5 <strong>@ConditionalOnMissingClass</strong> <a class="header-anchor" href="#_1-6-5-conditionalonmissingclass" aria-label="Permalink to &quot;1.6.5 **@ConditionalOnMissingClass**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå’Œ <code>@ConditionalOnMissingClass</code> æ³¨è§£ç›¸åï¼Œå½“å®¹å™¨ä¸­æ²¡æœ‰æŒ‡å®šçš„ Class æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-6-conditionalonwebapplication" tabindex="-1">1.6.6 <strong>@ConditionalOnWebApplication</strong> <a class="header-anchor" href="#_1-6-6-conditionalonwebapplication" aria-label="Permalink to &quot;1.6.6 **@ConditionalOnWebApplication**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“å‰é¡¹ç›®ç±»å‹æ˜¯ WEB é¡¹ç›®æ‰å¼€å¯é…ç½®ã€‚</p><p>å½“å‰é¡¹ç›®æœ‰ä»¥ä¸‹ 3 ç§ç±»å‹ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">enum</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Type</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * Any web application will match.</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">ANY</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * Only servlet-based web application will match.</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">SERVLET</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * Only reactive-based web application will match.</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">REACTIVE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Type</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * Any web application will match.</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">ANY</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * Only servlet-based web application will match.</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">SERVLET</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * Only reactive-based web application will match.</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">REACTIVE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_1-6-7-conditionalonnotwebapplication" tabindex="-1">1.6.7 <strong>@ConditionalOnNotWebApplication</strong> <a class="header-anchor" href="#_1-6-7-conditionalonnotwebapplication" aria-label="Permalink to &quot;1.6.7 **@ConditionalOnNotWebApplication**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå’Œ <code>@ConditionalOnWebApplication</code> æ³¨è§£ç›¸åï¼Œå½“å‰é¡¹ç›®ç±»å‹ä¸æ˜¯ WEB é¡¹ç›®æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-8-conditionalonproperty" tabindex="-1">1.6.8 <strong>@ConditionalOnProperty</strong> <a class="header-anchor" href="#_1-6-8-conditionalonproperty" aria-label="Permalink to &quot;1.6.8 **@ConditionalOnProperty**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-9-conditionalonexpression" tabindex="-1"><strong>1.6.9 @ConditionalOnExpression</strong> <a class="header-anchor" href="#_1-6-9-conditionalonexpression" aria-label="Permalink to &quot;**1.6.9 @ConditionalOnExpression**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“ SpEL è¡¨è¾¾å¼ä¸º true æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-10-conditionalonjava" tabindex="-1">1.6.10 <strong>@ConditionalOnJava</strong> <a class="header-anchor" href="#_1-6-10-conditionalonjava" aria-label="Permalink to &quot;1.6.10 **@ConditionalOnJava**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“è¿è¡Œçš„ Java JVM åœ¨æŒ‡å®šçš„ç‰ˆæœ¬èŒƒå›´æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-11-conditionalonresource" tabindex="-1"><strong>1.6.11 @ConditionalOnResource</strong> <a class="header-anchor" href="#_1-6-11-conditionalonresource" aria-label="Permalink to &quot;**1.6.11 @ConditionalOnResource**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“ç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šçš„èµ„æºæ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-12-conditionalonjndi" tabindex="-1">1.6.12 <strong>@ConditionalOnJndi</strong> <a class="header-anchor" href="#_1-6-12-conditionalonjndi" aria-label="Permalink to &quot;1.6.12 **@ConditionalOnJndi**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“æŒ‡å®šçš„ JNDI å­˜åœ¨æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-13-conditionaloncloudplatform" tabindex="-1"><strong>1.6.13 @ConditionalOnCloudPlatform</strong> <a class="header-anchor" href="#_1-6-13-conditionaloncloudplatform" aria-label="Permalink to &quot;**1.6.13 @ConditionalOnCloudPlatform**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“æŒ‡å®šçš„äº‘å¹³å°æ¿€æ´»æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-14-conditionalonsinglecandidate" tabindex="-1"><strong>1.6.14 @ConditionalOnSingleCandidate</strong> <a class="header-anchor" href="#_1-6-14-conditionalonsinglecandidate" aria-label="Permalink to &quot;**1.6.14 @ConditionalOnSingleCandidate**&quot;">â€‹</a></h4><p>ç»„åˆ <code>@Conditional</code> æ³¨è§£ï¼Œå½“æŒ‡å®šçš„ class åœ¨å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª Beanï¼Œæˆ–è€…åŒæ—¶æœ‰å¤šä¸ªä½†ä¸ºé¦–é€‰æ—¶æ‰å¼€å¯é…ç½®ã€‚</p><h4 id="_1-6-15-configurationproperties-ğŸ‘ˆ" tabindex="-1"><strong>1.6.15 @ConfigurationProperties</strong> ğŸ‘ˆ <a class="header-anchor" href="#_1-6-15-configurationproperties-ğŸ‘ˆ" aria-label="Permalink to &quot;**1.6.15 @ConfigurationProperties** ğŸ‘ˆ&quot;">â€‹</a></h4><p>ç”¨æ¥åŠ è½½é¢å¤–çš„é…ç½®ï¼ˆå¦‚ .properties æ–‡ä»¶ï¼‰ï¼Œå¯ç”¨åœ¨ <code>@Configuration</code> æ³¨è§£ç±»ï¼Œæˆ–è€… <code>@Bean</code> æ³¨è§£æ–¹æ³•ä¸Šé¢ã€‚</p><h2 id="_2-spring-bean-ç›¸å…³" tabindex="-1">2. Spring Bean ç›¸å…³ <a class="header-anchor" href="#_2-spring-bean-ç›¸å…³" aria-label="Permalink to &quot;2\\. Spring Bean ç›¸å…³&quot;">â€‹</a></h2><h3 id="_2-1-autowired-ğŸ‘ˆ" tabindex="-1">2.1. <code>@Autowired</code> ğŸ‘ˆ <a class="header-anchor" href="#_2-1-autowired-ğŸ‘ˆ" aria-label="Permalink to &quot;2.1. \`@Autowired\` ğŸ‘ˆ&quot;">â€‹</a></h3><p>è‡ªåŠ¨å¯¼å…¥å¯¹è±¡åˆ°ç±»ä¸­ï¼Œè¢«æ³¨å…¥è¿›çš„ç±»åŒæ ·è¦è¢« Spring å®¹å™¨ç®¡ç†æ¯”å¦‚ï¼šService ç±»æ³¨å…¥åˆ° Controller ç±»ä¸­ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Service</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">UserService</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RestController</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RequestMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/users</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">UserController</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">   @</span><span style="color:#97E1F1;font-style:italic;">Autowired</span></span>
<span class="line"><span style="color:#F6F6F4;">   </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">UserService</span><span style="color:#F6F6F4;"> userService;</span></span>
<span class="line"><span style="color:#F6F6F4;">   ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Service</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">UserService</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RestController</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/users&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">UserController</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">   @</span><span style="color:#D73A49;">Autowired</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> UserService userService;</span></span>
<span class="line"><span style="color:#24292E;">   ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_2-2-component-repository-service-controller-ğŸ‘ˆ" tabindex="-1">2.2. <code>@Component</code>,<code>@Repository</code>,<code>@Service</code>, <code>@Controller</code> ğŸ‘ˆ <a class="header-anchor" href="#_2-2-component-repository-service-controller-ğŸ‘ˆ" aria-label="Permalink to &quot;2.2. \`@Component\`,\`@Repository\`,\`@Service\`, \`@Controller\` ğŸ‘ˆ&quot;">â€‹</a></h3><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ <code>@Autowired</code> æ³¨è§£è®© Spring å®¹å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨è£…é… beanã€‚è¦æƒ³æŠŠç±»æ ‡è¯†æˆå¯ç”¨äº <code>@Autowired</code> æ³¨è§£è‡ªåŠ¨è£…é…çš„ bean çš„ç±»,å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ³¨è§£å®ç°ï¼š</p><ul><li><code>@Component</code> ï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º <code>Spring</code> ç»„ä»¶ã€‚å¦‚æœä¸€ä¸ª Bean ä¸çŸ¥é“å±äºå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨<code>@Component</code> æ³¨è§£æ ‡æ³¨ã€‚</li><li><code>@Repository</code> : å¯¹åº”æŒä¹…å±‚å³ Dao å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œã€‚</li><li><code>@Service</code> : å¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° Dao å±‚ã€‚</li><li><code>@Controller</code> : å¯¹åº” Spring MVC æ§åˆ¶å±‚ï¼Œä¸»è¦ç”¨äºæ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ Service å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢ã€‚</li></ul><h3 id="_2-3-restcontroller-ğŸ‘ˆ" tabindex="-1">2.3. <code>@RestController</code> ğŸ‘ˆ <a class="header-anchor" href="#_2-3-restcontroller-ğŸ‘ˆ" aria-label="Permalink to &quot;2.3. \`@RestController\` ğŸ‘ˆ&quot;">â€‹</a></h3><p><code>@RestController</code>æ³¨è§£æ˜¯<code>@Controller</code>å’Œ<code>@ResponseBody</code>çš„åˆé›†,è¡¨ç¤ºè¿™æ˜¯ä¸ªæ§åˆ¶å™¨ bean,å¹¶ä¸”æ˜¯å°†å‡½æ•°çš„è¿”å›å€¼ç›´æ¥å¡«å…¥ HTTP å“åº”ä½“ä¸­,æ˜¯ REST é£æ ¼çš„æ§åˆ¶å™¨ã€‚</p><blockquote><p>ç°åœ¨éƒ½æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œè¯´å®è¯æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰ç”¨è¿‡<code>@Controller</code>ã€‚å¦‚æœä½ çš„é¡¹ç›®å¤ªè€äº†çš„è¯ï¼Œå°±å½“æˆ‘æ²¡è¯´ã€‚_</p></blockquote><p>å•ç‹¬ä½¿ç”¨ <code>@Controller</code> ä¸åŠ  <code>@ResponseBody</code>çš„è¯ä¸€èˆ¬æ˜¯ç”¨åœ¨è¦è¿”å›ä¸€ä¸ªè§†å›¾çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå±äºæ¯”è¾ƒä¼ ç»Ÿçš„ Spring MVC çš„åº”ç”¨ï¼Œå¯¹åº”äºå‰åç«¯ä¸åˆ†ç¦»çš„æƒ…å†µã€‚<code>@Controller</code> +<code>@ResponseBody</code> è¿”å› JSON æˆ– XML å½¢å¼æ•°æ®</p><p>å…³äº<code>@RestController</code> å’Œ <code>@Controller</code>çš„å¯¹æ¯”ï¼Œè¯·çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485544&amp;idx=1&amp;sn=3cc95b88979e28fe3bfe539eb421c6d8&amp;chksm=cea247a3f9d5ceb5e324ff4b8697adc3e828ecf71a3468445e70221cce768d1e722085359907&amp;token=1725092312&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">@RestController vs @Controlleropen in new window</a>ã€‚</p><h3 id="_2-4-scope" tabindex="-1">2.4. <code>@Scope</code> <a class="header-anchor" href="#_2-4-scope" aria-label="Permalink to &quot;2.4. \`@Scope\`&quot;">â€‹</a></h3><p>å£°æ˜ Spring Bean çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨æ–¹æ³•:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Bean</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Scope</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">singleton</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Person</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">personSingleton</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Person</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Scope</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;singleton&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> Person </span><span style="color:#6F42C1;">personSingleton</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><strong>å››ç§å¸¸è§çš„ Spring Bean çš„ä½œç”¨åŸŸï¼š</strong></p><ul><li>singleton : å”¯ä¸€ bean å®ä¾‹ï¼ŒSpring ä¸­çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚ ğŸ‘ˆ</li><li>prototype : æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ã€‚</li><li>request : æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP request å†…æœ‰æ•ˆã€‚</li><li>session : æ¯ä¸€ä¸ª HTTP Session ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚</li></ul><h3 id="_2-5-configuration-ğŸ‘ˆ" tabindex="-1">2.5. <code>@Configuration</code> ğŸ‘ˆ <a class="header-anchor" href="#_2-5-configuration-ğŸ‘ˆ" aria-label="Permalink to &quot;2.5. \`@Configuration\` ğŸ‘ˆ&quot;">â€‹</a></h3><p>ä¸€èˆ¬ç”¨æ¥å£°æ˜é…ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Component</code>æ³¨è§£æ›¿ä»£ï¼Œä¸è¿‡ä½¿ç”¨<code>@Configuration</code>æ³¨è§£å£°æ˜é…ç½®ç±»æ›´åŠ è¯­ä¹‰åŒ–ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Configuration</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">AppConfig</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Bean</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">TransferService</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">transferService</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">TransferServiceImpl</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AppConfig</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> TransferService </span><span style="color:#6F42C1;">transferService</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TransferServiceImpl</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="_3-å¤„ç†å¸¸è§çš„-http-è¯·æ±‚ç±»å‹" tabindex="-1">3. å¤„ç†å¸¸è§çš„ HTTP è¯·æ±‚ç±»å‹ <a class="header-anchor" href="#_3-å¤„ç†å¸¸è§çš„-http-è¯·æ±‚ç±»å‹" aria-label="Permalink to &quot;3\\. å¤„ç†å¸¸è§çš„ HTTP è¯·æ±‚ç±»å‹&quot;">â€‹</a></h2><p><strong>5 ç§å¸¸è§çš„è¯·æ±‚ç±»å‹:</strong></p><ul><li><strong>GET</strong> ï¼šè¯·æ±‚ä»æœåŠ¡å™¨è·å–ç‰¹å®šèµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>GET /users</code>ï¼ˆè·å–æ‰€æœ‰å­¦ç”Ÿï¼‰ å®ç”¨</li><li><strong>POST</strong> ï¼šåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>POST /users</code>ï¼ˆåˆ›å»ºå­¦ç”Ÿï¼‰ å®ç”¨</li><li><strong>PUT</strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ–°åçš„æ•´ä¸ªèµ„æºï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>PUT /users/12</code>ï¼ˆæ›´æ–°ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰å®ç”¨</li><li><strong>DELETE</strong> ï¼šä»æœåŠ¡å™¨åˆ é™¤ç‰¹å®šçš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>DELETE /users/12</code>ï¼ˆåˆ é™¤ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰å®ç”¨</li><li><strong>PATCH</strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ”¹çš„å±æ€§ï¼Œå¯ä»¥çœ‹åšä½œæ˜¯éƒ¨åˆ†æ›´æ–°ï¼‰ï¼Œä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚ğŸš€</li></ul><h3 id="_3-1-get-è¯·æ±‚" tabindex="-1">3.1. GET è¯·æ±‚ <a class="header-anchor" href="#_3-1-get-è¯·æ±‚" aria-label="Permalink to &quot;3.1. GET è¯·æ±‚&quot;">â€‹</a></h3><p><code>@GetMapping(&quot;users&quot;)</code> ç­‰ä»·äº<code>@RequestMapping(value=&quot;/users&quot;,method=RequestMethod.GET)</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GetMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/users</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F286C4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">List</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">User</span><span style="color:#F286C4;">&gt;&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getAllUsers</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> userRepository.</span><span style="color:#62E884;">findAll</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/users&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">User</span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAllUsers</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> userRepository.</span><span style="color:#6F42C1;">findAll</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3-2-post-è¯·æ±‚" tabindex="-1">3.2. POST è¯·æ±‚ <a class="header-anchor" href="#_3-2-post-è¯·æ±‚" aria-label="Permalink to &quot;3.2. POST è¯·æ±‚&quot;">â€‹</a></h3><p><code>@PostMapping(&quot;users&quot;)</code> ç­‰ä»·äº<code>@RequestMapping(value=&quot;/users&quot;,method=RequestMethod.POST)</code></p><p>å…³äº<code>@RequestBody</code>æ³¨è§£çš„ä½¿ç”¨ï¼Œåœ¨ä¸‹é¢çš„â€œå‰åç«¯ä¼ å€¼â€è¿™å—ä¼šè®²åˆ°ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">PostMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/users</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">User</span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">createUser</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">Valid</span><span style="color:#F6F6F4;"> @</span><span style="color:#97E1F1;font-style:italic;">RequestBody</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">UserCreateRequest</span><span style="color:#F6F6F4;"> userCreateRequest) {</span></span>
<span class="line"><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> userRespository.</span><span style="color:#62E884;">save</span><span style="color:#F6F6F4;">(userCreateRequest);</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/users&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">User</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createUser</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> UserCreateRequest userCreateRequest) {</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> userRespository.</span><span style="color:#6F42C1;">save</span><span style="color:#24292E;">(userCreateRequest);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3-3-put-è¯·æ±‚" tabindex="-1">3.3. PUT è¯·æ±‚ <a class="header-anchor" href="#_3-3-put-è¯·æ±‚" aria-label="Permalink to &quot;3.3. PUT è¯·æ±‚&quot;">â€‹</a></h3><p><code>@PutMapping(&quot;/users/{userId}&quot;)</code> ç­‰ä»·äº<code>@RequestMapping(value=&quot;/users/{userId}&quot;,method=RequestMethod.PUT)</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">PutMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/users/{userId}</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">User</span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">updateUser</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">PathVariable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">value</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">userId</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> userId,</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">Valid</span><span style="color:#F6F6F4;"> @</span><span style="color:#97E1F1;font-style:italic;">RequestBody</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">UserUpdateRequest</span><span style="color:#F6F6F4;"> userUpdateRequest) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PutMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/users/{userId}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">User</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">updateUser</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">PathVariable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;userId&quot;</span><span style="color:#24292E;">) Long userId,</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> UserUpdateRequest userUpdateRequest) {</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3-4-delete-è¯·æ±‚" tabindex="-1">3.4. <strong>DELETE è¯·æ±‚</strong> <a class="header-anchor" href="#_3-4-delete-è¯·æ±‚" aria-label="Permalink to &quot;3.4. **DELETE è¯·æ±‚**&quot;">â€‹</a></h3><p><code>@DeleteMapping(&quot;/users/{userId}&quot;)</code>ç­‰ä»·äº<code>@RequestMapping(value=&quot;/users/{userId}&quot;,method=RequestMethod.DELETE)</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">DeleteMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/users/{userId}</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">deleteUser</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">PathVariable</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">value</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">userId</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> userId){</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">DeleteMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/users/{userId}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity </span><span style="color:#6F42C1;">deleteUser</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">PathVariable</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;userId&quot;</span><span style="color:#24292E;">) Long userId){</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_3-5-patch-è¯·æ±‚-ğŸš€" tabindex="-1">3.5. <strong>PATCH è¯·æ±‚</strong> ğŸš€ <a class="header-anchor" href="#_3-5-patch-è¯·æ±‚-ğŸš€" aria-label="Permalink to &quot;3.5. **PATCH è¯·æ±‚** ğŸš€&quot;">â€‹</a></h3><p>ä¸€èˆ¬å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ PUT ä¸å¤Ÿç”¨äº†ä¹‹åæ‰ç”¨ PATCH è¯·æ±‚å»æ›´æ–°æ•°æ®ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">PatchMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/profile</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">updateStudent</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">RequestBody</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">StudentUpdateRequest</span><span style="color:#F6F6F4;"> studentUpdateRequest) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        studentRepository.</span><span style="color:#62E884;">updateDetail</span><span style="color:#F6F6F4;">(studentUpdateRequest);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> ResponseEntity.</span><span style="color:#62E884;">ok</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">build</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PatchMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/profile&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity </span><span style="color:#6F42C1;">updateStudent</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> StudentUpdateRequest studentUpdateRequest) {</span></span>
<span class="line"><span style="color:#24292E;">        studentRepository.</span><span style="color:#6F42C1;">updateDetail</span><span style="color:#24292E;">(studentUpdateRequest);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> ResponseEntity.</span><span style="color:#6F42C1;">ok</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div><h2 id="_4-å‰åç«¯ä¼ å€¼-âœï¸-â¤ï¸" tabindex="-1">4. å‰åç«¯ä¼ å€¼ âœï¸ â¤ï¸ <a class="header-anchor" href="#_4-å‰åç«¯ä¼ å€¼-âœï¸-â¤ï¸" aria-label="Permalink to &quot;4\\. å‰åç«¯ä¼ å€¼ âœï¸ â¤ï¸&quot;">â€‹</a></h2><p><strong>æŒæ¡å‰åç«¯ä¼ å€¼çš„æ­£ç¡®å§¿åŠ¿ï¼Œæ˜¯ä½ å¼€å§‹ CRUD çš„ç¬¬ä¸€æ­¥ï¼</strong></p><h3 id="_4-1-pathvariable-å’Œ-requestparam" tabindex="-1">4.1. <code>@PathVariable</code> å’Œ <code>@RequestParam</code> <a class="header-anchor" href="#_4-1-pathvariable-å’Œ-requestparam" aria-label="Permalink to &quot;4.1. \`@PathVariable\` å’Œ \`@RequestParam\`&quot;">â€‹</a></h3><p><code>@PathVariable</code>ç”¨äºè·å–è·¯å¾„å‚æ•°ï¼Œ<code>@RequestParam</code>ç”¨äºè·å–æŸ¥è¯¢å‚æ•°ã€‚</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GetMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/klasses/{klassId}/teachers</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">List</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">Teacher</span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getKlassRelatedTeachers</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">         @</span><span style="color:#97E1F1;font-style:italic;">PathVariable</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">klassId</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> klassId,</span></span>
<span class="line"><span style="color:#F6F6F4;">         @</span><span style="color:#97E1F1;font-style:italic;">RequestParam</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">value</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">type</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">required</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">false</span><span style="color:#F6F6F4;">) </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> type ) {</span></span>
<span class="line"><span style="color:#F6F6F4;">...</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/klasses/{klassId}/teachers&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> List</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">Teacher</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getKlassRelatedTeachers</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">         @</span><span style="color:#D73A49;">PathVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;klassId&quot;</span><span style="color:#24292E;">) Long klassId,</span></span>
<span class="line"><span style="color:#24292E;">         @</span><span style="color:#D73A49;">RequestParam</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">required</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">) String type ) {</span></span>
<span class="line"><span style="color:#24292E;">...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>å¦‚æœæˆ‘ä»¬è¯·æ±‚çš„ url æ˜¯ï¼š<code>/klasses/123456/teachers?type=web</code></p><p>é‚£ä¹ˆæˆ‘ä»¬æœåŠ¡è·å–åˆ°çš„æ•°æ®å°±æ˜¯ï¼š<code>klassId=123456,type=web</code>ã€‚</p><h3 id="_4-2-requestbody" tabindex="-1">4.2. <code>@RequestBody</code> <a class="header-anchor" href="#_4-2-requestbody" aria-label="Permalink to &quot;4.2. \`@RequestBody\`&quot;">â€‹</a></h3><p>ç”¨äºè¯»å– Request è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯ POST,PUT,DELETE,GET è¯·æ±‚ï¼‰çš„ body éƒ¨åˆ†å¹¶ä¸”<strong>Content-Type ä¸º application/json</strong> æ ¼å¼çš„æ•°æ®ï¼Œæ¥æ”¶åˆ°æ•°æ®ä¹‹åä¼šè‡ªåŠ¨å°†æ•°æ®ç»‘å®šåˆ° Java å¯¹è±¡ä¸Šå»ã€‚ç³»ç»Ÿä¼šä½¿ç”¨<code>HttpMessageConverter</code>æˆ–è€…è‡ªå®šä¹‰çš„<code>HttpMessageConverter</code>å°†è¯·æ±‚çš„ body ä¸­çš„ json å­—ç¬¦ä¸²è½¬æ¢ä¸º java å¯¹è±¡ã€‚</p><p>æˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç»™æ¼”ç¤ºä¸€ä¸‹åŸºæœ¬ä½¿ç”¨ï¼</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ³¨å†Œçš„æ¥å£ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">PostMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/sign-up</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">signUp</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">RequestBody</span><span style="color:#F6F6F4;"> @</span><span style="color:#97E1F1;font-style:italic;">Valid</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">UserRegisterRequest</span><span style="color:#F6F6F4;"> userRegisterRequest) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  userService.</span><span style="color:#62E884;">save</span><span style="color:#F6F6F4;">(userRegisterRequest);</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> ResponseEntity.</span><span style="color:#62E884;">ok</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">build</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/sign-up&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity </span><span style="color:#6F42C1;">signUp</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> UserRegisterRequest userRegisterRequest) {</span></span>
<span class="line"><span style="color:#24292E;">  userService.</span><span style="color:#6F42C1;">save</span><span style="color:#24292E;">(userRegisterRequest);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> ResponseEntity.</span><span style="color:#6F42C1;">ok</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">build</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>UserRegisterRequest</code>å¯¹è±¡ï¼š</p><blockquote><p>@NotNullï¼šç”¨åœ¨åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ä¸Šé¢çš„å±æ€§æ³¨è§£ï¼Œä¸èƒ½ä¸ºnullï¼Œä½†å¯ä»¥ä¸ºempty @NotEmptyï¼šç”¨åœ¨é›†åˆç±»ä¸Šé¢çš„å±æ€§çš„æ³¨è§£ï¼Œä¸èƒ½ä¸ºnullï¼Œè€Œä¸”é•¿åº¦å¿…é¡»å¤§äº0 @NotBlankï¼šç”¨åœ¨Stringä¸Šé¢å±æ€§çš„æ³¨è§£ï¼Œä¸èƒ½ä¸ºnullï¼Œè€Œä¸”è°ƒç”¨trim()åï¼Œé•¿åº¦å¿…é¡»å¤§äº0</p></blockquote><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Data</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">UserRegisterRequest</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotBlank</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> userName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotBlank</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> password;</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotBlank</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> fullName;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Data</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">UserRegisterRequest</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotBlank</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String userName;</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotBlank</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String password;</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotBlank</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String fullName;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æˆ‘ä»¬å‘é€ post è¯·æ±‚åˆ°è¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸” body æºå¸¦ JSON æ•°æ®ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">{</span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">userName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">coder</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">fullName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">shuangkou</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">password</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">123456</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span><span style="color:#005CC5;">&quot;userName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;coder&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;fullName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;shuangkou&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;password&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;">}</span></span></code></pre></div><p>è¿™æ ·æˆ‘ä»¬çš„åç«¯å°±å¯ä»¥ç›´æ¥æŠŠ json æ ¼å¼çš„æ•°æ®æ˜ å°„åˆ°æˆ‘ä»¬çš„ <code>UserRegisterRequest</code> ç±»ä¸Šã€‚</p><p><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/@RequestBody.png" alt=""></p><p>ğŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>ä¸€ä¸ªè¯·æ±‚æ–¹æ³•åªå¯ä»¥æœ‰ä¸€ä¸ª<code>@RequestBody</code>ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ª<code>@RequestParam</code>å’Œ<code>@PathVariable</code></strong>ã€‚ å¦‚æœä½ çš„æ–¹æ³•å¿…é¡»è¦ç”¨ä¸¤ä¸ª <code>@RequestBody</code>æ¥æ¥å—æ•°æ®çš„è¯ï¼Œå¤§æ¦‚ç‡æ˜¯ä½ çš„æ•°æ®åº“è®¾è®¡æˆ–è€…ç³»ç»Ÿè®¾è®¡å‡ºé—®é¢˜äº†ï¼</p><h2 id="_5-è¯»å–é…ç½®ä¿¡æ¯-âœï¸â¤ï¸" tabindex="-1">5. è¯»å–é…ç½®ä¿¡æ¯ âœï¸â¤ï¸ <a class="header-anchor" href="#_5-è¯»å–é…ç½®ä¿¡æ¯-âœï¸â¤ï¸" aria-label="Permalink to &quot;5\\. è¯»å–é…ç½®ä¿¡æ¯ âœï¸â¤ï¸&quot;">â€‹</a></h2><p><strong>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦å°†ä¸€äº›å¸¸ç”¨çš„é…ç½®ä¿¡æ¯æ¯”å¦‚é˜¿é‡Œäº‘ ossã€å‘é€çŸ­ä¿¡ã€å¾®ä¿¡è®¤è¯çš„ç›¸å…³é…ç½®ä¿¡æ¯ç­‰ç­‰æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</strong></p><p><strong>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Spring ä¸ºæˆ‘ä»¬æä¾›äº†å“ªäº›æ–¹å¼å¸®åŠ©æˆ‘ä»¬ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–è¿™äº›é…ç½®ä¿¡æ¯ã€‚</strong></p><p>æˆ‘ä»¬çš„æ•°æ®æº<code>application.yml</code>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#97E1F1;">wuhan2020</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">2020å¹´åˆæ­¦æ±‰çˆ†å‘äº†æ–°å‹å† çŠ¶ç—…æ¯’ï¼Œç–«æƒ…ä¸¥é‡ï¼Œä½†æ˜¯ï¼Œæˆ‘ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šè¿‡å»ï¼æ­¦æ±‰åŠ æ²¹ï¼ä¸­å›½åŠ æ²¹ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#97E1F1;">my-profile</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E1F1;">name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">test</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E1F1;">email</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">test@163.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#97E1F1;">library</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E1F1;">location</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">æ¹–åŒ—æ­¦æ±‰åŠ æ²¹ä¸­å›½åŠ æ²¹</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E1F1;">books</span><span style="color:#F286C4;">:</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">å¤©æ‰åŸºæœ¬æ³•</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#97E1F1;">description</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">äºŒåäºŒå²çš„æ—æœå¤•åœ¨çˆ¶äº²ç¡®è¯Šé˜¿å°”èŒ¨æµ·é»˜ç—…è¿™å¤©ï¼Œå¾—çŸ¥è‡ªå·±æš—æ‹å¤šå¹´çš„æ ¡å›­ç”·ç¥è£´ä¹‹å³å°†å‡ºå›½æ·±é€ çš„æ¶ˆæ¯â€”â€”å¯¹æ–¹è€ƒå–çš„å­¦æ ¡ï¼Œæ°æ˜¯çˆ¶äº²å½“å¹´ä¸ºå¥¹æ”¾å¼ƒçš„é‚£æ‰€ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">æ—¶é—´çš„ç§©åº</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#97E1F1;">description</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">ä¸ºä»€ä¹ˆæˆ‘ä»¬è®°å¾—è¿‡å»ï¼Œè€Œéæœªæ¥ï¼Ÿæ—¶é—´â€œæµé€â€æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ˜¯æˆ‘ä»¬å­˜åœ¨äºæ—¶é—´ä¹‹å†…ï¼Œè¿˜æ˜¯æ—¶é—´å­˜åœ¨äºæˆ‘ä»¬ä¹‹ä¸­ï¼Ÿå¡æ´›Â·ç½—éŸ¦åˆ©ç”¨è¯—æ„çš„æ–‡å­—ï¼Œé‚€è¯·æˆ‘ä»¬æ€è€ƒè¿™ä¸€äº˜å¤éš¾é¢˜â€”â€”æ—¶é—´çš„æœ¬è´¨ã€‚</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">-</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">äº†ä¸èµ·çš„æˆ‘</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#97E1F1;">description</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">å¦‚ä½•å…»æˆä¸€ä¸ªæ–°ä¹ æƒ¯ï¼Ÿå¦‚ä½•è®©å¿ƒæ™ºå˜å¾—æ›´æˆç†Ÿï¼Ÿå¦‚ä½•æ‹¥æœ‰é«˜è´¨é‡çš„å…³ç³»ï¼Ÿ å¦‚ä½•èµ°å‡ºäººç”Ÿçš„è‰°éš¾æ—¶åˆ»ï¼Ÿ</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">wuhan2020</span><span style="color:#24292E;">: </span><span style="color:#032F62;">2020å¹´åˆæ­¦æ±‰çˆ†å‘äº†æ–°å‹å† çŠ¶ç—…æ¯’ï¼Œç–«æƒ…ä¸¥é‡ï¼Œä½†æ˜¯ï¼Œæˆ‘ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šè¿‡å»ï¼æ­¦æ±‰åŠ æ²¹ï¼ä¸­å›½åŠ æ²¹ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">my-profile</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">email</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test@163.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">library</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">location</span><span style="color:#24292E;">: </span><span style="color:#032F62;">æ¹–åŒ—æ­¦æ±‰åŠ æ²¹ä¸­å›½åŠ æ²¹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">books</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">å¤©æ‰åŸºæœ¬æ³•</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">äºŒåäºŒå²çš„æ—æœå¤•åœ¨çˆ¶äº²ç¡®è¯Šé˜¿å°”èŒ¨æµ·é»˜ç—…è¿™å¤©ï¼Œå¾—çŸ¥è‡ªå·±æš—æ‹å¤šå¹´çš„æ ¡å›­ç”·ç¥è£´ä¹‹å³å°†å‡ºå›½æ·±é€ çš„æ¶ˆæ¯â€”â€”å¯¹æ–¹è€ƒå–çš„å­¦æ ¡ï¼Œæ°æ˜¯çˆ¶äº²å½“å¹´ä¸ºå¥¹æ”¾å¼ƒçš„é‚£æ‰€ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">æ—¶é—´çš„ç§©åº</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ä¸ºä»€ä¹ˆæˆ‘ä»¬è®°å¾—è¿‡å»ï¼Œè€Œéæœªæ¥ï¼Ÿæ—¶é—´â€œæµé€â€æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ˜¯æˆ‘ä»¬å­˜åœ¨äºæ—¶é—´ä¹‹å†…ï¼Œè¿˜æ˜¯æ—¶é—´å­˜åœ¨äºæˆ‘ä»¬ä¹‹ä¸­ï¼Ÿå¡æ´›Â·ç½—éŸ¦åˆ©ç”¨è¯—æ„çš„æ–‡å­—ï¼Œé‚€è¯·æˆ‘ä»¬æ€è€ƒè¿™ä¸€äº˜å¤éš¾é¢˜â€”â€”æ—¶é—´çš„æœ¬è´¨ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">äº†ä¸èµ·çš„æˆ‘</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">description</span><span style="color:#24292E;">: </span><span style="color:#032F62;">å¦‚ä½•å…»æˆä¸€ä¸ªæ–°ä¹ æƒ¯ï¼Ÿå¦‚ä½•è®©å¿ƒæ™ºå˜å¾—æ›´æˆç†Ÿï¼Ÿå¦‚ä½•æ‹¥æœ‰é«˜è´¨é‡çš„å…³ç³»ï¼Ÿ å¦‚ä½•èµ°å‡ºäººç”Ÿçš„è‰°éš¾æ—¶åˆ»ï¼Ÿ</span></span></code></pre></div><h3 id="_5-1-value-å¸¸ç”¨" tabindex="-1">5.1. <code>@Value</code>(å¸¸ç”¨) <a class="header-anchor" href="#_5-1-value-å¸¸ç”¨" aria-label="Permalink to &quot;5.1. \`@Value\`(å¸¸ç”¨)&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>@Value(&quot;\${property}&quot;)</code> è¯»å–æ¯”è¾ƒç®€å•çš„é…ç½®ä¿¡æ¯ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Value</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">\${wuhan2020}</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> wuhan2020;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Value</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;\${wuhan2020}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">String wuhan2020;</span></span></code></pre></div><h3 id="_5-2-configurationproperties-å¸¸ç”¨" tabindex="-1">5.2. <code>@ConfigurationProperties</code>(å¸¸ç”¨) <a class="header-anchor" href="#_5-2-configurationproperties-å¸¸ç”¨" aria-label="Permalink to &quot;5.2. \`@ConfigurationProperties\`(å¸¸ç”¨)&quot;">â€‹</a></h3><p>é€šè¿‡<code>@ConfigurationProperties</code>è¯»å–é…ç½®ä¿¡æ¯å¹¶ä¸ bean ç»‘å®šã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Component</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ConfigurationProperties</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">prefix</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">library</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">LibraryProperties</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotEmpty</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> location;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">List</span><span style="color:#F6F6F4;">&lt;Book&gt; books;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Setter</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Getter</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">ToString</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Book</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name;</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> description;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">  çœç•¥getter</span><span style="color:#F286C4;">/</span><span style="color:#F6F6F4;">setter</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Component</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ConfigurationProperties</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">prefix</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;library&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">LibraryProperties</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotEmpty</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String location;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">Book</span><span style="color:#24292E;">&gt; books;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Setter</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Getter</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">ToString</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Book</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        String name;</span></span>
<span class="line"><span style="color:#24292E;">        String description;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  çœç•¥getter</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">setter</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä½ å¯ä»¥åƒä½¿ç”¨æ™®é€šçš„ Spring bean ä¸€æ ·ï¼Œå°†å…¶æ³¨å…¥åˆ°ç±»ä¸­ä½¿ç”¨ã€‚</p><h3 id="_5-3-propertysource-ä¸å¸¸ç”¨" tabindex="-1">5.3. <code>@PropertySource</code>ï¼ˆä¸å¸¸ç”¨ï¼‰ <a class="header-anchor" href="#_5-3-propertysource-ä¸å¸¸ç”¨" aria-label="Permalink to &quot;5.3. \`@PropertySource\`ï¼ˆä¸å¸¸ç”¨ï¼‰&quot;">â€‹</a></h3><p><code>@PropertySource</code>è¯»å–æŒ‡å®š properties æ–‡ä»¶</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Component</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">PropertySource</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">classpath:website.properties</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">WebSite</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Value</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">\${url}</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> url;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  çœç•¥getter</span><span style="color:#F286C4;">/</span><span style="color:#F6F6F4;">setter</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Component</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">PropertySource</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;classpath:website.properties&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WebSite</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Value</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;\${url}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String url;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  çœç•¥getter</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">setter</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486181&amp;idx=2&amp;sn=10db0ae64ef501f96a5b0dbc4bd78786&amp;chksm=cea2452ef9d5cc384678e456427328600971180a77e40c13936b19369672ca3e342c26e92b50&amp;token=816772476&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">ã€Š10 åˆ†é’Ÿæå®š SpringBoot å¦‚ä½•ä¼˜é›…è¯»å–é…ç½®æ–‡ä»¶ï¼Ÿã€‹open in new window</a> ã€‚</p><h2 id="_6-å‚æ•°æ ¡éªŒ-ğŸš€" tabindex="-1">6. å‚æ•°æ ¡éªŒ ğŸš€ <a class="header-anchor" href="#_6-å‚æ•°æ ¡éªŒ-ğŸš€" aria-label="Permalink to &quot;6\\. å‚æ•°æ ¡éªŒ ğŸš€&quot;">â€‹</a></h2><p><strong>æ•°æ®çš„æ ¡éªŒçš„é‡è¦æ€§å°±ä¸ç”¨è¯´äº†ï¼Œå³ä½¿åœ¨å‰ç«¯å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹ä¼ å…¥åç«¯çš„æ•°æ®å†è¿›è¡Œä¸€éæ ¡éªŒï¼Œé¿å…ç”¨æˆ·ç»•è¿‡æµè§ˆå™¨ç›´æ¥é€šè¿‡ä¸€äº› HTTP å·¥å…·ç›´æ¥å‘åç«¯è¯·æ±‚ä¸€äº›è¿æ³•æ•°æ®ã€‚</strong></p><p><strong>JSR(Java Specification Requestsï¼‰</strong> æ˜¯ä¸€å¥— JavaBean å‚æ•°æ ¡éªŒçš„æ ‡å‡†ï¼Œå®ƒå®šä¹‰äº†å¾ˆå¤šå¸¸ç”¨çš„æ ¡éªŒæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†è¿™äº›æ³¨è§£åŠ åœ¨æˆ‘ä»¬ JavaBean çš„å±æ€§ä¸Šé¢ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éœ€è¦æ ¡éªŒçš„æ—¶å€™è¿›è¡Œæ ¡éªŒäº†ï¼Œéå¸¸æ–¹ä¾¿ï¼</p><p>æ ¡éªŒçš„æ—¶å€™æˆ‘ä»¬å®é™…ç”¨çš„æ˜¯ <strong>Hibernate Validator</strong> æ¡†æ¶ã€‚Hibernate Validator æ˜¯ Hibernate å›¢é˜Ÿæœ€åˆçš„æ•°æ®æ ¡éªŒæ¡†æ¶ï¼ŒHibernate Validator 4.x æ˜¯ Bean Validation 1.0ï¼ˆJSR 303ï¼‰çš„å‚è€ƒå®ç°ï¼ŒHibernate Validator 5.x æ˜¯ Bean Validation 1.1ï¼ˆJSR 349ï¼‰çš„å‚è€ƒå®ç°ï¼Œç›®å‰æœ€æ–°ç‰ˆçš„ Hibernate Validator 6.x æ˜¯ Bean Validation 2.0ï¼ˆJSR 380ï¼‰çš„å‚è€ƒå®ç°ã€‚</p><p>SpringBoot é¡¹ç›®çš„ spring-boot-starter-web ä¾èµ–ä¸­å·²ç»æœ‰ hibernate-validator åŒ…ï¼Œä¸éœ€è¦å¼•ç”¨ç›¸å…³ä¾èµ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆé€šè¿‡ idea æ’ä»¶â€”Maven Helper ç”Ÿæˆï¼‰ï¼š</p><p><strong>æ³¨</strong>ï¼šæ›´æ–°ç‰ˆæœ¬çš„ spring-boot-starter-web ä¾èµ–ä¸­ä¸å†æœ‰ hibernate-validator åŒ…ï¼ˆå¦‚2.3.11.RELEASEï¼‰ï¼Œéœ€è¦è‡ªå·±å¼•å…¥ <code>spring-boot-starter-validation</code> ä¾èµ–ã€‚</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">&lt;</span><span style="color:#F286C4;">dependency</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">    &lt;</span><span style="color:#F286C4;">groupId</span><span style="color:#F6F6F4;">&gt;org.springframework.boot&lt;/</span><span style="color:#F286C4;">groupId</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">    &lt;</span><span style="color:#F286C4;">artifactId</span><span style="color:#F6F6F4;">&gt;spring-boot-starter-validation&lt;/</span><span style="color:#F286C4;">artifactId</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">    &lt;</span><span style="color:#F286C4;">version</span><span style="color:#F6F6F4;">&gt;2.4.5&lt;/</span><span style="color:#F286C4;">version</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">&lt;/</span><span style="color:#F286C4;">dependency</span><span style="color:#F6F6F4;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;org.springframework.boot&lt;/</span><span style="color:#22863A;">groupId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;spring-boot-starter-validation&lt;/</span><span style="color:#22863A;">artifactId</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;2.4.5&lt;/</span><span style="color:#22863A;">version</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dependency</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p><a href="https://blog.csdn.net/CSDNhdlg/article/details/124947960" target="_blank" rel="noreferrer">@Validatedå’Œ@Validçš„åŒºåˆ«open in new window</a></p><p><img src="https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png" alt=""></p><p>é SpringBoot é¡¹ç›®éœ€è¦è‡ªè¡Œå¼•å…¥ç›¸å…³ä¾èµ–åŒ…ï¼Œè¿™é‡Œä¸å¤šåšè®²è§£ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šã€Š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485783&amp;idx=1&amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;token=292197051&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼open in new window</a>ã€‹ã€‚</p><p>ğŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š <strong>æ‰€æœ‰çš„æ³¨è§£ï¼Œæ¨èä½¿ç”¨ JSR æ³¨è§£ï¼Œå³<code>javax.validation.constraints</code>ï¼Œè€Œä¸æ˜¯<code>org.hibernate.validator.constraints</code></strong></p><h3 id="_6-1-ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£" tabindex="-1">6.1. ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£ <a class="header-anchor" href="#_6-1-ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£" aria-label="Permalink to &quot;6.1. ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£&quot;">â€‹</a></h3><ul><li><code>@NotEmpty</code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„ä¸èƒ½ä¸º null ä¹Ÿä¸èƒ½ä¸ºç©º</li><li><code>@NotBlank</code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²é nullï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªéç©ºç™½å­—ç¬¦</li><li><code>@Null</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</li><li><code>@NotNull</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</li><li><code>@AssertTrue</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</li><li><code>@AssertFalse</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</li><li><code>@Pattern(regex=,flag=)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</li><li><code>@Email</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ Email æ ¼å¼ã€‚</li><li><code>@Min(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li><li><code>@Max(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li><li><code>@DecimalMin(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li><li><code>@DecimalMax(value)</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li><li><code>@Size(max=, min=)</code>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</li><li><code>@Digits(integer, fraction)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</li><li><code>@Past</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</li><li><code>@Future</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</li><li>......</li></ul><h3 id="_6-2-éªŒè¯è¯·æ±‚ä½“-requestbody" tabindex="-1">6.2. éªŒè¯è¯·æ±‚ä½“(RequestBody) <a class="header-anchor" href="#_6-2-éªŒè¯è¯·æ±‚ä½“-requestbody" aria-label="Permalink to &quot;6.2. éªŒè¯è¯·æ±‚ä½“(RequestBody)&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Data</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Person</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotNull</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">classId ä¸èƒ½ä¸ºç©º</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> classId;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Size</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">max</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">33</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotNull</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">name ä¸èƒ½ä¸ºç©º</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Pattern</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">regexp</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">((^Man$|^Woman$|^UGM$))</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">sex å€¼ä¸åœ¨å¯é€‰èŒƒå›´</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotNull</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">sex ä¸èƒ½ä¸ºç©º</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> sex;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Email</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">email æ ¼å¼ä¸æ­£ç¡®</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">NotNull</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">email ä¸èƒ½ä¸ºç©º</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> email;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Data</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Person</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotNull</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;classId ä¸èƒ½ä¸ºç©º&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String classId;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Size</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">max</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">33</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotNull</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;name ä¸èƒ½ä¸ºç©º&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Pattern</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">regexp</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;((^Man$|^Woman$|^UGM$))&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sex å€¼ä¸åœ¨å¯é€‰èŒƒå›´&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotNull</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sex ä¸èƒ½ä¸ºç©º&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String sex;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Email</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;email æ ¼å¼ä¸æ­£ç¡®&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">NotNull</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;email ä¸èƒ½ä¸ºç©º&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String email;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æˆ‘ä»¬åœ¨éœ€è¦éªŒè¯çš„å‚æ•°ä¸ŠåŠ ä¸Šäº†<code>@Valid</code>æ³¨è§£ï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œå®ƒå°†æŠ›å‡º<code>MethodArgumentNotValidException</code>ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RestController</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RequestMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/api</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">PersonController</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">PostMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/person</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;">&lt;Person&gt; </span><span style="color:#62E884;">getPerson</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">RequestBody</span><span style="color:#F6F6F4;"> @</span><span style="color:#97E1F1;font-style:italic;">Valid</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Person</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">person</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> ResponseEntity.</span><span style="color:#62E884;">ok</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">body</span><span style="color:#F6F6F4;">(person);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RestController</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/api&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PersonController</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">PostMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/person&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity&lt;</span><span style="color:#D73A49;">Person</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">getPerson</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">RequestBody</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> Person </span><span style="color:#E36209;">person</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> ResponseEntity.</span><span style="color:#6F42C1;">ok</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">body</span><span style="color:#24292E;">(person);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_6-3-éªŒè¯è¯·æ±‚å‚æ•°-path-variables-å’Œ-request-parameters" tabindex="-1">6.3. éªŒè¯è¯·æ±‚å‚æ•°(Path Variables å’Œ Request Parameters) <a class="header-anchor" href="#_6-3-éªŒè¯è¯·æ±‚å‚æ•°-path-variables-å’Œ-request-parameters" aria-label="Permalink to &quot;6.3. éªŒè¯è¯·æ±‚å‚æ•°(Path Variables å’Œ Request Parameters)&quot;">â€‹</a></h3><p><strong>ä¸€å®šä¸€å®šä¸è¦å¿˜è®°åœ¨ç±»ä¸ŠåŠ ä¸Š <code>@Validated</code> æ³¨è§£äº†ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥å‘Šè¯‰ Spring å»æ ¡éªŒæ–¹æ³•å‚æ•°ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RestController</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">RequestMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/api</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Validated</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">PersonController</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">GetMapping</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/person/{id}</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;">&lt;Integer&gt; </span><span style="color:#62E884;">getPersonByID</span><span style="color:#F6F6F4;">(@</span><span style="color:#97E1F1;font-style:italic;">Valid</span><span style="color:#F6F6F4;"> @</span><span style="color:#97E1F1;font-style:italic;">PathVariable</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">id</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) @</span><span style="color:#97E1F1;font-style:italic;">Max</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">value</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">5</span><span style="color:#F6F6F4;">,</span><span style="color:#BF9EEE;">message</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">è¶…è¿‡ id çš„èŒƒå›´äº†</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) </span><span style="color:#97E1F1;font-style:italic;">Integer</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">id</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> ResponseEntity.</span><span style="color:#62E884;">ok</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">body</span><span style="color:#F6F6F4;">(id);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RestController</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">RequestMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/api&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Validated</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PersonController</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GetMapping</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/person/{id}&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity&lt;</span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">getPersonByID</span><span style="color:#24292E;">(@</span><span style="color:#D73A49;">Valid</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">PathVariable</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;id&quot;</span><span style="color:#24292E;">) @</span><span style="color:#D73A49;">Max</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">message</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;è¶…è¿‡ id çš„èŒƒå›´äº†&quot;</span><span style="color:#24292E;">) Integer </span><span style="color:#E36209;">id</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> ResponseEntity.</span><span style="color:#6F42C1;">ok</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">body</span><span style="color:#24292E;">(id);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ›´å¤šå…³äºå¦‚ä½•åœ¨ Spring é¡¹ç›®ä¸­è¿›è¡Œå‚æ•°æ ¡éªŒçš„å†…å®¹ï¼Œè¯·çœ‹ã€Š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485783&amp;idx=1&amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;token=292197051&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼open in new window</a>ã€‹è¿™ç¯‡æ–‡ç« ã€‚</p><h2 id="_7-å…¨å±€å¤„ç†-controller-å±‚å¼‚å¸¸-âœï¸-â¤ï¸" tabindex="-1">7. å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸ âœï¸ â¤ï¸ <a class="header-anchor" href="#_7-å…¨å±€å¤„ç†-controller-å±‚å¼‚å¸¸-âœï¸-â¤ï¸" aria-label="Permalink to &quot;7\\. å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸ âœï¸ â¤ï¸&quot;">â€‹</a></h2><p>ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬ Spring é¡¹ç›®å¿…å¤‡çš„å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸ã€‚</p><p><strong>ç›¸å…³æ³¨è§£ï¼š</strong></p><ol><li><code>@ControllerAdvice</code> :æ³¨è§£å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»</li><li><code>@ExceptionHandler</code> :æ³¨è§£å£°æ˜å¼‚å¸¸å¤„ç†æ–¹æ³•</li></ol><p>å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæ‹¿æˆ‘ä»¬åœ¨ç¬¬ 5 èŠ‚å‚æ•°æ ¡éªŒè¿™å—æ¥ä¸¾ä¾‹å­ã€‚å¦‚æœæ–¹æ³•å‚æ•°ä¸å¯¹çš„è¯å°±ä¼šæŠ›å‡º<code>MethodArgumentNotValidException</code>ï¼Œæˆ‘ä»¬æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ControllerAdvice</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ResponseBody</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">GlobalExceptionHandler</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * è¯·æ±‚å‚æ•°å¼‚å¸¸å¤„ç†</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">ExceptionHandler</span><span style="color:#F6F6F4;">(MethodArgumentNotValidException.class)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ResponseEntity</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">?</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#62E884;">handleMethodArgumentNotValidException</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">MethodArgumentNotValidException</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">ex</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">HttpServletRequest</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">request</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">       ......</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ControllerAdvice</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ResponseBody</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GlobalExceptionHandler</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * è¯·æ±‚å‚æ•°å¼‚å¸¸å¤„ç†</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">ExceptionHandler</span><span style="color:#24292E;">(MethodArgumentNotValidException.class)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> ResponseEntity&lt;</span><span style="color:#D73A49;">?</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">handleMethodArgumentNotValidException</span><span style="color:#24292E;">(MethodArgumentNotValidException </span><span style="color:#E36209;">ex</span><span style="color:#24292E;">, HttpServletRequest </span><span style="color:#E36209;">request</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">       ......</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ›´å¤šå…³äº Spring Boot å¼‚å¸¸å¤„ç†çš„å†…å®¹ï¼Œè¯·çœ‹æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p><ol><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485568&amp;idx=2&amp;sn=c5ba880fd0c5d82e39531fa42cb036ac&amp;chksm=cea2474bf9d5ce5dcbc6a5f6580198fdce4bc92ef577579183a729cb5d1430e4994720d59b34&amp;token=2133161636&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">SpringBoot å¤„ç†å¼‚å¸¸çš„å‡ ç§å¸¸è§å§¿åŠ¿open in new window</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486379&amp;idx=2&amp;sn=48c29ae65b3ed874749f0803f0e4d90e&amp;chksm=cea24460f9d5cd769ed53ad7e17c97a7963a89f5350e370be633db0ae8d783c3a3dbd58c70f8&amp;token=1054498516&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">ä½¿ç”¨æšä¸¾ç®€å•å°è£…ä¸€ä¸ªä¼˜é›…çš„ Spring Boot å…¨å±€å¼‚å¸¸å¤„ç†ï¼open in new window</a></li></ol><h2 id="_8-jpa-ç›¸å…³-ğŸš€" tabindex="-1">8. JPA ç›¸å…³ ğŸš€ <a class="header-anchor" href="#_8-jpa-ç›¸å…³-ğŸš€" aria-label="Permalink to &quot;8\\. JPA ç›¸å…³ ğŸš€&quot;">â€‹</a></h2><h3 id="_8-1-åˆ›å»ºè¡¨" tabindex="-1">8.1. åˆ›å»ºè¡¨ <a class="header-anchor" href="#_8-1-åˆ›å»ºè¡¨" aria-label="Permalink to &quot;8.1. åˆ›å»ºè¡¨&quot;">â€‹</a></h3><p><code>@Entity</code>å£°æ˜ä¸€ä¸ªç±»å¯¹åº”ä¸€ä¸ªæ•°æ®åº“å®ä½“ã€‚</p><p><code>@Table</code> è®¾ç½®è¡¨å</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Entity</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Table</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">role</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Role</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Id</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">strategy</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> id;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> description;</span></span>
<span class="line"><span style="color:#F6F6F4;">    çœç•¥getter</span><span style="color:#F286C4;">/</span><span style="color:#F6F6F4;">setter......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;role&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Role</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String name;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String description;</span></span>
<span class="line"><span style="color:#24292E;">    çœç•¥getter</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">setter......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_8-2-åˆ›å»ºä¸»é”®" tabindex="-1">8.2. åˆ›å»ºä¸»é”® <a class="header-anchor" href="#_8-2-åˆ›å»ºä¸»é”®" aria-label="Permalink to &quot;8.2. åˆ›å»ºä¸»é”®&quot;">â€‹</a></h3><p><code>@Id</code> ï¼šå£°æ˜ä¸€ä¸ªå­—æ®µä¸ºä¸»é”®ã€‚</p><p>ä½¿ç”¨<code>@Id</code>å£°æ˜ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸»é”®çš„ç”Ÿæˆç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@GeneratedValue</code> æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p><p><strong>1.é€šè¿‡ <code>@GeneratedValue</code>ç›´æ¥ä½¿ç”¨ JPA å†…ç½®æä¾›çš„å››ç§ä¸»é”®ç”Ÿæˆç­–ç•¥æ¥æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Id</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">strategy</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><p>JPA ä½¿ç”¨æšä¸¾å®šä¹‰äº† 4 ç§å¸¸è§çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œå¦‚ä¸‹ï¼š</p><p>æšä¸¾æ›¿ä»£å¸¸é‡çš„ä¸€ç§ç”¨æ³•_</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">enum</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">GenerationType</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®</span></span>
<span class="line"><span style="color:#7B7F8B;">     * æŒä¹…åŒ–å¼•æ“é€šè¿‡å…³ç³»æ•°æ®åº“çš„ä¸€å¼ ç‰¹å®šçš„è¡¨æ ¼æ¥ç”Ÿæˆä¸»é”®,</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">TABLE</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     *åœ¨æŸäº›æ•°æ®åº“ä¸­,ä¸æ”¯æŒä¸»é”®è‡ªå¢é•¿,æ¯”å¦‚Oracleã€PostgreSQLå…¶æä¾›äº†ä¸€ç§å«åš&quot;åºåˆ—(sequence)&quot;çš„æœºåˆ¶ç”Ÿæˆä¸»é”®</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">SEQUENCE</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     * ä¸»é”®è‡ªå¢é•¿</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">IDENTITY</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">    /**</span></span>
<span class="line"><span style="color:#7B7F8B;">     *æŠŠä¸»é”®ç”Ÿæˆç­–ç•¥äº¤ç»™æŒä¹…åŒ–å¼•æ“(persistence engine),</span></span>
<span class="line"><span style="color:#7B7F8B;">     *æŒä¹…åŒ–å¼•æ“ä¼šæ ¹æ®æ•°æ®åº“åœ¨ä»¥ä¸Šä¸‰ç§ä¸»é”®ç”Ÿæˆ ç­–ç•¥ä¸­é€‰æ‹©å…¶ä¸­ä¸€ç§</span></span>
<span class="line"><span style="color:#7B7F8B;">     */</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">AUTO</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">GenerationType</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®</span></span>
<span class="line"><span style="color:#6A737D;">     * æŒä¹…åŒ–å¼•æ“é€šè¿‡å…³ç³»æ•°æ®åº“çš„ä¸€å¼ ç‰¹å®šçš„è¡¨æ ¼æ¥ç”Ÿæˆä¸»é”®,</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">TABLE</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     *åœ¨æŸäº›æ•°æ®åº“ä¸­,ä¸æ”¯æŒä¸»é”®è‡ªå¢é•¿,æ¯”å¦‚Oracleã€PostgreSQLå…¶æä¾›äº†ä¸€ç§å«åš&quot;åºåˆ—(sequence)&quot;çš„æœºåˆ¶ç”Ÿæˆä¸»é”®</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">SEQUENCE</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     * ä¸»é”®è‡ªå¢é•¿</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">IDENTITY</span><span style="color:#24292E;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">    /**</span></span>
<span class="line"><span style="color:#6A737D;">     *æŠŠä¸»é”®ç”Ÿæˆç­–ç•¥äº¤ç»™æŒä¹…åŒ–å¼•æ“(persistence engine),</span></span>
<span class="line"><span style="color:#6A737D;">     *æŒä¹…åŒ–å¼•æ“ä¼šæ ¹æ®æ•°æ®åº“åœ¨ä»¥ä¸Šä¸‰ç§ä¸»é”®ç”Ÿæˆ ç­–ç•¥ä¸­é€‰æ‹©å…¶ä¸­ä¸€ç§</span></span>
<span class="line"><span style="color:#6A737D;">     */</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">AUTO</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>@GeneratedValue</code>æ³¨è§£é»˜è®¤ä½¿ç”¨çš„ç­–ç•¥æ˜¯<code>GenerationType.AUTO</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> @</span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">GenerationType</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">strategy</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">default</span><span style="color:#F6F6F4;"> AUTO;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">generator</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">default</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> @</span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    GenerationType </span><span style="color:#6F42C1;">strategy</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> AUTO;</span></span>
<span class="line"><span style="color:#24292E;">    String </span><span style="color:#6F42C1;">generator</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä¸€èˆ¬ä½¿ç”¨ MySQL æ•°æ®åº“çš„è¯ï¼Œä½¿ç”¨<code>GenerationType.IDENTITY</code>ç­–ç•¥æ¯”è¾ƒæ™®éä¸€ç‚¹ï¼ˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯éœ€è¦å¦å¤–è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ IDï¼‰ã€‚</p><p><strong>2.é€šè¿‡ <code>@GenericGenerator</code>å£°æ˜ä¸€ä¸ªä¸»é”®ç­–ç•¥ï¼Œç„¶å <code>@GeneratedValue</code>ä½¿ç”¨è¿™ä¸ªç­–ç•¥</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Id</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">generator</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">IdentityIdGenerator</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GenericGenerator</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">IdentityIdGenerator</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">strategy</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">identity</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">generator</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;IdentityIdGenerator&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GenericGenerator</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;IdentityIdGenerator&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">strategy</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;identity&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><p>ç­‰ä»·äºï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Id</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">strategy</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> id;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span></code></pre></div><p>jpa æä¾›çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">DefaultIdentifierGeneratorFactory</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#F286C4;">implements</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">MutableIdentifierGeneratorFactory</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">Serializable</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">ServiceRegistryAwareService</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	@</span><span style="color:#97E1F1;font-style:italic;">SuppressWarnings</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">deprecation</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">DefaultIdentifierGeneratorFactory</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">uuid2</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, UUIDGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">guid</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, GUIDGenerator.class );			</span><span style="color:#7B7F8B;">// can be done with UUIDGenerator + strategy</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">uuid</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, UUIDHexGenerator.class );			</span><span style="color:#7B7F8B;">// &quot;deprecated&quot; for new use</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">uuid.hex</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, UUIDHexGenerator.class ); 	</span><span style="color:#7B7F8B;">// uuid.hex is deprecated</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">assigned</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, Assigned.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">identity</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, IdentityGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">select</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, SelectGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">sequence</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, SequenceStyleGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">seqhilo</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, SequenceHiLoGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">increment</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, IncrementGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">foreign</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, ForeignGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">sequence-identity</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, SequenceIdentityGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">enhanced-sequence</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, SequenceStyleGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">enhanced-table</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, TableGenerator.class );</span></span>
<span class="line"><span style="color:#F6F6F4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">	</span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">register</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">strategy</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">Class</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">generatorClass</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">		LOG.</span><span style="color:#62E884;">debugf</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">Registering IdentifierGenerator strategy [%s] -&gt; [%s]</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, strategy, generatorClass.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#F286C4;">final</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Class</span><span style="color:#F6F6F4;"> previous </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> generatorStrategyToClassNameMap.</span><span style="color:#62E884;">put</span><span style="color:#F6F6F4;">( strategy, generatorClass );</span></span>
<span class="line"><span style="color:#F6F6F4;">		</span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> ( previous </span><span style="color:#F286C4;">!=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">null</span><span style="color:#F6F6F4;"> ) {</span></span>
<span class="line"><span style="color:#F6F6F4;">			LOG.</span><span style="color:#62E884;">debugf</span><span style="color:#F6F6F4;">( </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">    - overriding [%s]</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, previous.</span><span style="color:#62E884;">getName</span><span style="color:#F6F6F4;">() );</span></span>
<span class="line"><span style="color:#F6F6F4;">		}</span></span>
<span class="line"><span style="color:#F6F6F4;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DefaultIdentifierGeneratorFactory</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">implements</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MutableIdentifierGeneratorFactory</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">Serializable</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">ServiceRegistryAwareService</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	@</span><span style="color:#D73A49;">SuppressWarnings</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;deprecation&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DefaultIdentifierGeneratorFactory</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;uuid2&quot;</span><span style="color:#24292E;">, UUIDGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;guid&quot;</span><span style="color:#24292E;">, GUIDGenerator.class );			</span><span style="color:#6A737D;">// can be done with UUIDGenerator + strategy</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;uuid&quot;</span><span style="color:#24292E;">, UUIDHexGenerator.class );			</span><span style="color:#6A737D;">// &quot;deprecated&quot; for new use</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;uuid.hex&quot;</span><span style="color:#24292E;">, UUIDHexGenerator.class ); 	</span><span style="color:#6A737D;">// uuid.hex is deprecated</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;assigned&quot;</span><span style="color:#24292E;">, Assigned.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;identity&quot;</span><span style="color:#24292E;">, IdentityGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;select&quot;</span><span style="color:#24292E;">, SelectGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;sequence&quot;</span><span style="color:#24292E;">, SequenceStyleGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;seqhilo&quot;</span><span style="color:#24292E;">, SequenceHiLoGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;increment&quot;</span><span style="color:#24292E;">, IncrementGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;foreign&quot;</span><span style="color:#24292E;">, ForeignGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;sequence-identity&quot;</span><span style="color:#24292E;">, SequenceIdentityGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;enhanced-sequence&quot;</span><span style="color:#24292E;">, SequenceStyleGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;enhanced-table&quot;</span><span style="color:#24292E;">, TableGenerator.class );</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">register</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">strategy</span><span style="color:#24292E;">, Class </span><span style="color:#E36209;">generatorClass</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">		LOG.</span><span style="color:#6F42C1;">debugf</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;Registering IdentifierGenerator strategy [%s] -&gt; [%s]&quot;</span><span style="color:#24292E;">, strategy, generatorClass.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">final</span><span style="color:#24292E;"> Class previous </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> generatorStrategyToClassNameMap.</span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">( strategy, generatorClass );</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> ( previous </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> ) {</span></span>
<span class="line"><span style="color:#24292E;">			LOG.</span><span style="color:#6F42C1;">debugf</span><span style="color:#24292E;">( </span><span style="color:#032F62;">&quot;    - overriding [%s]&quot;</span><span style="color:#24292E;">, previous.</span><span style="color:#6F42C1;">getName</span><span style="color:#24292E;">() );</span></span>
<span class="line"><span style="color:#24292E;">		}</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_8-3-è®¾ç½®å­—æ®µç±»å‹" tabindex="-1">8.3. è®¾ç½®å­—æ®µç±»å‹ <a class="header-anchor" href="#_8-3-è®¾ç½®å­—æ®µç±»å‹" aria-label="Permalink to &quot;8.3. è®¾ç½®å­—æ®µç±»å‹&quot;">â€‹</a></h3><p><code>@Column</code> å£°æ˜å­—æ®µã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>è®¾ç½®å±æ€§ userName å¯¹åº”çš„æ•°æ®åº“å­—æ®µåä¸º user_nameï¼Œé•¿åº¦ä¸º 32ï¼Œéç©º</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Column</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">user_name</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">nullable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">false</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">length</span><span style="color:#F286C4;">=</span><span style="color:#BF9EEE;">32</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> userName;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;user_name&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">nullable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">length</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">32</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String userName;</span></span></code></pre></div><p>è®¾ç½®å­—æ®µç±»å‹å¹¶ä¸”åŠ é»˜è®¤å€¼ï¼Œè¿™ä¸ªè¿˜æ˜¯æŒºå¸¸ç”¨çš„ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Column</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">columnDefinition</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">tinyint(1) default 1</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Boolean</span><span style="color:#F6F6F4;"> enabled;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">columnDefinition</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;tinyint(1) default 1&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Boolean enabled;</span></span></code></pre></div><h3 id="_8-4-æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ" tabindex="-1">8.4. æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ <a class="header-anchor" href="#_8-4-æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ" aria-label="Permalink to &quot;8.4. æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ&quot;">â€‹</a></h3><p><code>@Transient</code> ï¼šå£°æ˜ä¸éœ€è¦ä¸æ•°æ®åº“æ˜ å°„çš„å­—æ®µï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ä¸éœ€è¦ä¿å­˜è¿›æ•°æ®åº“ ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è®©<code>secrect</code> è¿™ä¸ªå­—æ®µä¸è¢«æŒä¹…åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Transient</code>å…³é”®å­—å£°æ˜ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Entity</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F286C4;">=</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">USER</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">User</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    ......</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Transient</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> secrect; </span><span style="color:#7B7F8B;">// not persistent because of @Transient</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;USER&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    ......</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Transient</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String secrect; </span><span style="color:#6A737D;">// not persistent because of @Transient</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>é™¤äº† <code>@Transient</code>å…³é”®å­—å£°æ˜ï¼Œ è¿˜å¯ä»¥é‡‡ç”¨ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> secrect; </span><span style="color:#7B7F8B;">// not persistent because of static</span></span>
<span class="line"><span style="color:#F286C4;">final</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> secrect </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">Satish</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">; </span><span style="color:#7B7F8B;">// not persistent because of final</span></span>
<span class="line"><span style="color:#F286C4;">transient</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> secrect; </span><span style="color:#7B7F8B;">// not persistent because of transient</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">static</span><span style="color:#24292E;"> String secrect; </span><span style="color:#6A737D;">// not persistent because of static</span></span>
<span class="line"><span style="color:#D73A49;">final</span><span style="color:#24292E;"> String secrect </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Satish&quot;</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// not persistent because of final</span></span>
<span class="line"><span style="color:#D73A49;">transient</span><span style="color:#24292E;"> String secrect; </span><span style="color:#6A737D;">// not persistent because of transient</span></span></code></pre></div><p>ä¸€èˆ¬ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¯”è¾ƒå¤šã€‚</p><h3 id="_8-5-å£°æ˜å¤§å­—æ®µ" tabindex="-1">8.5. å£°æ˜å¤§å­—æ®µ <a class="header-anchor" href="#_8-5-å£°æ˜å¤§å­—æ®µ" aria-label="Permalink to &quot;8.5. å£°æ˜å¤§å­—æ®µ&quot;">â€‹</a></h3><p><code>@Lob</code>:å£°æ˜æŸä¸ªå­—æ®µä¸ºå¤§å­—æ®µã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Lob</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> content;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Lob</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String content;</span></span></code></pre></div><p>æ›´è¯¦ç»†çš„å£°æ˜ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Lob</span></span>
<span class="line"><span style="color:#7B7F8B;">//æŒ‡å®š Lob ç±»å‹æ•°æ®çš„è·å–ç­–ç•¥ï¼Œ FetchType.EAGER è¡¨ç¤ºéå»¶è¿ŸåŠ è½½ï¼Œè€Œ FetchType.LAZY è¡¨ç¤ºå»¶è¿ŸåŠ è½½ ï¼›</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Basic</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">fetch</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> FetchType.EAGER)</span></span>
<span class="line"><span style="color:#7B7F8B;">//columnDefinition å±æ€§æŒ‡å®šæ•°æ®è¡¨å¯¹åº”çš„ Lob å­—æ®µç±»å‹</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Column</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">content</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">columnDefinition</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">LONGTEXT NOT NULL</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> content;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Lob</span></span>
<span class="line"><span style="color:#6A737D;">//æŒ‡å®š Lob ç±»å‹æ•°æ®çš„è·å–ç­–ç•¥ï¼Œ FetchType.EAGER è¡¨ç¤ºéå»¶è¿ŸåŠ è½½ï¼Œè€Œ FetchType.LAZY è¡¨ç¤ºå»¶è¿ŸåŠ è½½ ï¼›</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Basic</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">fetch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> FetchType.EAGER)</span></span>
<span class="line"><span style="color:#6A737D;">//columnDefinition å±æ€§æŒ‡å®šæ•°æ®è¡¨å¯¹åº”çš„ Lob å­—æ®µç±»å‹</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;content&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">columnDefinition</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;LONGTEXT NOT NULL&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String content;</span></span></code></pre></div><h3 id="_8-6-åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ" tabindex="-1">8.6. åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ <a class="header-anchor" href="#_8-6-åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ" aria-label="Permalink to &quot;8.6. åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ&quot;">â€‹</a></h3><p>å¯ä»¥ä½¿ç”¨æšä¸¾ç±»å‹çš„å­—æ®µï¼Œä¸è¿‡æšä¸¾å­—æ®µè¦ç”¨<code>@Enumerated</code>æ³¨è§£ä¿®é¥°ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">enum</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Gender</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">MALE</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ç”·æ€§</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#BF9EEE;">FEMALE</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">å¥³æ€§</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> value;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">Gender</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">str</span><span style="color:#F6F6F4;">){</span></span>
<span class="line"><span style="color:#F6F6F4;">        value</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;">str;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Gender</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MALE</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ç”·æ€§&quot;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">FEMALE</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;å¥³æ€§&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String value;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Gender</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">str</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">str;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Entity</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Table</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">name</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">role</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Role</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Id</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">GeneratedValue</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">strategy</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Long</span><span style="color:#F6F6F4;"> id;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> name;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> description;</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Enumerated</span><span style="color:#F6F6F4;">(EnumType.STRING)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Gender</span><span style="color:#F6F6F4;"> gender;</span></span>
<span class="line"><span style="color:#F6F6F4;">    çœç•¥getter</span><span style="color:#F286C4;">/</span><span style="color:#F6F6F4;">setter......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Entity</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Table</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;role&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Role</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Id</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">GeneratedValue</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">strategy</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Long id;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String name;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String description;</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Enumerated</span><span style="color:#24292E;">(EnumType.STRING)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Gender gender;</span></span>
<span class="line"><span style="color:#24292E;">    çœç•¥getter</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">setter......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ•°æ®åº“é‡Œé¢å¯¹åº”å­˜å‚¨çš„æ˜¯ MALE/FEMALEã€‚</p><h3 id="_8-7-å¢åŠ å®¡è®¡åŠŸèƒ½" tabindex="-1">8.7. å¢åŠ å®¡è®¡åŠŸèƒ½ <a class="header-anchor" href="#_8-7-å¢åŠ å®¡è®¡åŠŸèƒ½" aria-label="Permalink to &quot;8.7. å¢åŠ å®¡è®¡åŠŸèƒ½&quot;">â€‹</a></h3><p>åªè¦ç»§æ‰¿äº† <code>AbstractAuditBase</code>çš„ç±»éƒ½ä¼šé»˜è®¤åŠ ä¸Šä¸‹é¢å››ä¸ªå­—æ®µã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Data</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">MappedSuperclass</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">EntityListeners</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">value</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> AuditingEntityListener.class)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">abstract</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">AbstractAuditBase</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">CreatedDate</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Column</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">updatable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">false</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonIgnore</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Instant</span><span style="color:#F6F6F4;"> createdAt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">LastModifiedDate</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonIgnore</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Instant</span><span style="color:#F6F6F4;"> updatedAt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">CreatedBy</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Column</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">updatable</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">false</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonIgnore</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> createdBy;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">LastModifiedBy</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonIgnore</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> updatedBy;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Data</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">MappedSuperclass</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EntityListeners</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">value</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> AuditingEntityListener.class)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AbstractAuditBase</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">CreatedDate</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">updatable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonIgnore</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Instant createdAt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">LastModifiedDate</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonIgnore</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Instant updatedAt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">CreatedBy</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Column</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">updatable</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonIgnore</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String createdBy;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">LastModifiedBy</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonIgnore</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String updatedBy;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æˆ‘ä»¬å¯¹åº”çš„å®¡è®¡åŠŸèƒ½å¯¹åº”åœ°é…ç½®ç±»å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼ˆSpring Security é¡¹ç›®ï¼‰:</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Configuration</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">EnableJpaAuditing</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">AuditSecurityConfiguration</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Bean</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">AuditorAware</span><span style="color:#F6F6F4;">&lt;String&gt; </span><span style="color:#62E884;">auditorAware</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> () </span><span style="color:#97E1F1;font-style:italic;">-&gt;</span><span style="color:#F6F6F4;"> Optional.</span><span style="color:#62E884;">ofNullable</span><span style="color:#F6F6F4;">(SecurityContextHolder.</span><span style="color:#62E884;">getContext</span><span style="color:#F6F6F4;">())</span></span>
<span class="line"><span style="color:#F6F6F4;">                .</span><span style="color:#62E884;">map</span><span style="color:#F6F6F4;">(SecurityContext</span><span style="color:#F286C4;">::</span><span style="color:#F6F6F4;">getAuthentication)</span></span>
<span class="line"><span style="color:#F6F6F4;">                .</span><span style="color:#62E884;">filter</span><span style="color:#F6F6F4;">(Authentication</span><span style="color:#F286C4;">::</span><span style="color:#F6F6F4;">isAuthenticated)</span></span>
<span class="line"><span style="color:#F6F6F4;">                .</span><span style="color:#62E884;">map</span><span style="color:#F6F6F4;">(Authentication</span><span style="color:#F286C4;">::</span><span style="color:#F6F6F4;">getName);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Configuration</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">EnableJpaAuditing</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">AuditSecurityConfiguration</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Bean</span></span>
<span class="line"><span style="color:#24292E;">    AuditorAware&lt;</span><span style="color:#D73A49;">String</span><span style="color:#24292E;">&gt; </span><span style="color:#6F42C1;">auditorAware</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">-&gt;</span><span style="color:#24292E;"> Optional.</span><span style="color:#6F42C1;">ofNullable</span><span style="color:#24292E;">(SecurityContextHolder.</span><span style="color:#6F42C1;">getContext</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">                .</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(SecurityContext</span><span style="color:#D73A49;">::</span><span style="color:#24292E;">getAuthentication)</span></span>
<span class="line"><span style="color:#24292E;">                .</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">(Authentication</span><span style="color:#D73A49;">::</span><span style="color:#24292E;">isAuthenticated)</span></span>
<span class="line"><span style="color:#24292E;">                .</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(Authentication</span><span style="color:#D73A49;">::</span><span style="color:#24292E;">getName);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢æ¶‰åŠåˆ°çš„ä¸€äº›æ³¨è§£ï¼š</p><ol><li><p><code>@CreatedDate</code>: è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºæ—¶é—´å­—æ®µï¼Œåœ¨è¿™ä¸ªå®ä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼</p></li><li><p><code>@CreatedBy</code> :è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºäººï¼Œåœ¨è¿™ä¸ªå®ä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼</p><p><code>@LastModifiedDate</code>ã€<code>@LastModifiedBy</code>åŒç†ã€‚</p></li></ol><p><code>@EnableJpaAuditing</code>ï¼šå¼€å¯ JPA å®¡è®¡åŠŸèƒ½ã€‚</p><h3 id="_8-8-åˆ é™¤-ä¿®æ”¹æ•°æ®" tabindex="-1">8.8. åˆ é™¤/ä¿®æ”¹æ•°æ® <a class="header-anchor" href="#_8-8-åˆ é™¤-ä¿®æ”¹æ•°æ®" aria-label="Permalink to &quot;8.8. åˆ é™¤/ä¿®æ”¹æ•°æ®&quot;">â€‹</a></h3><p><code>@Modifying</code> æ³¨è§£æç¤º JPA è¯¥æ“ä½œæ˜¯ä¿®æ”¹æ“ä½œ,æ³¨æ„è¿˜è¦é…åˆ<code>@Transactional</code>æ³¨è§£ä½¿ç”¨ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Repository</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">UserRepository</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">JpaRepository</span><span style="color:#F6F6F4;">&lt;User, Integer&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Modifying</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Transactional</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">rollbackFor</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Exception.class)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">deleteByUserName</span><span style="color:#F6F6F4;">(</span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">userName</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Repository</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">UserRepository</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JpaRepository</span><span style="color:#24292E;">&lt;</span><span style="color:#D73A49;">User</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">Integer</span><span style="color:#24292E;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Modifying</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Transactional</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">rollbackFor</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Exception.class)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">deleteByUserName</span><span style="color:#24292E;">(String </span><span style="color:#E36209;">userName</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_8-9-å…³è”å…³ç³»" tabindex="-1">8.9. å…³è”å…³ç³» <a class="header-anchor" href="#_8-9-å…³è”å…³ç³»" aria-label="Permalink to &quot;8.9. å…³è”å…³ç³»&quot;">â€‹</a></h3><ul><li><code>@OneToOne</code> å£°æ˜ä¸€å¯¹ä¸€å…³ç³»</li><li><code>@OneToMany</code> å£°æ˜ä¸€å¯¹å¤šå…³ç³»</li><li><code>@ManyToOne</code> å£°æ˜å¤šå¯¹ä¸€å…³ç³»</li><li><code>@MangToMang</code> å£°æ˜å¤šå¯¹å¤šå…³ç³»</li></ul><p>æ›´å¤šå…³äº Spring Boot JPA çš„æ–‡ç« è¯·çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485689&amp;idx=1&amp;sn=061b32c2222869932be5631fb0bb5260&amp;chksm=cea24732f9d5ce24a356fb3675170e7843addbfcc79ee267cfdb45c83fc7e90babf0f20d22e1&amp;token=292197051&amp;lang=zh_CN#rd" target="_blank" rel="noreferrer">ä¸€æ–‡ææ‡‚å¦‚ä½•åœ¨ Spring Boot æ­£ç¡®ä¸­ä½¿ç”¨ JPAopen in new window</a> ã€‚</p><h2 id="_9-äº‹åŠ¡-transactional-âœï¸-â¤ï¸" tabindex="-1">9. äº‹åŠ¡ <code>@Transactional</code> âœï¸ â¤ï¸ <a class="header-anchor" href="#_9-äº‹åŠ¡-transactional-âœï¸-â¤ï¸" aria-label="Permalink to &quot;9\\. äº‹åŠ¡ \`@Transactional\` âœï¸ â¤ï¸&quot;">â€‹</a></h2><p>åœ¨è¦å¼€å¯äº‹åŠ¡çš„æ–¹æ³•ä¸Šä½¿ç”¨<code>@Transactional</code>æ³¨è§£å³å¯!</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Transactional</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">rollbackFor</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Exception.class)</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">save</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Transactional</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">rollbackFor</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Exception.class)</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">save</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æˆ‘ä»¬çŸ¥é“ Exception åˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ RuntimeException å’Œéè¿è¡Œæ—¶å¼‚å¸¸ã€‚åœ¨<code>@Transactional</code>æ³¨è§£ä¸­å¦‚æœä¸é…ç½®<code>rollbackFor</code>å±æ€§,é‚£ä¹ˆäº‹åŠ¡åªä¼šåœ¨é‡åˆ°<code>RuntimeException</code>çš„æ—¶å€™æ‰ä¼šå›æ»š,åŠ ä¸Š<code>rollbackFor=Exception.class</code>,å¯ä»¥è®©äº‹åŠ¡åœ¨é‡åˆ°éè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¹Ÿå›æ»šã€‚ğŸ‘ˆ âš ï¸</p><p><code>@Transactional</code> æ³¨è§£ä¸€èˆ¬å¯ä»¥ä½œç”¨åœ¨<code>ç±»</code>æˆ–è€…<code>æ–¹æ³•</code>ä¸Šã€‚</p><ul><li><strong>ä½œç”¨äºç±»</strong>ï¼šå½“æŠŠ<code>@Transactional</code> æ³¨è§£æ”¾åœ¨ç±»ä¸Šæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰è¯¥ç±»çš„ public æ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±æ€§ä¿¡æ¯ã€‚</li><li><strong>ä½œç”¨äºæ–¹æ³•</strong>ï¼šå½“ç±»é…ç½®äº†<code>@Transactional</code>ï¼Œæ–¹æ³•ä¹Ÿé…ç½®äº†<code>@Transactional</code>ï¼Œæ–¹æ³•çš„äº‹åŠ¡ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚</li></ul><h2 id="_10-json-æ•°æ®å¤„ç†-â¤ï¸-âœï¸" tabindex="-1">10. json æ•°æ®å¤„ç† â¤ï¸ âœï¸ <a class="header-anchor" href="#_10-json-æ•°æ®å¤„ç†-â¤ï¸-âœï¸" aria-label="Permalink to &quot;10\\. json æ•°æ®å¤„ç† â¤ï¸ âœï¸&quot;">â€‹</a></h2><h3 id="_10-1-è¿‡æ»¤-json-æ•°æ®" tabindex="-1">10.1. è¿‡æ»¤ json æ•°æ® <a class="header-anchor" href="#_10-1-è¿‡æ»¤-json-æ•°æ®" aria-label="Permalink to &quot;10.1. è¿‡æ»¤ json æ•°æ®&quot;">â€‹</a></h3><p><strong><code>@JsonIgnoreProperties</code> ä½œç”¨åœ¨ç±»ä¸Šç”¨äºè¿‡æ»¤æ‰ç‰¹å®šå­—æ®µä¸è¿”å›æˆ–è€…ä¸è§£æã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">JsonIgnoreProperties</span><span style="color:#F6F6F4;">({</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">userRoles</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">})</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">User</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> userName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> fullName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> password;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">List</span><span style="color:#F6F6F4;">&lt;UserRole&gt; userRoles </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayList</span><span style="color:#F6F6F4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">JsonIgnoreProperties</span><span style="color:#24292E;">({</span><span style="color:#032F62;">&quot;userRoles&quot;</span><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String userName;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String fullName;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String password;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">UserRole</span><span style="color:#24292E;">&gt; userRoles </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><strong><code>@JsonIgnore</code>ä¸€èˆ¬ç”¨äºç±»çš„å±æ€§ä¸Šï¼Œä½œç”¨å’Œä¸Šé¢çš„<code>@JsonIgnoreProperties</code> ä¸€æ ·ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">User</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> userName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> fullName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> password;</span></span>
<span class="line"><span style="color:#F6F6F4;">   </span><span style="color:#7B7F8B;">//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonIgnore</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">List</span><span style="color:#F6F6F4;">&lt;UserRole&gt; userRoles </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">ArrayList</span><span style="color:#F6F6F4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String userName;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String fullName;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String password;</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6A737D;">//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonIgnore</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> List&lt;</span><span style="color:#D73A49;">UserRole</span><span style="color:#24292E;">&gt; userRoles </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="_10-2-æ ¼å¼åŒ–-json-æ•°æ®" tabindex="-1">10.2. æ ¼å¼åŒ– json æ•°æ® <a class="header-anchor" href="#_10-2-æ ¼å¼åŒ–-json-æ•°æ®" aria-label="Permalink to &quot;10.2. æ ¼å¼åŒ– json æ•°æ®&quot;">â€‹</a></h3><p><code>@JsonFormat</code>ä¸€èˆ¬ç”¨æ¥æ ¼å¼åŒ– json æ•°æ®ã€‚</p><p>æ¯”å¦‚ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">JsonFormat</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">shape</span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;">JsonFormat.Shape.STRING, </span><span style="color:#BF9EEE;">pattern</span><span style="color:#F286C4;">=</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">timezone</span><span style="color:#F286C4;">=</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">GMT</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Date</span><span style="color:#F6F6F4;"> date;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">JsonFormat</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">shape</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">JsonFormat.Shape.STRING, </span><span style="color:#005CC5;">pattern</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">timezone</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;GMT&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Date date;</span></span></code></pre></div><h3 id="_10-3-æ‰å¹³åŒ–å¯¹è±¡" tabindex="-1">10.3. æ‰å¹³åŒ–å¯¹è±¡ <a class="header-anchor" href="#_10-3-æ‰å¹³åŒ–å¯¹è±¡" aria-label="Permalink to &quot;10.3. æ‰å¹³åŒ–å¯¹è±¡&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Getter</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Setter</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ToString</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Account</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Location</span><span style="color:#F6F6F4;"> location;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PersonInfo</span><span style="color:#F6F6F4;"> personInfo;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">Getter</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">Setter</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">ToString</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Location</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">     </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> provinceName;</span></span>
<span class="line"><span style="color:#F6F6F4;">     </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> countyName;</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">Getter</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">Setter</span></span>
<span class="line"><span style="color:#F6F6F4;">  @</span><span style="color:#97E1F1;font-style:italic;">ToString</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">static</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">PersonInfo</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> userName;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">String</span><span style="color:#F6F6F4;"> fullName;</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Getter</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Setter</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ToString</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Location location;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> PersonInfo personInfo;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Getter</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Setter</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">ToString</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Location</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String provinceName;</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String countyName;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Getter</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">Setter</span></span>
<span class="line"><span style="color:#24292E;">  @</span><span style="color:#D73A49;">ToString</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">static</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PersonInfo</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String userName;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> String fullName;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æœªæ‰å¹³åŒ–ä¹‹å‰ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">location</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">provinceName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¹–åŒ—</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">countyName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ­¦æ±‰</span><span style="color:#DEE492;">&quot;</span></span>
<span class="line"><span style="color:#F6F6F4;">    },</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">personInfo</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">userName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">coder1234</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">fullName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">shaungkou</span><span style="color:#DEE492;">&quot;</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;location&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;provinceName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;æ¹–åŒ—&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;countyName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;æ­¦æ±‰&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;personInfo&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;userName&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;coder1234&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;fullName&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;shaungkou&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä½¿ç”¨<code>@JsonUnwrapped</code> æ‰å¹³å¯¹è±¡ä¹‹åï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Getter</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Setter</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ToString</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">Account</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonUnwrapped</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Location</span><span style="color:#F6F6F4;"> location;</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">JsonUnwrapped</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">private</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PersonInfo</span><span style="color:#F6F6F4;"> personInfo;</span></span>
<span class="line"><span style="color:#F6F6F4;">    ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Getter</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Setter</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ToString</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Account</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonUnwrapped</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> Location location;</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">JsonUnwrapped</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">private</span><span style="color:#24292E;"> PersonInfo personInfo;</span></span>
<span class="line"><span style="color:#24292E;">    ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">provinceName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ¹–åŒ—</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">countyName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ­¦æ±‰</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">userName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">coder1234</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">fullName</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">shaungkou</span><span style="color:#DEE492;">&quot;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;provinceName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;æ¹–åŒ—&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;countyName&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;æ­¦æ±‰&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;userName&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;coder1234&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;fullName&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;shaungkou&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="_11-æµ‹è¯•ç›¸å…³" tabindex="-1">11. æµ‹è¯•ç›¸å…³ <a class="header-anchor" href="#_11-æµ‹è¯•ç›¸å…³" aria-label="Permalink to &quot;11\\. æµ‹è¯•ç›¸å…³&quot;">â€‹</a></h2><p><strong><code>@ActiveProfiles</code>ä¸€èˆ¬ä½œç”¨äºæµ‹è¯•ç±»ä¸Šï¼Œ ç”¨äºå£°æ˜ç”Ÿæ•ˆçš„ Spring é…ç½®æ–‡ä»¶ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">SpringBootTest</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">webEnvironment</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> RANDOM_PORT)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">ActiveProfiles</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">test</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Slf4j</span></span>
<span class="line"><span style="color:#F286C4;">public</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">abstract</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">class</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;">TestBase</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  ......</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">SpringBootTest</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">webEnvironment</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> RANDOM_PORT)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">ActiveProfiles</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;test&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Slf4j</span></span>
<span class="line"><span style="color:#D73A49;">public</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">abstract</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TestBase</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  ......</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><strong><code>@Test</code>å£°æ˜ä¸€ä¸ªæ–¹æ³•ä¸ºæµ‹è¯•æ–¹æ³•</strong></p><p><strong><code>@Transactional</code>è¢«å£°æ˜çš„æµ‹è¯•æ–¹æ³•çš„æ•°æ®ä¼šå›æ»šï¼Œé¿å…æ±¡æŸ“æµ‹è¯•æ•°æ®ã€‚</strong></p><p><strong><code>@WithMockUser</code> Spring Security æä¾›çš„ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®ç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥èµ‹äºˆæƒé™ã€‚</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">@</span><span style="color:#97E1F1;font-style:italic;">Test</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">Transactional</span></span>
<span class="line"><span style="color:#F6F6F4;">    @</span><span style="color:#97E1F1;font-style:italic;">WithMockUser</span><span style="color:#F6F6F4;">(</span><span style="color:#BF9EEE;">username</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">user-id-18163138155</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#BF9EEE;">authorities</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ROLE_TEACHER</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">should_import_student_success</span><span style="color:#F6F6F4;">() throws Exception {</span></span>
<span class="line"><span style="color:#F6F6F4;">        ......</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">@</span><span style="color:#D73A49;">Test</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">Transactional</span></span>
<span class="line"><span style="color:#24292E;">    @</span><span style="color:#D73A49;">WithMockUser</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">username</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;user-id-18163138155&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">authorities</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ROLE_TEACHER&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">should_import_student_success</span><span style="color:#24292E;">() throws Exception {</span></span>
<span class="line"><span style="color:#24292E;">        ......</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span></code></pre></div>`,250),e=[o];function t(c,r,y,i,F,E){return a(),n("div",null,e)}const g=s(p,[["render",t]]);export{u as __pageData,g as default};
