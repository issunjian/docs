import{_ as n,o as a,c as l,V as s,C as p}from"./chunks/framework.c6d8cbec.js";const D=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"home/vite-plugin-shared.md","filePath":"home/vite-plugin-shared.md"}'),o={name:"home/vite-plugin-shared.md"},e=s('<h2 id="ä»£ç é“¾æ¥" tabindex="-1">ä»£ç é“¾æ¥ <a class="header-anchor" href="#ä»£ç é“¾æ¥" aria-label="Permalink to &quot;ä»£ç é“¾æ¥&quot;">â€‹</a></h2><p><a href="https://www.npmjs.com/package/vite-plugin-shared" target="_blank" rel="noreferrer"><img src="https://img.shields.io/npm/v/vite-plugin-shared" alt="npm"></a></p><p><a href="https://github.com/GauharChan/vite-plugin-shared" target="_blank" rel="noreferrer">github</a></p><blockquote><p>æ¼”ç¤ºè§†é¢‘</p><p><a href="https://www.bilibili.com/video/BV14k4y1b76q/?share_source=copy_web&amp;vd_source=a157eb10c7ad56e045dd5344a5c318b2" target="_blank" rel="noreferrer">Bç«™ç‰ˆæœ¬</a></p></blockquote><p>æœ‰å…´è¶£æŠŠæºç ä¸‹è½½ä¸‹æ¥ï¼Œå»<a href="https://github.com/GauharChan/vite-plugin-shared/tree/master/playground/shared" target="_blank" rel="noreferrer">playground</a>ç›®å½•è¿è¡Œä¸€ä¸‹ã€‚</p>',5),t=p("iframe",{width:"100%",height:"615",src:"https://www.youtube.com/embed/kcTpPguKIXc",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,-1),c=s(`<h2 id="éœ€æ±‚èƒŒæ™¯" tabindex="-1">éœ€æ±‚èƒŒæ™¯ <a class="header-anchor" href="#éœ€æ±‚èƒŒæ™¯" aria-label="Permalink to &quot;éœ€æ±‚èƒŒæ™¯&quot;">â€‹</a></h2><p>ç°æœ‰çš„ç›®å½•è§„èŒƒå¦‚ä¸‹</p><p>assets æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ˜¯é’ˆå¯¹å¤§æ¨¡å—ã€æŸä¸ªç«¯çš„<strong>å…¬å…±èµ„æº</strong>ï¼›ä¹Ÿå¯ä»¥æ˜¯å½“å‰å•ä¸€åŠŸèƒ½(å¦‚æœä½ è§‰å¾—æœ‰å¿…è¦)çš„èµ„æº</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#62E884;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">assets</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">components</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># ç»„ä»¶æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">ComA</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">src</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># ç»„ä»¶æ‰€æœ‰æ ¸å¿ƒå†…å®¹</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">index.ts</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># æœ¬ç»„ä»¶å‡ºå£æ–‡ä»¶ ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™æ˜¯å¼•ç”¨è¯¥æ–‡ä»¶</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">data</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">api</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># å½“å‰æ¨¡å—æ¶‰åŠåˆ°çš„æ¥å£</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">apiA.ts</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">hooks</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># é’©å­</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">useA.ts</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">types</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># tsç±»å‹</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">img</span><span style="color:#F6F6F4;"> </span><span style="color:#7B7F8B;"># å›¾ç‰‡èµ„æº</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">store</span></span>
<span class="line"><span style="color:#62E884;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”‚</span><span style="color:#F6F6F4;">   </span><span style="color:#E7EE98;">â”œâ”€â”€</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">storeA.ts</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">assets</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">components</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ç»„ä»¶æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ComA</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">src</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ç»„ä»¶æ‰€æœ‰æ ¸å¿ƒå†…å®¹</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">index.ts</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æœ¬ç»„ä»¶å‡ºå£æ–‡ä»¶ ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™æ˜¯å¼•ç”¨è¯¥æ–‡ä»¶</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">api</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å½“å‰æ¨¡å—æ¶‰åŠåˆ°çš„æ¥å£</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apiA.ts</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hooks</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># é’©å­</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">useA.ts</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">types</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># tsç±»å‹</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">img</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å›¾ç‰‡èµ„æº</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">store</span></span>
<span class="line"><span style="color:#6F42C1;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”‚</span><span style="color:#24292E;">   </span><span style="color:#032F62;">â”œâ”€â”€</span><span style="color:#24292E;"> </span><span style="color:#032F62;">storeA.ts</span></span></code></pre></div><p>å¤§æ¦‚ä¼šæ˜¯è¿™ä¸ªæ ·å­</p><p><img src="https://raw.githubusercontent.com/GauharChan/Picture-bed/main/img/image-20230306152413035.png" alt="image-20230306152413035"></p><p>è¿™æ ·çš„ç›®å½•ç”¨èµ·æ¥æŒºæ¸…æ™°çš„ï¼Œä½†åŒæ—¶å¸¦æ¥ä¸€ä¸ªç—›ç‚¹æ˜¯å±‚çº§å¤ªæ·±äº†ï¼Œè¿™ä¸»è¦æ˜¯ä½“ç°åœ¨é¡µé¢å¼•ç”¨ï¼Œç¼–å†™è·¯å¾„çš„æ—¶å€™ï¼Œå¢åŠ äº†å¼€å‘çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p><h2 id="å·¥å…·å®ç°" tabindex="-1">å·¥å…·å®ç° <a class="header-anchor" href="#å·¥å…·å®ç°" aria-label="Permalink to &quot;å·¥å…·å®ç°&quot;">â€‹</a></h2><h3 id="å¤´è„‘é£æš´" tabindex="-1">å¤´è„‘é£æš´ <a class="header-anchor" href="#å¤´è„‘é£æš´" aria-label="Permalink to &quot;å¤´è„‘é£æš´&quot;">â€‹</a></h3><blockquote><p>é‡ç”³ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ç—›ç‚¹å’Œå·¥å…·çš„ç›®çš„æ˜¯è§£å†³å¼•ç”¨çš„è·¯å¾„é—®é¢˜ï¼ŒåŸºäºä¸Šé¢çš„ç›®å½•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶æ˜¯è¿™æ ·çš„</p><p>å¹¶ä¸”é¡µé¢ä¸­æœ‰ä¸€å¤§å †çš„<code>import</code></p></blockquote><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { WeeksResult } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">../assets/components/CalendarCustom/src/api</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { useCardList } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./assets/data/hooks/useCard</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { WeeksResult } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;../assets/components/CalendarCustom/src/api&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useCardList } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./assets/data/hooks/useCard&quot;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>é‚£èƒ½æœ‰ä»€ä¹ˆæ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œæ­£å½“æˆ‘ä¸€ç­¹è«å±•çš„æ—¶å€™</p><p><img src="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/jj_emoji_25.51e6984.png" alt="[çµå…‰ä¸€ç°]"></p><p>å¿½ç„¶æƒ³åˆ°<code>vue</code>æºç ä¸­<a href="https://github.com/vuejs/core/blob/main/packages/shared/src/index.ts" target="_blank" rel="noreferrer">shared</a>ï¼Œè™½ç„¶ä»–çš„åŸæ„æ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å€Ÿé‰´è¿™ä¸ªæ€è·¯â€”â€”ç»Ÿä¸€å‡ºå…¥å£</p><p>å› ä¸ºæˆ‘ä»¬æ˜¯ä¸šåŠ¡å¼€å‘ï¼Œå¹¶ä¸æ˜¯<code>utils</code>ï¼Œæ‰€ä»¥æ›´åˆé€‚çš„åšæ³•æ˜¯åœ¨æ¯ä¸ª<code>assets</code>æ–‡ä»¶å¤¹ä¸‹éƒ½å†™ä¸€ä¸ªå‡ºå£æ–‡ä»¶<code>shared.ts</code>ï¼Œçœ‹åˆ°è¿™é‡Œä½ ä¼šæƒ³è¯´ï¼Œè¿™ä¸å°±æ˜¯å¹³æ—¶çš„<code>index.ts</code>çš„å‡ºå£å—ï¼Œå’Œ<code>shared</code>æœ‰ä»€ä¹ˆå…³ç³»</p><p>ä½†æˆ‘ç¡®å®æ˜¯å—åˆ°<a href="https://github.com/vuejs/core/blob/main/packages/shared/src/index.ts" target="_blank" rel="noreferrer">shared</a>çš„å¯å‘çš„ ğŸ˜…ï¼ŒåŒæ—¶è¿˜åšäº†ä¸€äº›æ”¹åŠ¨</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// @vue/shared</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./patchFlags</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./shapeFlags</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./slotFlags</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @vue/shared</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./patchFlags&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./shapeFlags&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./slotFlags&quot;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>ä¸Šé¢çš„ç”¨æ³•ç”¨åœ¨ä¸šåŠ¡å¼€å‘ä¸­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¯¼å‡ºæˆå‘˜çš„é‡å¤å‘½åã€‚æ‰€ä»¥å‘¢ï¼Œæˆ‘æœ€ç»ˆæ˜¯ä»¥æ–‡ä»¶åå‘½åï¼Œä¼šæ˜¯è¿™æ ·</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// shared.ts</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> CountCardIndex </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./components/CountCard/index</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> TimeLineIndex </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./components/TimeLine/index</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">*</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> dataApi </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./data/api</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> { CountCardIndex, TimeLineIndex, dataApi };</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// shared.ts</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> CountCardIndex </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./components/CountCard/index&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> TimeLineIndex </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./components/TimeLine/index&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> dataApi </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./data/api&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> { CountCardIndex, TimeLineIndex, dataApi };</span></span></code></pre></div><p>é¿å…äº†æ–‡ä»¶å†…éƒ¨å¯¼å‡ºçš„æˆå‘˜(å˜é‡ã€å‡½æ•°)åé‡å¤çš„é—®é¢˜</p><p>æœ‰äº†æ–¹æ¡ˆåï¼Œå°±æ˜¯ä»£ç ä¹¦å†™çš„é—®é¢˜äº†ï¼Œä¹ä¸€çœ‹å°±æ˜¯æŠŠ<code>assets</code>ä¸‹çš„<code>ts</code>å…¨éƒ½å¼•è¿›æ¥äº†å¹¶å¯¼å‡ºï¼Œè¿™ç§å•ä¸€ä¸”æ¯ç‡¥å¼€å‘äººå‘˜å»å†™è‚¯å®šæ˜¯ä¸å¤ªåˆé€‚çš„ï¼›å°±åƒ<code>æ¥å£api</code>ä¸€æ ·ï¼Œç°åœ¨å¾ˆå¤šå·¥å…·éƒ½å¯ä»¥è‡ªåŠ¨ç”Ÿæˆäº†ï¼Œæ¯”å¦‚<code>apiFox</code></p><p>ç†æ‰€å½“ç„¶ï¼Œæˆ‘ä»¬çš„<code>shared</code>ä¹Ÿåº”è¯¥è‡ªåŠ¨ç”Ÿæˆ</p><h3 id="ä»£ç å®ç°" tabindex="-1">ä»£ç å®ç° <a class="header-anchor" href="#ä»£ç å®ç°" aria-label="Permalink to &quot;ä»£ç å®ç°&quot;">â€‹</a></h3><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„<code>Windows</code>å’Œ<code>Mac</code>çš„å·®å¼‚æ€§ã€‚</p><ul><li>æ–‡ä»¶è·¯å¾„ <code>Windows</code>æ˜¯<code>\\</code>ï¼Œè€Œ<code>Mac</code>æ˜¯<code>/</code> ï¼Œä½¿ç”¨<code>path</code> åšå…¼å®¹</li><li><code>node_modules</code>çš„æ‰§è¡Œæ–‡ä»¶ç±»å‹ä¸ä¸€è‡´</li></ul></blockquote><h4 id="å…¨å±€å˜é‡" tabindex="-1">å…¨å±€å˜é‡ <a class="header-anchor" href="#å…¨å±€å˜é‡" aria-label="Permalink to &quot;å…¨å±€å˜é‡&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> ChildProcess </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">node:child_process</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> chalk </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">chalk</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> fs </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">node:fs</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> os </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">node:os</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> Path </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">node:path</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> sep </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Path.sep;</span></span>
<span class="line"><span style="color:#7B7F8B;">/** æœ€ç»ˆç”Ÿæˆçš„shared.tsæ–‡ä»¶é›†åˆ */</span></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> sharedList </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Set</span><span style="color:#F6F6F4;">();</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ChildProcess </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;node:child_process&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> chalk </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;chalk&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> fs </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;node:fs&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> os </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;node:os&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Path </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;node:path&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sep</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Path.sep;</span></span>
<span class="line"><span style="color:#6A737D;">/** æœ€ç»ˆç”Ÿæˆçš„shared.tsæ–‡ä»¶é›†åˆ */</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sharedList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">();</span></span></code></pre></div><h4 id="_1-æ‰¾åˆ°viewsæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„assetsæ–‡ä»¶å¤¹è·¯å¾„" tabindex="-1">1.æ‰¾åˆ°<code>views</code>æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„<code>assets</code>æ–‡ä»¶å¤¹è·¯å¾„ <a class="header-anchor" href="#_1-æ‰¾åˆ°viewsæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„assetsæ–‡ä»¶å¤¹è·¯å¾„" aria-label="Permalink to &quot;1.æ‰¾åˆ°\`views\`æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„\`assets\`æ–‡ä»¶å¤¹è·¯å¾„&quot;">â€‹</a></h4><blockquote><p>é€’å½’éå†ä¼ å…¥çš„è·¯å¾„ï¼Œæ‰¾åˆ°æ‰€æœ‰ assets æ–‡ä»¶å¤¹çš„è·¯å¾„å¹¶è¿”å›</p></blockquote><p>è¿™é‡Œçš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå…ˆæ‹¿åˆ°ç›®å½•ä¸‹çš„å­ç›®å½•ï¼Œåˆ¤æ–­åå­—æ˜¯å¦ä¸º<code>assets</code>ï¼›æ˜¯åˆ™è®°å½•èµ·æ¥ï¼Œå¦åˆ™é€’å½’</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> é€’å½’éå†ä¼ å…¥çš„è·¯å¾„ï¼Œæ‰¾åˆ°æ‰€æœ‰assetsæ–‡ä»¶å¤¹çš„è·¯å¾„</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#7B7F8B;"> é»˜è®¤æ˜¯éå†views</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getAssetsSet</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(dirName, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">src/views</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">pathSet</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">&gt;()</span></span>
<span class="line"><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">&gt; {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> dirArr </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">readdirSync</span><span style="color:#F6F6F4;">(path);</span></span>
<span class="line"><span style="color:#F6F6F4;">  dirArr.</span><span style="color:#62E884;">forEach</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">dir</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> isDirectory </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">lstatSync</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">path</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">/</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">dir</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span><span style="color:#F6F6F4;">).</span><span style="color:#62E884;">isDirectory</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (isDirectory) {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (dir </span><span style="color:#F286C4;">===</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">assets</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        pathSet.</span><span style="color:#62E884;">add</span><span style="color:#F6F6F4;">(Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(path, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">assets</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">));</span></span>
<span class="line"><span style="color:#F6F6F4;">      } </span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// å¦‚æœæ˜¯å…¶ä»–æ–‡ä»¶å¤¹ï¼Œé€’å½’éå†</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#62E884;">getAssetsSet</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">path</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">/</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">dir</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span><span style="color:#F6F6F4;">, pathSet);</span></span>
<span class="line"><span style="color:#F6F6F4;">      }</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">  });</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> pathSet;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> é€’å½’éå†ä¼ å…¥çš„è·¯å¾„ï¼Œæ‰¾åˆ°æ‰€æœ‰assetsæ–‡ä»¶å¤¹çš„è·¯å¾„</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">path</span><span style="color:#6A737D;"> é»˜è®¤æ˜¯éå†views</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAssetsSet</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">path</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(dirName, </span><span style="color:#032F62;">&#39;src/views&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">pathSet</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">string</span><span style="color:#24292E;">&gt;()</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">string</span><span style="color:#24292E;">&gt; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dirArr</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">readdirSync</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">  dirArr.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">dir</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">isDirectory</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">lstatSync</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">path</span><span style="color:#032F62;">}/\${</span><span style="color:#24292E;">dir</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">isDirectory</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (isDirectory) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (dir </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;assets&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        pathSet.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(path, </span><span style="color:#032F62;">&#39;assets&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">      } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// å¦‚æœæ˜¯å…¶ä»–æ–‡ä»¶å¤¹ï¼Œé€’å½’éå†</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">getAssetsSet</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">path</span><span style="color:#032F62;">}/\${</span><span style="color:#24292E;">dir</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">, pathSet);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> pathSet;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_2-é€šè¿‡assetsè·¯å¾„éå†æŸ¥æ‰¾è¯¥ç›®å½•ç›¸å…³çš„tsæ–‡ä»¶è·¯å¾„" tabindex="-1">2.é€šè¿‡<code>assets</code>è·¯å¾„éå†æŸ¥æ‰¾è¯¥ç›®å½•ç›¸å…³çš„<code>ts</code>æ–‡ä»¶è·¯å¾„ <a class="header-anchor" href="#_2-é€šè¿‡assetsè·¯å¾„éå†æŸ¥æ‰¾è¯¥ç›®å½•ç›¸å…³çš„tsæ–‡ä»¶è·¯å¾„" aria-label="Permalink to &quot;2.é€šè¿‡\`assets\`è·¯å¾„éå†æŸ¥æ‰¾è¯¥ç›®å½•ç›¸å…³çš„\`ts\`æ–‡ä»¶è·¯å¾„&quot;">â€‹</a></h4><p>æ‹†è§£ä¸€ä¸‹</p><ul><li>éå†ä¼ å…¥çš„å­ç›®å½•ï¼Œå¹¶è·å–æ–‡ä»¶ä¿¡æ¯</li><li>å¦‚æœæ˜¯æ–‡ä»¶å¤¹ <ul><li>ç»„ä»¶æ–‡ä»¶å¤¹ ç›´æ¥å– compoents/\${dir}/index.tsã€‚å› ä¸ºç»„ä»¶æ–‡ä»¶å¤¹çš„è§„èŒƒï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª<code>src</code>æ–‡ä»¶å¤¹å’Œ<code>index.ts</code>å‡ºå£</li><li>å…¶ä»–æ–‡ä»¶å¤¹ç»§ç»­é€’å½’ï¼Œæ‰¾åˆ°å…¶æ‰€æœ‰çš„ ts æ–‡ä»¶ä¸ºæ­¢</li></ul></li><li>å¦‚æœæ˜¯ ts æ–‡ä»¶ï¼Œç›´æ¥è®°å½•</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> è·å–assetsç›®å½•ä¸‹æ‰€æœ‰çš„tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">parentPath</span><span style="color:#7B7F8B;"> å½“å‰æ–‡ä»¶å¤¹è·¯å¾„</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string[]}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">childDirs</span><span style="color:#7B7F8B;"> å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å­ç›®å½•ã€å­æ–‡ä»¶</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{Set}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">pathSet</span><span style="color:#7B7F8B;"> tsæ–‡ä»¶é›†åˆ</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@returns</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{Set}</span><span style="color:#7B7F8B;"> pathSet tsæ–‡ä»¶é›†åˆ</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">recursion</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">parentPath</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">childDirs</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">[],</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">pathSet</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;font-weight:bold;">new</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">AssetsFile</span><span style="color:#F6F6F4;">&gt;()</span></span>
<span class="line"><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">AssetsFile</span><span style="color:#F6F6F4;">&gt; {</span></span>
<span class="line"><span style="color:#F6F6F4;">  childDirs.</span><span style="color:#62E884;">forEach</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">item</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> stat </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">lstatSync</span><span style="color:#F6F6F4;">(Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(parentPath, item));</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// å¦‚æœæ˜¯æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (stat.</span><span style="color:#62E884;">isDirectory</span><span style="color:#F6F6F4;">()) {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#7B7F8B;">// components ç›´æ¥å–compoents/\${dir}/index.ts</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (item.</span><span style="color:#62E884;">toLowerCase</span><span style="color:#F6F6F4;">().</span><span style="color:#62E884;">includes</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">component</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">)) {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> componentPath </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(parentPath, item);</span></span>
<span class="line"><span style="color:#F6F6F4;">        fs.</span><span style="color:#62E884;">readdirSync</span><span style="color:#F6F6F4;">(componentPath)</span></span>
<span class="line"><span style="color:#F6F6F4;">          .</span><span style="color:#62E884;">filter</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">com</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">lstatSync</span><span style="color:#F6F6F4;">(Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(componentPath, com)).</span><span style="color:#62E884;">isDirectory</span><span style="color:#F6F6F4;">())</span></span>
<span class="line"><span style="color:#F6F6F4;">          .</span><span style="color:#62E884;">forEach</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">com</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#7B7F8B;">// åˆ¤æ–­æœ‰æ²¡æœ‰index.tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F6F6F4;">            </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (fs.</span><span style="color:#62E884;">existsSync</span><span style="color:#F6F6F4;">(Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(componentPath, com, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">index.ts</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">))) {</span></span>
<span class="line"><span style="color:#F6F6F4;">              pathSet.</span><span style="color:#62E884;">add</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">                url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(componentPath, com, </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">index.ts</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">                name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getExportName</span><span style="color:#F6F6F4;">(Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(componentPath, com), </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">index.ts</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">),</span></span>
<span class="line"><span style="color:#F6F6F4;">              });</span></span>
<span class="line"><span style="color:#F6F6F4;">            }</span></span>
<span class="line"><span style="color:#F6F6F4;">          });</span></span>
<span class="line"><span style="color:#F6F6F4;">      } </span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> path </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(parentPath, item);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// è·å–å­ç›®å½•</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> dir </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">readdirSync</span><span style="color:#F6F6F4;">(path);</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (</span><span style="color:#F286C4;">!</span><span style="color:#F6F6F4;">dir) </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#7B7F8B;">// é€’å½’éå†è§£ææ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#62E884;">recursion</span><span style="color:#F6F6F4;">(path, dir, pathSet);</span></span>
<span class="line"><span style="color:#F6F6F4;">      }</span></span>
<span class="line"><span style="color:#F6F6F4;">    } </span><span style="color:#F286C4;">else</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (item.</span><span style="color:#62E884;">endsWith</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">.ts</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">)) {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#7B7F8B;">// &amp;&amp; stat.size &gt; 0 stat.size è¿‡æ»¤ç©ºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#7B7F8B;">// tsæ–‡ä»¶ï¼Œç›´æ¥è®°å½•</span></span>
<span class="line"><span style="color:#F6F6F4;">      pathSet.</span><span style="color:#62E884;">add</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">        url</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> Path.</span><span style="color:#62E884;">resolve</span><span style="color:#F6F6F4;">(parentPath, item),</span></span>
<span class="line"><span style="color:#F6F6F4;">        name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getExportName</span><span style="color:#F6F6F4;">(parentPath, item),</span></span>
<span class="line"><span style="color:#F6F6F4;">      });</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">  });</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> pathSet;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"><span style="color:#7B7F8B;">/** hooksUseWeek æ–‡ä»¶å¤¹å+tsæ–‡ä»¶å(é©¼å³°) */</span></span>
<span class="line"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getExportName</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">parentPath</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">, </span><span style="color:#FFB86C;font-style:italic;">fileName</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">/** ä¸Šå±‚æ–‡ä»¶å¤¹å */</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> firstName </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> parentPath.</span><span style="color:#62E884;">split</span><span style="color:#F6F6F4;">(sep).</span><span style="color:#62E884;">pop</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">/** æ–‡ä»¶åï¼Œä¸åŒ…å«æ–‡ä»¶ç±»å‹åç¼€ */</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> lastName </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fileName.</span><span style="color:#62E884;">split</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">.</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">).</span><span style="color:#62E884;">shift</span><span style="color:#F6F6F4;">() </span><span style="color:#F286C4;">||</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> arr </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> lastName.</span><span style="color:#62E884;">split</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// é¦–å­—æ¯å¤§å†™</span></span>
<span class="line"><span style="color:#F6F6F4;">  arr[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">] </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> arr[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">].</span><span style="color:#62E884;">toUpperCase</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">firstName</span><span style="color:#F286C4;">}\${</span><span style="color:#F6F6F4;">arr.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> è·å–assetsç›®å½•ä¸‹æ‰€æœ‰çš„tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">parentPath</span><span style="color:#6A737D;"> å½“å‰æ–‡ä»¶å¤¹è·¯å¾„</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string[]}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">childDirs</span><span style="color:#6A737D;"> å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å­ç›®å½•ã€å­æ–‡ä»¶</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{Set}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">pathSet</span><span style="color:#6A737D;"> tsæ–‡ä»¶é›†åˆ</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@returns</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{Set}</span><span style="color:#6A737D;"> pathSet tsæ–‡ä»¶é›†åˆ</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">recursion</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">parentPath</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">childDirs</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">[],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">pathSet</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">AssetsFile</span><span style="color:#24292E;">&gt;()</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">AssetsFile</span><span style="color:#24292E;">&gt; {</span></span>
<span class="line"><span style="color:#24292E;">  childDirs.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">stat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">lstatSync</span><span style="color:#24292E;">(Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(parentPath, item));</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¦‚æœæ˜¯æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (stat.</span><span style="color:#6F42C1;">isDirectory</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// components ç›´æ¥å–compoents/\${dir}/index.ts</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (item.</span><span style="color:#6F42C1;">toLowerCase</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">includes</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;component&#39;</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">componentPath</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(parentPath, item);</span></span>
<span class="line"><span style="color:#24292E;">        fs.</span><span style="color:#6F42C1;">readdirSync</span><span style="color:#24292E;">(componentPath)</span></span>
<span class="line"><span style="color:#24292E;">          .</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">((</span><span style="color:#E36209;">com</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">lstatSync</span><span style="color:#24292E;">(Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(componentPath, com)).</span><span style="color:#6F42C1;">isDirectory</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">          .</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">com</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// åˆ¤æ–­æœ‰æ²¡æœ‰index.tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (fs.</span><span style="color:#6F42C1;">existsSync</span><span style="color:#24292E;">(Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(componentPath, com, </span><span style="color:#032F62;">&#39;index.ts&#39;</span><span style="color:#24292E;">))) {</span></span>
<span class="line"><span style="color:#24292E;">              pathSet.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">                url: Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(componentPath, com, </span><span style="color:#032F62;">&#39;index.ts&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">                name: </span><span style="color:#6F42C1;">getExportName</span><span style="color:#24292E;">(Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(componentPath, com), </span><span style="color:#032F62;">&#39;index.ts&#39;</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">              });</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">          });</span></span>
<span class="line"><span style="color:#24292E;">      } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">path</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(parentPath, item);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è·å–å­ç›®å½•</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dir</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">readdirSync</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">dir) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// é€’å½’éå†è§£ææ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">recursion</span><span style="color:#24292E;">(path, dir, pathSet);</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (item.</span><span style="color:#6F42C1;">endsWith</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.ts&#39;</span><span style="color:#24292E;">)) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// &amp;&amp; stat.size &gt; 0 stat.size è¿‡æ»¤ç©ºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// tsæ–‡ä»¶ï¼Œç›´æ¥è®°å½•</span></span>
<span class="line"><span style="color:#24292E;">      pathSet.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        url: Path.</span><span style="color:#6F42C1;">resolve</span><span style="color:#24292E;">(parentPath, item),</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#6F42C1;">getExportName</span><span style="color:#24292E;">(parentPath, item),</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> pathSet;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;">/** hooksUseWeek æ–‡ä»¶å¤¹å+tsæ–‡ä»¶å(é©¼å³°) */</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getExportName</span><span style="color:#24292E;">(</span><span style="color:#E36209;">parentPath</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">, </span><span style="color:#E36209;">fileName</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/** ä¸Šå±‚æ–‡ä»¶å¤¹å */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">firstName</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> parentPath.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(sep).</span><span style="color:#6F42C1;">pop</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/** æ–‡ä»¶åï¼Œä¸åŒ…å«æ–‡ä»¶ç±»å‹åç¼€ */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">lastName</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fileName.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">shift</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">arr</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> lastName.</span><span style="color:#6F42C1;">split</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// é¦–å­—æ¯å¤§å†™</span></span>
<span class="line"><span style="color:#24292E;">  arr[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> arr[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].</span><span style="color:#6F42C1;">toUpperCase</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">firstName</span><span style="color:#032F62;">}\${</span><span style="color:#24292E;">arr</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">join</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_3-ç»„åˆtsæ–‡ä»¶è·¯å¾„å¹¶ç”Ÿæˆä»£ç " tabindex="-1">3.ç»„åˆ<code>ts</code>æ–‡ä»¶è·¯å¾„å¹¶ç”Ÿæˆä»£ç  <a class="header-anchor" href="#_3-ç»„åˆtsæ–‡ä»¶è·¯å¾„å¹¶ç”Ÿæˆä»£ç " aria-label="Permalink to &quot;3.ç»„åˆ\`ts\`æ–‡ä»¶è·¯å¾„å¹¶ç”Ÿæˆä»£ç &quot;">â€‹</a></h4><p>ç”Ÿæˆä»£ç å°±å¾ˆç®€å•äº†ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»è·å–åˆ°æ‰€æœ‰çš„<strong>ts æ–‡ä»¶è·¯å¾„å’Œå¯¼å‡ºçš„å‘½å</strong>äº†ï¼›è¿™é‡Œä¸»è¦å°±æ˜¯æˆªå–<code>/assets</code>åé¢çš„è·¯å¾„ï¼Œç„¶åæ‹¼æ¥å¥½æ¨¡æ¿å­—ç¬¦ä¸²</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getContent</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">pathSet</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">AssetsFile</span><span style="color:#F6F6F4;">&gt;) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">let</span><span style="color:#F6F6F4;"> importArr</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">[] </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> [];</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// å¯¼å‡ºçš„å˜é‡å</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">let</span><span style="color:#F6F6F4;"> exportArr</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">[] </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> [];</span></span>
<span class="line"><span style="color:#F6F6F4;">  pathSet.</span><span style="color:#62E884;">forEach</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">item</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> index </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> item.url.</span><span style="color:#62E884;">search</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">sep</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">assets\`</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// è§£æè·å–/assetsåé¢çš„è·¯å¾„ windowså’Œmacçš„è·¯å¾„å¼€å¤´éƒ¨åˆ†ä¸ä¸€è‡´ï¼Œwindowä»¥/å¼€å¤´</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> url </span><span style="color:#F286C4;">=</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#E7EE98;">\`.</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">item.url.</span><span style="color:#62E884;">startsWith</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">?</span><span style="color:#E7EE98;"> </span><span style="color:#DEE492;">&quot;&quot;</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">+</span></span>
<span class="line"><span style="color:#F6F6F4;">      item.url.</span><span style="color:#62E884;">substring</span><span style="color:#F6F6F4;">(index </span><span style="color:#F286C4;">+</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/assets</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">.length);</span></span>
<span class="line"><span style="color:#F6F6F4;">    importArr.</span><span style="color:#62E884;">push</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#E7EE98;">\`import * as </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">item.name</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> from &#39;</span><span style="color:#F286C4;">\${</span></span>
<span class="line"><span style="color:#E7EE98;">        </span><span style="color:#F6F6F4;">url.</span><span style="color:#62E884;">replaceAll</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#F286C4;">\\\\</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">, </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">).</span><span style="color:#62E884;">split</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">.ts</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">]</span></span>
<span class="line"><span style="color:#E7EE98;">      </span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">&#39;;</span><span style="color:#F286C4;">\\n</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"><span style="color:#F6F6F4;">    exportArr.</span><span style="color:#62E884;">push</span><span style="color:#F6F6F4;">(item.name);</span></span>
<span class="line"><span style="color:#F6F6F4;">  });</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> content </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">importArr.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span></span>
<span class="line"><span style="color:#E7EE98;">export {</span></span>
<span class="line"><span style="color:#E7EE98;">  </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">exportArr.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">,</span><span style="color:#F286C4;">\\n</span><span style="color:#E7EE98;">  </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">,</span></span>
<span class="line"><span style="color:#E7EE98;">};</span></span>
<span class="line"><span style="color:#E7EE98;">\`</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> content;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getContent</span><span style="color:#24292E;">(</span><span style="color:#E36209;">pathSet</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">AssetsFile</span><span style="color:#24292E;">&gt;) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> importArr</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [];</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å¯¼å‡ºçš„å˜é‡å</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> exportArr</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">[] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [];</span></span>
<span class="line"><span style="color:#24292E;">  pathSet.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">index</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> item.url.</span><span style="color:#6F42C1;">search</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">sep</span><span style="color:#032F62;">}assets\`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// è§£æè·å–/assetsåé¢çš„è·¯å¾„ windowså’Œmacçš„è·¯å¾„å¼€å¤´éƒ¨åˆ†ä¸ä¸€è‡´ï¼Œwindowä»¥/å¼€å¤´</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">url</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">\`.\${</span><span style="color:#24292E;">item</span><span style="color:#032F62;">.</span><span style="color:#24292E;">url</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">startsWith</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#032F62;">) </span><span style="color:#D73A49;">?</span><span style="color:#032F62;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">:</span><span style="color:#032F62;"> </span><span style="color:#032F62;">&quot;/&quot;}\`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">      item.url.</span><span style="color:#6F42C1;">substring</span><span style="color:#24292E;">(index </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/assets&quot;</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    importArr.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">\`import * as \${</span><span style="color:#24292E;">item</span><span style="color:#032F62;">.</span><span style="color:#24292E;">name</span><span style="color:#032F62;">} from &#39;\${</span></span>
<span class="line"><span style="color:#032F62;">        </span><span style="color:#24292E;">url</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">replaceAll</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">&quot;</span><span style="color:#032F62;">, </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#032F62;">).</span><span style="color:#6F42C1;">split</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;.ts&quot;</span><span style="color:#032F62;">)[</span><span style="color:#005CC5;">0</span><span style="color:#032F62;">]</span></span>
<span class="line"><span style="color:#032F62;">      </span><span style="color:#032F62;">}&#39;;</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">\`</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">    exportArr.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(item.name);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">content</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">importArr</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">join</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}</span></span>
<span class="line"><span style="color:#032F62;">export {</span></span>
<span class="line"><span style="color:#032F62;">  \${</span><span style="color:#24292E;">exportArr</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">join</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;,</span><span style="color:#005CC5;">\\n</span><span style="color:#032F62;">  &quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">},</span></span>
<span class="line"><span style="color:#032F62;">};</span></span>
<span class="line"><span style="color:#032F62;">\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> content;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_4-åˆ›å»ºå‡½æ•°" tabindex="-1">4.åˆ›å»ºå‡½æ•° <a class="header-anchor" href="#_4-åˆ›å»ºå‡½æ•°" aria-label="Permalink to &quot;4.åˆ›å»ºå‡½æ•°&quot;">â€‹</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> æ ¹æ®è·¯å¾„éå†assetsæ‰€æœ‰ç›®å½•åˆ›å»ºshared.ts</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{ string }</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">targetPath</span><span style="color:#7B7F8B;"> ç›®æ ‡assetsè·¯å¾„</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">createShared</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">targetPath</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// assetsçš„å­ç›®å½•</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> assetsModules </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> fs.</span><span style="color:#62E884;">readdirSync</span><span style="color:#F6F6F4;">(targetPath);</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// éå†è·å–æ‰€æœ‰tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> allTs </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">recursion</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">    targetPath,</span></span>
<span class="line"><span style="color:#F6F6F4;">    assetsModules.</span><span style="color:#62E884;">filter</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">file</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">!</span><span style="color:#F6F6F4;">file.</span><span style="color:#62E884;">endsWith</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">.ts</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)) </span><span style="color:#7B7F8B;">// å‰”é™¤shared.ts</span></span>
<span class="line"><span style="color:#F6F6F4;">  );</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// å†™å…¥ä»£ç å†…å®¹</span></span>
<span class="line"><span style="color:#F6F6F4;">  fs.</span><span style="color:#62E884;">writeFileSync</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">targetPath</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">/shared.ts\`</span><span style="color:#F6F6F4;">, </span><span style="color:#62E884;">getContent</span><span style="color:#F6F6F4;">(allTs), </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">utf-8</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">  sharedList.</span><span style="color:#62E884;">add</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">targetPath</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">/shared.ts\`</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> æ ¹æ®è·¯å¾„éå†assetsæ‰€æœ‰ç›®å½•åˆ›å»ºshared.ts</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{ string }</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">targetPath</span><span style="color:#6A737D;"> ç›®æ ‡assetsè·¯å¾„</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createShared</span><span style="color:#24292E;">(</span><span style="color:#E36209;">targetPath</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// assetsçš„å­ç›®å½•</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">assetsModules</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> fs.</span><span style="color:#6F42C1;">readdirSync</span><span style="color:#24292E;">(targetPath);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// éå†è·å–æ‰€æœ‰tsæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">allTs</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">recursion</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    targetPath,</span></span>
<span class="line"><span style="color:#24292E;">    assetsModules.</span><span style="color:#6F42C1;">filter</span><span style="color:#24292E;">((</span><span style="color:#E36209;">file</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!</span><span style="color:#24292E;">file.</span><span style="color:#6F42C1;">endsWith</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;.ts&quot;</span><span style="color:#24292E;">)) </span><span style="color:#6A737D;">// å‰”é™¤shared.ts</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å†™å…¥ä»£ç å†…å®¹</span></span>
<span class="line"><span style="color:#24292E;">  fs.</span><span style="color:#6F42C1;">writeFileSync</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">targetPath</span><span style="color:#032F62;">}/shared.ts\`</span><span style="color:#24292E;">, </span><span style="color:#6F42C1;">getContent</span><span style="color:#24292E;">(allTs), </span><span style="color:#032F62;">&quot;utf-8&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  sharedList.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">targetPath</span><span style="color:#032F62;">}/shared.ts\`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="ä»£ç ä¼˜åŒ–" tabindex="-1">ä»£ç ä¼˜åŒ– <a class="header-anchor" href="#ä»£ç ä¼˜åŒ–" aria-label="Permalink to &quot;ä»£ç ä¼˜åŒ–&quot;">â€‹</a></h3><h4 id="eslint-ä¿®å¤" tabindex="-1">Eslint ä¿®å¤ <a class="header-anchor" href="#eslint-ä¿®å¤" aria-label="Permalink to &quot;Eslint ä¿®å¤&quot;">â€‹</a></h4><p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†ä»£ç çš„ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨<code>getContent</code>ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸­è¿˜ç‰¹æ„è¿›è¡Œäº†æ¢è¡Œï¼Œå¢åŠ é€—å·ç­‰ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®ä¿ç¬¦åˆé¡¹ç›®çš„<code>Eslint</code>è§„åˆ™ï¼Œæˆ–è€…è¯´ç”Ÿæˆçš„ä»£ç æ ¼å¼å¹¶ä¸å¯æ§</p><p>å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ç”Ÿæˆå®Œæ–‡ä»¶åè°ƒç”¨<code>eslint</code>è¿›è¡Œä¿®å¤ï¼›</p><p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ª<code>run</code>å‡½æ•°ï¼Œå¹¶ä½œä¸ºæœ€ç»ˆçš„æ‰§è¡Œå‡½æ•°</p><ul><li>æ¥æ”¶è·¯å¾„å¹¶è°ƒç”¨<code>createShared</code>åˆ›å»º<code>shared</code>æ–‡ä»¶ï¼ŒåŒæ—¶æ”¶é›†å¥½è·¯å¾„<code>sharedList</code></li><li>æ‰§è¡Œ<code>eslint</code>å‘½ä»¤ä¿®å¤</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string[]}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">dirs</span><span style="color:#7B7F8B;"> é»˜è®¤éå†æ•´ä¸ªviews</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">dirs</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">[] </span><span style="color:#F286C4;">|</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Set</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">getAssetsSet</span><span style="color:#F6F6F4;">()) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  sharedList.</span><span style="color:#62E884;">clear</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">  dirs.</span><span style="color:#62E884;">forEach</span><span style="color:#F6F6F4;">((</span><span style="color:#FFB86C;font-style:italic;">dir</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">createShared</span><span style="color:#F6F6F4;">(dir));</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> fileUrls </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Array.</span><span style="color:#62E884;">from</span><span style="color:#F6F6F4;">(sharedList).</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// eslint ä¿®å¤</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">try</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    ChildProcess.</span><span style="color:#62E884;">execSync</span><span style="color:#F6F6F4;">(</span><span style="color:#E7EE98;">\`eslint </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">fileUrls</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> --fix\`</span><span style="color:#F6F6F4;">);</span></span>
<span class="line"><span style="color:#F6F6F4;">    console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.bgGreen.</span><span style="color:#62E884;">black</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> SUCCESS </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.</span><span style="color:#62E884;">cyan</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#E7EE98;">        </span><span style="color:#E7EE98;">\`ç”Ÿæˆäº†</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">sharedList.size</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">ä¸ªæ–‡ä»¶ï¼Œå¹¶å·²ç»ä¿®å¤å¥½Eslint\`</span></span>
<span class="line"><span style="color:#E7EE98;">      </span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"><span style="color:#F6F6F4;">  } </span><span style="color:#F286C4;">catch</span><span style="color:#F6F6F4;"> (error) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.bgRed.</span><span style="color:#62E884;">white</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> ERROR </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.</span><span style="color:#62E884;">red</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">eslint ä¿®å¤å¤±è´¥</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#F6F6F4;">    );</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> æ‰§è¡Œå‡½æ•°</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string[]}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">dirs</span><span style="color:#6A737D;"> é»˜è®¤éå†æ•´ä¸ªviews</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(</span><span style="color:#E36209;">dirs</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">[] </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Set</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">string</span><span style="color:#24292E;">&gt; </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAssetsSet</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">  sharedList.</span><span style="color:#6F42C1;">clear</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  dirs.</span><span style="color:#6F42C1;">forEach</span><span style="color:#24292E;">((</span><span style="color:#E36209;">dir</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createShared</span><span style="color:#24292E;">(dir));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">fileUrls</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Array.</span><span style="color:#6F42C1;">from</span><span style="color:#24292E;">(sharedList).</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// eslint ä¿®å¤</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    ChildProcess.</span><span style="color:#6F42C1;">execSync</span><span style="color:#24292E;">(</span><span style="color:#032F62;">\`eslint \${</span><span style="color:#24292E;">fileUrls</span><span style="color:#032F62;">} --fix\`</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#24292E;">bgGreen</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">black</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot; SUCCESS &quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">} \${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">cyan</span><span style="color:#032F62;">(</span></span>
<span class="line"><span style="color:#032F62;">        </span><span style="color:#032F62;">\`ç”Ÿæˆäº†\${</span><span style="color:#24292E;">sharedList</span><span style="color:#032F62;">.</span><span style="color:#24292E;">size</span><span style="color:#032F62;">}ä¸ªæ–‡ä»¶ï¼Œå¹¶å·²ç»ä¿®å¤å¥½Eslint\`</span></span>
<span class="line"><span style="color:#032F62;">      )</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (error) {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#24292E;">bgRed</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">white</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot; ERROR &quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">} \${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">red</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;eslint ä¿®å¤å¤±è´¥&quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="æ–‡ä»¶ç›‘å¬" tabindex="-1">æ–‡ä»¶ç›‘å¬ <a class="header-anchor" href="#æ–‡ä»¶ç›‘å¬" aria-label="Permalink to &quot;æ–‡ä»¶ç›‘å¬&quot;">â€‹</a></h4><p><strong>ç›‘å¬</strong>æ–‡ä»¶çš„æ–°å»ºä¸åˆ é™¤ï¼Œé’ˆå¯¹è¯¥<code>assets</code>ç›®å½•é‡æ–°ç”Ÿæˆ<code>shared.ts</code>ï¼›è¿™é‡Œå°±æ˜¯ä½¿ç”¨<a href="https://github.com/paulmillr/chokidar#api" target="_blank" rel="noreferrer">chokidar</a> è¿›è¡Œ<code>watch</code>ï¼Œåœ¨å…¶æä¾›çš„äº‹ä»¶æ‰§è¡Œ run å‡½æ•°</p><ul><li>è·å–åˆ°æ‰€æœ‰çš„<code>assets</code>è·¯å¾„å¹¶è¿›è¡Œç›‘å¬</li><li><code>watcher</code>å‡†å¤‡å¥½çš„æ—¶å€™å°±å…¨é‡æ‰§è¡Œç”Ÿæˆ<code>views</code>ä¸‹æ‰€æœ‰çš„<code>assets/shared.ts</code></li><li>åœ¨æ–°å¢ã€åˆ é™¤çš„æ—¶å€™ï¼Œåªå¤„ç†å½“å‰çš„<code>assets</code>æ–‡ä»¶å¤¹é‡æ–°ç”Ÿæˆ<code>shared.ts</code></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { run, getAssetsSet } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./shared</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> chalk </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">chalk</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> chokidar </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">chokidar</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> Path </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">node:path</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/** æ’ä»¶é…ç½® */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PluginOptions</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">/** æ˜¯å¦å±•ç¤ºå¯¹å·²åˆ é™¤æ–‡ä»¶å¼•ç”¨çš„æ–‡ä»¶åˆ—è¡¨ */</span></span>
<span class="line"><span style="color:#F6F6F4;">  showDeleted</span><span style="color:#F286C4;">?:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">boolean</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">/** é¡µé¢æ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¸€èˆ¬æ˜¯src/viewsã€src/pages */</span></span>
<span class="line"><span style="color:#F6F6F4;">  source</span><span style="color:#F286C4;">?:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">let</span><span style="color:#F6F6F4;"> watcher</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">chokidar</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">FSWatcher</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">|</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">null</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">null</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">let</span><span style="color:#F6F6F4;"> ready </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">false</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> sep </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> Path.sep;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> ç›‘å¬æ–‡ä»¶æ”¹åŠ¨</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{ Object }</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">options</span><span style="color:#7B7F8B;"> é…ç½®</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{ boolean }</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">options.showDeleted</span><span style="color:#7B7F8B;"> æ˜¯å¦å±•ç¤ºå¯¹å·²åˆ é™¤æ–‡ä»¶å¼•ç”¨çš„æ–‡ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">watch</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">options</span><span style="color:#F286C4;">?:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PluginOptions</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// æ–‡ä»¶æ–°å¢æ—¶</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">addFileListener</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// è¿‡æ»¤copyæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (path.</span><span style="color:#62E884;">includes</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">copy</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)) </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (ready) {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#62E884;">parseAndCreate</span><span style="color:#F6F6F4;">(path);</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// åˆ é™¤æ–‡ä»¶æ—¶ï¼Œéœ€è¦æŠŠæ–‡ä»¶é‡Œæ‰€æœ‰çš„ç”¨ä¾‹åˆ æ‰</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">fileRemovedListener</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">parseAndCreate</span><span style="color:#F6F6F4;">(path);</span></span>
<span class="line"><span style="color:#F6F6F4;">    options?.showDeleted </span><span style="color:#F286C4;">&amp;&amp;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">findImportFile</span><span style="color:#F6F6F4;">(path);</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (</span><span style="color:#F286C4;">!</span><span style="color:#F6F6F4;">watcher) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// ç›‘å¬assetsæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#F6F6F4;">    watcher </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> chokidar.</span><span style="color:#62E884;">watch</span><span style="color:#F6F6F4;">(Array.</span><span style="color:#62E884;">from</span><span style="color:#F6F6F4;">(</span><span style="color:#62E884;">getAssetsSet</span><span style="color:#F6F6F4;">(options?.source)));</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">  watcher</span></span>
<span class="line"><span style="color:#F6F6F4;">    .</span><span style="color:#62E884;">on</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">add</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, addFileListener)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// .on(&#39;addDir&#39;, addDirecotryListener)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// .on(&#39;change&#39;, fileChangeListener)</span></span>
<span class="line"><span style="color:#F6F6F4;">    .</span><span style="color:#62E884;">on</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">unlink</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, fileRemovedListener)</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// .on(&#39;unlinkDir&#39;, directoryRemovedListener)</span></span>
<span class="line"><span style="color:#F6F6F4;">    .</span><span style="color:#62E884;">on</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">error</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> (</span><span style="color:#FFB86C;font-style:italic;">error</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">      console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">      console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.bgRed.</span><span style="color:#62E884;">white</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> ERROR </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.</span><span style="color:#62E884;">red</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#E7EE98;">          </span><span style="color:#E7EE98;">\`Error happened </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">error</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#E7EE98;">        </span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#F6F6F4;">      );</span></span>
<span class="line"><span style="color:#F6F6F4;">    })</span></span>
<span class="line"><span style="color:#F6F6F4;">    .</span><span style="color:#62E884;">on</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">ready</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">, </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> () {</span></span>
<span class="line"><span style="color:#F6F6F4;">      console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">();</span></span>
<span class="line"><span style="color:#F6F6F4;">      console.</span><span style="color:#62E884;">log</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#F6F6F4;">        </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.bgGreen.</span><span style="color:#62E884;">black</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;"> shared </span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;"> </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">chalk.</span><span style="color:#62E884;">cyan</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">æ£€æµ‹assetsæ–‡ä»¶å¤¹ä¸­</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#F6F6F4;">      );</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#7B7F8B;">// å…¨é‡ç”Ÿæˆä¸€ésharedæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">(</span><span style="color:#62E884;">getAssetsSet</span><span style="color:#F6F6F4;">(options?.source));</span></span>
<span class="line"><span style="color:#F6F6F4;">      ready </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#BF9EEE;">true</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">    });</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> è§£æç›®æ ‡è·¯å¾„ï¼Œåªæ›´æ–°ç›®æ ‡è·¯å¾„çš„shared.ts</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#7B7F8B;"> æ–°å¢ã€åˆ é™¤çš„æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">parseAndCreate</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// åªç›‘å¬tsæ–‡ä»¶(ä¸ç®¡å›¾ç‰‡)  æ’é™¤shared.ts(å¦åˆ™è‡ªåŠ¨ç”Ÿæˆåä¼šå†æ¬¡è§¦å‘add hook) ç»„ä»¶åªå…³å¿ƒcomponents/xx/index.ts</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> winMatch </span><span style="color:#F286C4;">=</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">assets\\\\component</span><span style="color:#FFB86C;">(</span><span style="color:#E7EE98;">s</span><span style="color:#FFB86C;">)</span><span style="color:#F286C4;">?</span><span style="color:#E7EE98;">\\\\</span><span style="color:#97E1F1;">[</span><span style="color:#BF9EEE;">a-zA-Z</span><span style="color:#97E1F1;">]</span><span style="color:#F286C4;">*</span><span style="color:#E7EE98;">\\\\index</span><span style="color:#BF9EEE;">.</span><span style="color:#E7EE98;">ts</span><span style="color:#EE6666;">/</span><span style="color:#F286C4;">g</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> unixMatch </span><span style="color:#F286C4;">=</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">assets\\/component</span><span style="color:#FFB86C;">(</span><span style="color:#E7EE98;">s</span><span style="color:#FFB86C;">)</span><span style="color:#F286C4;">?</span><span style="color:#E7EE98;">\\/</span><span style="color:#97E1F1;">[</span><span style="color:#BF9EEE;">a-zA-Z</span><span style="color:#97E1F1;">]</span><span style="color:#F286C4;">*</span><span style="color:#E7EE98;">\\/index</span><span style="color:#BF9EEE;">.</span><span style="color:#E7EE98;">ts</span><span style="color:#EE6666;">/</span><span style="color:#F286C4;">g</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> componentMatch </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> sep </span><span style="color:#F286C4;">==</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">/</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">?</span><span style="color:#F6F6F4;"> unixMatch </span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> winMatch; </span><span style="color:#7B7F8B;">// matchä¸åˆ°æ˜¯null</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (</span></span>
<span class="line"><span style="color:#F6F6F4;">    (path.</span><span style="color:#62E884;">endsWith</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">.ts</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">&amp;&amp;</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">!</span><span style="color:#F6F6F4;">path.</span><span style="color:#62E884;">endsWith</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">shared.ts</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">)) </span><span style="color:#F286C4;">||</span></span>
<span class="line"><span style="color:#F6F6F4;">    path.</span><span style="color:#62E884;">match</span><span style="color:#F6F6F4;">(componentMatch)</span></span>
<span class="line"><span style="color:#F6F6F4;">  ) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// æ‰¾åˆ°å½“å‰çš„assetsç›®å½•</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> assetsParent </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> path.</span><span style="color:#62E884;">match</span><span style="color:#F6F6F4;">(</span><span style="color:#EE6666;">/</span><span style="color:#BF9EEE;">.</span><span style="color:#F286C4;">*</span><span style="color:#E7EE98;">assets</span><span style="color:#EE6666;">/</span><span style="color:#F6F6F4;">)?.[</span><span style="color:#BF9EEE;">0</span><span style="color:#F6F6F4;">];</span></span>
<span class="line"><span style="color:#F6F6F4;">    assetsParent </span><span style="color:#F286C4;">&amp;&amp;</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">run</span><span style="color:#F6F6F4;">([assetsParent]);</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@author</span><span style="color:#7B7F8B;">: gauharchan</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@description</span><span style="color:#7B7F8B;"> æ‰¾åˆ°å¯¹ å½“å‰åˆ é™¤(é‡å‘½å)çš„æ–‡ä»¶ æœ‰å¼•ç”¨çš„æ‰€æœ‰æ–‡ä»¶</span></span>
<span class="line"><span style="color:#7B7F8B;"> * </span><span style="color:#F286C4;">@param</span><span style="color:#7B7F8B;"> </span><span style="color:#97E1F1;font-style:italic;">{string}</span><span style="color:#7B7F8B;"> </span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#7B7F8B;"> å½“å‰åˆ é™¤(é‡å‘½å)çš„æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">findImportFile</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">_path</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">string</span><span style="color:#F6F6F4;">) {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { run, getAssetsSet } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./shared&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> chalk </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;chalk&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> chokidar </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;chokidar&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Path </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;node:path&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/** æ’ä»¶é…ç½® */</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PluginOptions</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/** æ˜¯å¦å±•ç¤ºå¯¹å·²åˆ é™¤æ–‡ä»¶å¼•ç”¨çš„æ–‡ä»¶åˆ—è¡¨ */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">showDeleted</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">boolean</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/** é¡µé¢æ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¸€èˆ¬æ˜¯src/viewsã€src/pages */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">source</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> watcher</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">chokidar</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">FSWatcher</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> ready </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sep</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Path.sep;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> ç›‘å¬æ–‡ä»¶æ”¹åŠ¨</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{ Object }</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">options</span><span style="color:#6A737D;"> é…ç½®</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{ boolean }</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">options.showDeleted</span><span style="color:#6A737D;"> æ˜¯å¦å±•ç¤ºå¯¹å·²åˆ é™¤æ–‡ä»¶å¼•ç”¨çš„æ–‡ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(</span><span style="color:#E36209;">options</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PluginOptions</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ–‡ä»¶æ–°å¢æ—¶</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">addFileListener</span><span style="color:#24292E;">(</span><span style="color:#E36209;">path</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// è¿‡æ»¤copyæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (path.</span><span style="color:#6F42C1;">includes</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;copy&quot;</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (ready) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">parseAndCreate</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// åˆ é™¤æ–‡ä»¶æ—¶ï¼Œéœ€è¦æŠŠæ–‡ä»¶é‡Œæ‰€æœ‰çš„ç”¨ä¾‹åˆ æ‰</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fileRemovedListener</span><span style="color:#24292E;">(</span><span style="color:#E36209;">path</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">parseAndCreate</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">    options?.showDeleted </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findImportFile</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">watcher) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç›‘å¬assetsæ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#24292E;">    watcher </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> chokidar.</span><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(Array.</span><span style="color:#6F42C1;">from</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">getAssetsSet</span><span style="color:#24292E;">(options?.source)));</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  watcher</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;add&quot;</span><span style="color:#24292E;">, addFileListener)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// .on(&#39;addDir&#39;, addDirecotryListener)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// .on(&#39;change&#39;, fileChangeListener)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;unlink&quot;</span><span style="color:#24292E;">, fileRemovedListener)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// .on(&#39;unlinkDir&#39;, directoryRemovedListener)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;error&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">error</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#24292E;">bgRed</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">white</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot; ERROR &quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">} \${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">red</span><span style="color:#032F62;">(</span></span>
<span class="line"><span style="color:#032F62;">          </span><span style="color:#032F62;">\`Error happened \${</span><span style="color:#24292E;">error</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#032F62;">        )</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ready&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> () {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#24292E;">bgGreen</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">black</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot; shared &quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">} \${</span><span style="color:#24292E;">chalk</span><span style="color:#032F62;">.</span><span style="color:#6F42C1;">cyan</span><span style="color:#032F62;">(</span><span style="color:#032F62;">&quot;æ£€æµ‹assetsæ–‡ä»¶å¤¹ä¸­&quot;</span><span style="color:#032F62;">)</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// å…¨é‡ç”Ÿæˆä¸€ésharedæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">getAssetsSet</span><span style="color:#24292E;">(options?.source));</span></span>
<span class="line"><span style="color:#24292E;">      ready </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> è§£æç›®æ ‡è·¯å¾„ï¼Œåªæ›´æ–°ç›®æ ‡è·¯å¾„çš„shared.ts</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">path</span><span style="color:#6A737D;"> æ–°å¢ã€åˆ é™¤çš„æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">parseAndCreate</span><span style="color:#24292E;">(</span><span style="color:#E36209;">path</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// åªç›‘å¬tsæ–‡ä»¶(ä¸ç®¡å›¾ç‰‡)  æ’é™¤shared.ts(å¦åˆ™è‡ªåŠ¨ç”Ÿæˆåä¼šå†æ¬¡è§¦å‘add hook) ç»„ä»¶åªå…³å¿ƒcomponents/xx/index.ts</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">winMatch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /assets</span><span style="color:#22863A;font-weight:bold;">\\\\</span><span style="color:#032F62;">component(s)</span><span style="color:#D73A49;">?</span><span style="color:#22863A;font-weight:bold;">\\\\</span><span style="color:#005CC5;">[a-zA-Z]</span><span style="color:#D73A49;">*</span><span style="color:#22863A;font-weight:bold;">\\\\</span><span style="color:#032F62;">index</span><span style="color:#005CC5;">.</span><span style="color:#032F62;">ts/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">unixMatch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /assets</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#032F62;">component(s)</span><span style="color:#D73A49;">?</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#005CC5;">[a-zA-Z]</span><span style="color:#D73A49;">*</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#032F62;">index</span><span style="color:#005CC5;">.</span><span style="color:#032F62;">ts/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">componentMatch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> sep </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> unixMatch </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> winMatch; </span><span style="color:#6A737D;">// matchä¸åˆ°æ˜¯null</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    (path.</span><span style="color:#6F42C1;">endsWith</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;.ts&quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!</span><span style="color:#24292E;">path.</span><span style="color:#6F42C1;">endsWith</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;shared.ts&quot;</span><span style="color:#24292E;">)) </span><span style="color:#D73A49;">||</span></span>
<span class="line"><span style="color:#24292E;">    path.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(componentMatch)</span></span>
<span class="line"><span style="color:#24292E;">  ) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ‰¾åˆ°å½“å‰çš„assetsç›®å½•</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">assetsParent</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> path.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">assets/</span><span style="color:#24292E;">)?.[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">    assetsParent </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">([assetsParent]);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@author</span><span style="color:#6A737D;">: gauharchan</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@description</span><span style="color:#6A737D;"> æ‰¾åˆ°å¯¹ å½“å‰åˆ é™¤(é‡å‘½å)çš„æ–‡ä»¶ æœ‰å¼•ç”¨çš„æ‰€æœ‰æ–‡ä»¶</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{string}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">path</span><span style="color:#6A737D;"> å½“å‰åˆ é™¤(é‡å‘½å)çš„æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findImportFile</span><span style="color:#24292E;">(</span><span style="color:#E36209;">_path</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;">) {}</span></span></code></pre></div><h4 id="vite-æ’ä»¶" tabindex="-1">vite æ’ä»¶ <a class="header-anchor" href="#vite-æ’ä»¶" aria-label="Permalink to &quot;vite æ’ä»¶&quot;">â€‹</a></h4><p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬æ˜¯èµ·ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå†è¿è¡Œ<code>node</code>å‘½ä»¤ï¼Œæˆ–è€…åœ¨<code>package.json</code>çš„<code>script</code>ä¸­æ–°åŠ ä¸€ä¸ªå‘½ä»¤</p><p>ä½†å…¶å®åŸºäºä»¥å¾€çš„ç»éªŒï¼Œè¿™ç§å·¥å…·ç±»çš„ä¸œè¥¿åªè¦æ˜¯å¤šä¸€ä¸ªé¢å¤–çš„æ“ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬å‚²å¨‡çš„å¼€å‘è€…å°±ä¸ä¼šå»ä½¿ç”¨çš„ï¼›è¿˜æ˜¯ <code>æ ¹æ®apiæ–‡æ¡£</code>ç”Ÿæˆ<code>api.ts</code>çš„ä¾‹å­ï¼ŒåŸæœ¬æˆ‘ä»¬ä¹Ÿæœ‰è¿™ä¹ˆä¸€ä¸ªå·¥å…·ï¼Œä½†æ˜¯æ¯ä¸ªé¡¹ç›®çš„ api æ–‡æ¡£åœ°å€è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„å˜›ï¼Œå› ä¸ºéœ€è¦å¼€å‘è€…é…ç½®ä¸€ä¸‹ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„çµæ´»é…ç½®ï¼Œä»å·¥å…·çš„è§’åº¦å‡ºå‘æ²¡æœ‰ä»»ä½•çš„æ¯›ç—…ï¼Œä½†æ˜¯ä½œä¸ºä½¿ç”¨è€…ï¼Œå±…ç„¶æ²¡æœ‰äººæ„¿æ„å»åšã€å»ç”¨ï¼›å®æ„¿è‡ªå·±æ‰‹åŠ¨å»å†™è¿™äº›æ— èŠã€é‡å¤æ€§çš„ä»£ç ã€‚</p><p>å› ä¸ºæˆ‘è¿™æ¬¡å¸å–æ•™è®­ï¼Œä»¥<code>vite</code>æ’ä»¶çš„æ–¹å¼è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å¯åŠ¨<code>serve</code>æœåŠ¡çš„æ—¶å€™æ‰§è¡Œ</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// vite-plugin-shared.ts</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { Plugin } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">vite</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { PluginOptions, watch } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">./watch</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">vitePluginShared</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">options</span><span style="color:#F286C4;">?:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PluginOptions</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Plugin</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    name</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">vite-plugin-shared</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">buildStart</span><span style="color:#F6F6F4;">() {</span></span>
<span class="line"><span style="color:#F6F6F4;">      </span><span style="color:#62E884;">watch</span><span style="color:#F6F6F4;">(options);</span></span>
<span class="line"><span style="color:#F6F6F4;">    },</span></span>
<span class="line"><span style="color:#F6F6F4;">    apply</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">serve</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  };</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">default</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  vitePluginShared,</span></span>
<span class="line"><span style="color:#F6F6F4;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// vite-plugin-shared.ts</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Plugin } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;vite&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { PluginOptions, watch } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;./watch&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">vitePluginShared</span><span style="color:#24292E;">(</span><span style="color:#E36209;">options</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PluginOptions</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Plugin</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&quot;vite-plugin-shared&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">buildStart</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">(options);</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    apply: </span><span style="color:#032F62;">&quot;serve&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  vitePluginShared,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><p>æ¥ä¸‹æ¥åªéœ€è¦åœ¨<code>vite.config.ts</code>ä¸­å¼•å…¥ä½¿ç”¨å³å¯</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { vitePluginShared } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">vite-plugin-shared</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">;</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">default</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">defineConfig</span><span style="color:#F6F6F4;">(({ </span><span style="color:#FFB86C;font-style:italic;">mode</span><span style="color:#F6F6F4;"> }) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> ({</span></span>
<span class="line"><span style="color:#F6F6F4;">  base</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  plugins</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">vue</span><span style="color:#F6F6F4;">(),</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">Components</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">      resolvers</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span><span style="color:#62E884;">VantResolver</span><span style="color:#F6F6F4;">()],</span></span>
<span class="line"><span style="color:#F6F6F4;">    }),</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">vitePluginShared</span><span style="color:#F6F6F4;">({</span><span style="color:#F286C4;">...</span><span style="color:#F6F6F4;">}),</span></span>
<span class="line"><span style="color:#F6F6F4;">  ],</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"><span style="color:#F6F6F4;"> }));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { vitePluginShared } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vite-plugin-shared&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">defineConfig</span><span style="color:#24292E;">(({ </span><span style="color:#E36209;">mode</span><span style="color:#24292E;"> }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  base: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  plugins: [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">vue</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Components</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      resolvers: [</span><span style="color:#6F42C1;">VantResolver</span><span style="color:#24292E;">()],</span></span>
<span class="line"><span style="color:#24292E;">    }),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">vitePluginShared</span><span style="color:#24292E;">({</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">}),</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;"> }));</span></span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬çš„<code>sharedå·¥å…·</code>å°±ä¼šåœ¨æ­£å¸¸å¯åŠ¨é¡¹ç›®çš„æ—¶å€™è¿è¡Œå•¦ï¼Œæ²¡æœ‰é…ç½®çš„å¿ƒæ™ºè´Ÿæ‹…äº†</p><h5 id="æ’ä»¶é…ç½®å‚æ•°" tabindex="-1">æ’ä»¶é…ç½®å‚æ•° <a class="header-anchor" href="#æ’ä»¶é…ç½®å‚æ•°" aria-label="Permalink to &quot;æ’ä»¶é…ç½®å‚æ•°&quot;">â€‹</a></h5><table><thead><tr><th>å‚æ•°å</th><th>æè¿°</th><th>ç±»å‹</th></tr></thead><tbody><tr><td>source</td><td>é¡µé¢æ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¸€èˆ¬æ˜¯ src/viewsã€src/pages</td><td>string[å¯é€‰]</td></tr><tr><td>showDeleted</td><td>æ˜¯å¦å±•ç¤ºå¯¹å·²åˆ é™¤æ–‡ä»¶å¼•ç”¨çš„æ–‡ä»¶åˆ—è¡¨</td><td>boolean[å¯é€‰]</td></tr></tbody></table><h3 id="å‘åŒ…æ³¨æ„äº‹é¡¹" tabindex="-1">å‘åŒ…æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#å‘åŒ…æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;å‘åŒ…æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ul><li>å‘åŒ…å<code>__dirname</code>æŒ‡å‘çš„æ˜¯<code>node_modules/xxx/vite-plugin-shared/dist</code>ï¼›å› æ­¤ä»£ç ä¸­ä½¿ç”¨<code>process.cwd()</code>è·å–ç»ˆç«¯è¿è¡Œè·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨èµ·<code>serve</code>çš„æ—¶å€™è¿è¡Œ</li><li><code>chalk</code>ä¾èµ–çš„é—®é¢˜ <ul><li>ç›´æ¥ä½¿ç”¨<code>node</code>çš„<code>chalk</code>ï¼Œä¼šå­˜åœ¨ç›¸å…³æ–¹æ³•ä¸å­˜åœ¨çš„æƒ…å†µ</li><li>ä½¿ç”¨<code>pnpm</code>å®‰è£…ï¼Œè¦æ³¨æ„ç‰ˆæœ¬ï¼Œå› ä¸º<code>chalk5.x</code>å¼€å§‹æ˜¯<code>ESM</code>ï¼Œæ¨èä½¿ç”¨<code>4.1.2</code></li></ul></li><li>æ¯æ¬¡å‘åŒ…è¦ä¿®æ”¹<code>version</code></li></ul><h3 id="future-feature" tabindex="-1">future feature <a class="header-anchor" href="#future-feature" aria-label="Permalink to &quot;future feature&quot;">â€‹</a></h3><ul><li><p>[x] å»ºç«‹<code>Monorepo</code>è§„èŒƒçš„ä»“åº“ï¼Œæœ€ç»ˆé›†åˆåœ¨ç§æœæ¥è§£å†³æ›´æ–°çš„é—®é¢˜</p><p>æˆ‘ä»¬ç›®å‰è¿™ä¸ªä»£ç æ˜¯æ”¾åœ¨äº†é¡¹ç›®çš„æ ¹ç›®å½•ä¸­(å› ä¸ºè¿˜åœ¨<code>beta</code>é˜¶æ®µ)ï¼Œå› æ­¤åç»­å·¥å…·ä»£ç æ›´æ–°æˆä¸ºäº†ä¸€ä¸ªå¤§é—®é¢˜</p></li><li><p>[ ] è‡ªå·±å®ç°æ–‡ä»¶ç›‘å¬ç³»ç»Ÿçš„é‡å‘½åäº‹ä»¶ï¼Œå¹¶å®ç°å¯¹æ–‡ä»¶ä¸­çš„å¼•ç”¨å‘½åè‡ªåŠ¨ä¿®æ”¹(ç±»ä¼¼ volar æ’ä»¶çš„åŠŸèƒ½)</p></li></ul><p><img src="https://raw.githubusercontent.com/GauharChan/Picture-bed/main/img/image-20230227154033391.png" alt="image-20230227154033391"></p><p>ç›®å‰æœ‰ä¸ªç—›ç‚¹æ˜¯ï¼Œæˆ‘ä»¬æŠ›å‡ºçš„æˆå‘˜åç§°æ˜¯ä»¥<code>æ–‡ä»¶å¤¹+æ–‡ä»¶å</code>å‘½åçš„ï¼Œ<code>assets</code>åŸæœ‰çš„<code>ts</code>æ–‡ä»¶ä¸€æ—¦é‡å‘½åï¼Œé‚£ä¹ˆæˆå‘˜çš„åç§°å°†ä¼šå˜æ›´ï¼ŒåŒæ—¶é¡µé¢ä¸­çš„å¼•ç”¨éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ›´æ”¹</p><p><code>chokidar</code>æ²¡æœ‰æä¾›é‡å‘½åçš„äº‹ä»¶ç›‘å¬</p>`,67),r=[e,t,c];function y(F,E,i,d,C,h){return a(),l("div",null,r)}const A=n(o,[["render",y]]);export{D as __pageData,A as default};
